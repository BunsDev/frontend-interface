{"version":3,"sources":["../node_modules/react-bootstrap/esm/Row.js","../node_modules/remarkable/dist/esm/index.browser.js","../../src/utils.js","../../src/tags.js","../../src/attrs.js","../../src/regexp.js","../../src/purify.js","../node_modules/react-bootstrap/esm/Table.js"],"names":["DEVICE_SIZES","Row","React","ref","bsPrefix","className","as","Component","props","decoratedBsPrefix","useBootstrapPrefix","sizePrefix","classes","forEach","brkPoint","cols","propValue","infix","push","_jsx","classNames","displayName","textarea","decodeEntity","name","document","createElement","innerHTML","value","hasOwn","Object","prototype","hasOwnProperty","has","object","key","call","assign","obj","sources","slice","arguments","source","TypeError","keys","UNESCAPE_MD_RE","unescapeMd","str","indexOf","replace","isValidEntityCode","c","fromCodePoint","surrogate1","surrogate2","String","fromCharCode","NAMED_ENTITY_RE","DIGITAL_ENTITY_TEST_RE","replaceEntityPattern","match","code","decoded","charCodeAt","test","toLowerCase","parseInt","replaceEntities","HTML_ESCAPE_TEST_RE","HTML_ESCAPE_REPLACE_RE","HTML_REPLACEMENTS","replaceUnsafeChar","ch","escapeHtml","rules","nextToken","tokens","idx","length","type","tight","content","blockquote_open","blockquote_close","getBreak","block","fence","options","env","instance","fences","fenceName","token","langClass","langPrefix","params","split","join","fence_custom","highlight","apply","concat","heading_open","hLevel","heading_close","hr","xhtmlOut","bullet_list_open","bullet_list_close","list_item_open","list_item_close","ordered_list_open","order","ordered_list_close","paragraph_open","paragraph_close","addBreak","link_open","title","target","linkTarget","href","link_close","image","src","alt","table_open","table_close","thead_open","thead_close","tbody_open","tbody_close","tr_open","tr_close","th_open","align","th_close","td_open","td_close","strong_open","strong_close","em_open","em_close","del_open","del_close","ins_open","ins_close","mark_open","mark_close","sub","sup","hardbreak","softbreak","breaks","text","htmlblock","htmltag","abbr_open","abbr_close","footnote_ref","n","Number","id","toString","subId","footnote_block_open","footnote_block_close","footnote_open","footnote_close","footnote_anchor","dl_open","dt_open","dd_open","dl_close","dt_close","dd_close","Renderer","this","Ruler","__rules__","__cache__","StateInline","parserInline","outTokens","parser","pos","posMax","level","pending","pendingLevel","cache","isInLabel","linkLevel","linkContent","labelUnmatchedScopes","parseLinkLabel","state","start","found","marker","labelEnd","max","oldPos","oldFlag","skipToken","parseAbbr","label","trim","abbreviations","normalizeLink","url","normalized","decodeURI","err","encodeURI","parseLinkDestination","link","validateLink","parseLinkTitle","normalizeReference","toUpperCase","parseReference","references","renderInline","_rules","len","i","result","render","children","__find__","__compile__","self","chains","rule","enabled","altName","chain","fn","at","opt","Error","before","beforeName","ruleName","splice","after","afterName","enable","list","strict","Array","isArray","disable","getRules","chainName","pushPending","cacheSet","val","cacheGet","PUNCT_CHARS","regEscape","s","RARE_RE","SCOPED_ABBR_RE","SCOPED_ABBR","QUOTE_TEST_RE","QUOTE_RE","PUNCT_RE","isLetter","replaceAt","index","substr","inlineMode","lines","parse","l","inline","tok","j","t","lastParagraph","current","currentLabel","insideRef","refTokens","footnotes","filter","pop","count","nodes","reg","m","regText","blockTokens","abbrRegExp","map","x","sort","a","b","RegExp","lastIndex","exec","inlineTokens","blkIdx","typographer","thisLevel","lastSpace","nextSpace","item","canOpen","canClose","isSingle","stack","OUTER","single","quotes","Core","ruler","StateBlock","indent","indent_found","bMarks","eMarks","tShift","blkIndent","line","lineMax","parentType","ddIndent","skipBulletListMarker","startLine","skipOrderedListMarker","process","isEmpty","skipEmptyLines","from","skipSpaces","skipChars","skipCharsBack","min","getLines","begin","end","keepLastLF","first","last","queue","shift","Math","html_blocks","HTML_TAG_OPEN_RE","HTML_TAG_CLOSE_RE","getLine","skipMarker","_rules$1","endLine","nextLine","silent","mem","haveEndMarker","lastLineEmpty","oldTShift","oldBMarks","oldIndent","oldParentType","terminatorRules","terminate","maxNesting","tokenize","cnt","oldTight","posAfterMarker","indentAfterMarker","markerValue","markerCharCode","isOrdered","contentStart","listTokIdx","prevEmptyEnd","listLines","itemLines","markTightParagraphs","oldBMark","refs","tmp","next","html","lc","isLetter$1","lineText","rows","cell","aligns","tableLines","tbodyLines","substring","ddLine","dtLine","oldDDIndent","markTightParagraphs$1","ParserBlock","hasEmptyLines","TABS_SCAN_RE","NEWLINES_RE","SPACES_RE","isTerminatorChar","lineStart","lastTabPos","offset","ESCAPED","isAlphaNum","scanDelims","lastChar","nextChar","can_open","can_close","delims","UNESCAPE_RE","UNESCAPE_RE$1","url_schemas","EMAIL_RE","AUTOLINK_RE","replace$1","regex","attr_value","attribute","open_tag","HTML_TAG_RE","DIGITAL_RE","NAMED_RE","_rules$2","pmax","matchStart","matchEnd","startCount","oldCount","newCount","res","labelStart","isImage","footnoteId","oldLength","footnoteSubId","tail","linkMatch","emailMatch","fullUrl","isLetter$2","ParserInline","cached_pos","ok","config","components","core","StateCore","renderer","Remarkable","preset","linkify","console","warn","configure","set","presets","use","plugin","parseInline","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create","Reflect","construct","fun","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","typeErrorCreate","unconstruct","func","args","array","element","lcElement","newObject","property","desc","svg","svgFilters","svgDisallowed","mathMl","mathMlDisallowed","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","getGlobal","window","_createTrustedTypesPolicy","trustedTypes","suffix","ATTR_NAME","policyName","createPolicy","createHTML","_","DOMPurify","root","createDOMPurify","originalDocument","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","Text","Comment","DOMParser","ElementPrototype","cloneNode","lookupGetter","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","documentMode","clone","hooks","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","addToSet","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_DOM_IMPORT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","transformCaseFunc","CONFIG","formElement","_parseConfig","cfg","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","parent","namespaceURI","tagName","parentTagName","Boolean","commonSvgAndHTMLElements","_forceRemove","node","_removeAttribute","_initDocument","doc","leadingWhitespace","dirty","matches","dirtyPayload","parseFromString","body","_createIterator","_isClobbered","elm","_isNode","_executeHook","hook","_sanitizeElements","currentNode","allowedTags","parentNode","childNodes","_isValidAttribute","lcName","lcTag","_sanitizeAttributes","attr","attributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","_sanitizeShadowDOM","shadowNode","shadowIterator","importedNode","oldNode","returnNode","nodeIterator","serializedHTML","tag","entryPoint","hookFunction","Table","striped","bordered","borderless","hover","size","variant","responsive","table","responsiveClass"],"mappings":"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OACA,cACA,SACA,MACA,KACA,MACA,QACA,KACA,MACA,OACA,cACA,cACA,eACA,OACA,UACA,UACA,YACA,MACA,MACA,MACA,MACA,aACA,KACA,UACA,UACA,OACA,SACA,SACA,mBACA,0BACA,UACA,MACA,kBACA,qBACA,MACA,MACA,OACA,WACA,OACA,SACA,OACA,KACA,MACA,eACA,QACA,MACA,OACA,MACA,MACA,OACA,OACA,OACA,MACA,MACA,UACA,SACA,QACA,SACA,OACA,SACA,UACA,MACA,UACA,QACA,SACA,MACA,QACA,MACA,OACA,YACA,WACA,QACA,OACA,QACA,MACA,WACA,MACA,QACA,OACA,aACA,OACA,MACA,QACA,MACA,SACA,UACA,MACA,QACA,MACA,YACA,SACA,MACA,SACA,SACA,WACA,cACA,SACA,OACA,UACA,QACA,MACA,SAOEC,GAAc,2IACdC,GAAc,2CAuElB,SAASC,GAAUC,EAAOlV,GAIxB,OAHAkV,EAAQA,EAAM/X,OACd6C,EAAUA,GAAW,GAEd,SAASiJ,EAAKhN,EAAM0O,GACzB,OAAK1O,GAGL0O,EAAMA,EAAIxN,QAAUwN,EACpBuK,EAAQA,EAAMxX,QAAQzB,EAAM0O,GACrB1B,GAJE,IAAIqE,OAAO4H,EAAOlV,IAS/B,IAOImV,GAAcF,GAAU,2CAAVA,CACG,WAND,sBAKFA,CAEG,gBAND,UAIFA,CAGG,gBAND,UAGFA,GAMdG,GAAcH,GAAU,yCAAVA,CACG,YAdD,6BAaFA,CAEG,aAAcE,GAFjBF,GAKdI,GAAcJ,GAAU,yCAAVA,CACG,YAAaG,GADhBH,GAUdK,GAAcL,GAAU,+DAAVA,CACf,WAAYI,GADGJ,CAEf,YARe,8BAMAA,CAGf,UARe,wCAKAA,CAIf,aARe,cAIAA,CAKf,cARe,oBAGAA,CAMf,QARe,2BAEAA,GAyDlB,IAAIM,GAAa,uCACbC,GAAa,4BA2CjB,IAAIC,GAAW,CACb,CAAE,OAzzCJ,SAAc5O,EAAOmK,GAGnB,IAFA,IAAI9K,EAAMW,EAAMX,IAETA,EAAMW,EAAMV,SAAW6N,GAAiBnN,EAAMxE,IAAI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","file":"static/js/34.0a0c0faf.chunk.js","sourcesContent":["import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst DEVICE_SIZES = ['xxl', 'xl', 'lg', 'md', 'sm', 'xs'];\nconst Row = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'row');\n  const sizePrefix = `${decoratedBsPrefix}-cols`;\n  const classes = [];\n  DEVICE_SIZES.forEach(brkPoint => {\n    const propValue = props[brkPoint];\n    delete props[brkPoint];\n    let cols;\n\n    if (propValue != null && typeof propValue === 'object') {\n      ({\n        cols\n      } = propValue);\n    } else {\n      cols = propValue;\n    }\n\n    const infix = brkPoint !== 'xs' ? `-${brkPoint}` : '';\n    if (cols != null) classes.push(`${sizePrefix}${infix}-${cols}`);\n  });\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, decoratedBsPrefix, ...classes)\n  });\n});\nRow.displayName = 'Row';\nexport default Row;","var textarea;\n\nfunction decodeEntity(name) {\n  textarea = textarea || document.createElement('textarea');\n  textarea.innerHTML = '&' + name + ';';\n  return textarea.value;\n}\n\n/**\n * Utility functions\n */\n\nfunction typeOf(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nfunction isString(obj) {\n  return typeOf(obj) === '[object String]';\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nfunction has(object, key) {\n  return object\n    ? hasOwn.call(object, key)\n    : false;\n}\n\n// Extend objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = [].slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be object');\n    }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar UNESCAPE_MD_RE = /\\\\([\\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction unescapeMd(str) {\n  if (str.indexOf('\\\\') < 0) { return str; }\n  return str.replace(UNESCAPE_MD_RE, '$1');\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction isValidEntityCode(c) {\n  /*eslint no-bitwise:0*/\n  // broken sequence\n  if (c >= 0xD800 && c <= 0xDFFF) { return false; }\n  // never used\n  if (c >= 0xFDD0 && c <= 0xFDEF) { return false; }\n  if ((c & 0xFFFF) === 0xFFFF || (c & 0xFFFF) === 0xFFFE) { return false; }\n  // control codes\n  if (c >= 0x00 && c <= 0x08) { return false; }\n  if (c === 0x0B) { return false; }\n  if (c >= 0x0E && c <= 0x1F) { return false; }\n  if (c >= 0x7F && c <= 0x9F) { return false; }\n  // out of range\n  if (c > 0x10FFFF) { return false; }\n  return true;\n}\n\nfunction fromCodePoint(c) {\n  /*eslint no-bitwise:0*/\n  if (c > 0xffff) {\n    c -= 0x10000;\n    var surrogate1 = 0xd800 + (c >> 10),\n        surrogate2 = 0xdc00 + (c & 0x3ff);\n\n    return String.fromCharCode(surrogate1, surrogate2);\n  }\n  return String.fromCharCode(c);\n}\n\nvar NAMED_ENTITY_RE   = /&([a-z#][a-z0-9]{1,31});/gi;\nvar DIGITAL_ENTITY_TEST_RE = /^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;\n\nfunction replaceEntityPattern(match, name) {\n  var code = 0;\n  var decoded = decodeEntity(name);\n\n  if (name !== decoded) {\n    return decoded;\n  } else if (name.charCodeAt(0) === 0x23/* # */ && DIGITAL_ENTITY_TEST_RE.test(name)) {\n    code = name[1].toLowerCase() === 'x' ?\n      parseInt(name.slice(2), 16)\n    :\n      parseInt(name.slice(1), 10);\n    if (isValidEntityCode(code)) {\n      return fromCodePoint(code);\n    }\n  }\n  return match;\n}\n\nfunction replaceEntities(str) {\n  if (str.indexOf('&') < 0) { return str; }\n\n  return str.replace(NAMED_ENTITY_RE, replaceEntityPattern);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar HTML_ESCAPE_TEST_RE = /[&<>\"]/;\nvar HTML_ESCAPE_REPLACE_RE = /[&<>\"]/g;\nvar HTML_REPLACEMENTS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\n\nfunction replaceUnsafeChar(ch) {\n  return HTML_REPLACEMENTS[ch];\n}\n\nfunction escapeHtml(str) {\n  if (HTML_ESCAPE_TEST_RE.test(str)) {\n    return str.replace(HTML_ESCAPE_REPLACE_RE, replaceUnsafeChar);\n  }\n  return str;\n}\n\nvar utils = /*#__PURE__*/Object.freeze({\n  isString: isString,\n  has: has,\n  assign: assign,\n  unescapeMd: unescapeMd,\n  isValidEntityCode: isValidEntityCode,\n  fromCodePoint: fromCodePoint,\n  replaceEntities: replaceEntities,\n  escapeHtml: escapeHtml\n});\n\n/**\n * Renderer rules cache\n */\n\nvar rules = {};\n\n/**\n * Blockquotes\n */\n\nrules.blockquote_open = function(/* tokens, idx, options, env */) {\n  return '<blockquote>\\n';\n};\n\nrules.blockquote_close = function(tokens, idx /*, options, env */) {\n  return '</blockquote>' + getBreak(tokens, idx);\n};\n\n/**\n * Code\n */\n\nrules.code = function(tokens, idx /*, options, env */) {\n  if (tokens[idx].block) {\n    return '<pre><code>' + escapeHtml(tokens[idx].content) + '</code></pre>' + getBreak(tokens, idx);\n  }\n  return '<code>' + escapeHtml(tokens[idx].content) + '</code>';\n};\n\n/**\n * Fenced code blocks\n */\n\nrules.fence = function(tokens, idx, options, env, instance) {\n  var token = tokens[idx];\n  var langClass = '';\n  var langPrefix = options.langPrefix;\n  var langName = '', fences, fenceName;\n  var highlighted;\n\n  if (token.params) {\n\n    //\n    // ```foo bar\n    //\n    // Try custom renderer \"foo\" first. That will simplify overwrite\n    // for diagrams, latex, and any other fenced block with custom look\n    //\n\n    fences = token.params.split(/\\s+/g);\n    fenceName = fences.join(' ');\n\n    if (has(instance.rules.fence_custom, fences[0])) {\n      return instance.rules.fence_custom[fences[0]](tokens, idx, options, env, instance);\n    }\n\n    langName = escapeHtml(replaceEntities(unescapeMd(fenceName)));\n    langClass = ' class=\"' + langPrefix + langName + '\"';\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight.apply(options.highlight, [ token.content ].concat(fences))\n      || escapeHtml(token.content);\n  } else {\n    highlighted = escapeHtml(token.content);\n  }\n\n  return '<pre><code' + langClass + '>'\n        + highlighted\n        + '</code></pre>'\n        + getBreak(tokens, idx);\n};\n\nrules.fence_custom = {};\n\n/**\n * Headings\n */\n\nrules.heading_open = function(tokens, idx /*, options, env */) {\n  return '<h' + tokens[idx].hLevel + '>';\n};\nrules.heading_close = function(tokens, idx /*, options, env */) {\n  return '</h' + tokens[idx].hLevel + '>\\n';\n};\n\n/**\n * Horizontal rules\n */\n\nrules.hr = function(tokens, idx, options /*, env */) {\n  return (options.xhtmlOut ? '<hr />' : '<hr>') + getBreak(tokens, idx);\n};\n\n/**\n * Bullets\n */\n\nrules.bullet_list_open = function(/* tokens, idx, options, env */) {\n  return '<ul>\\n';\n};\nrules.bullet_list_close = function(tokens, idx /*, options, env */) {\n  return '</ul>' + getBreak(tokens, idx);\n};\n\n/**\n * List items\n */\n\nrules.list_item_open = function(/* tokens, idx, options, env */) {\n  return '<li>';\n};\nrules.list_item_close = function(/* tokens, idx, options, env */) {\n  return '</li>\\n';\n};\n\n/**\n * Ordered list items\n */\n\nrules.ordered_list_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  var order = token.order > 1 ? ' start=\"' + token.order + '\"' : '';\n  return '<ol' + order + '>\\n';\n};\nrules.ordered_list_close = function(tokens, idx /*, options, env */) {\n  return '</ol>' + getBreak(tokens, idx);\n};\n\n/**\n * Paragraphs\n */\n\nrules.paragraph_open = function(tokens, idx /*, options, env */) {\n  return tokens[idx].tight ? '' : '<p>';\n};\nrules.paragraph_close = function(tokens, idx /*, options, env */) {\n  var addBreak = !(tokens[idx].tight && idx && tokens[idx - 1].type === 'inline' && !tokens[idx - 1].content);\n  return (tokens[idx].tight ? '' : '</p>') + (addBreak ? getBreak(tokens, idx) : '');\n};\n\n/**\n * Links\n */\n\nrules.link_open = function(tokens, idx, options /* env */) {\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var target = options.linkTarget ? (' target=\"' + options.linkTarget + '\"') : '';\n  return '<a href=\"' + escapeHtml(tokens[idx].href) + '\"' + title + target + '>';\n};\nrules.link_close = function(/* tokens, idx, options, env */) {\n  return '</a>';\n};\n\n/**\n * Images\n */\n\nrules.image = function(tokens, idx, options /*, env */) {\n  var src = ' src=\"' + escapeHtml(tokens[idx].src) + '\"';\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var alt = ' alt=\"' + (tokens[idx].alt ? escapeHtml(replaceEntities(unescapeMd(tokens[idx].alt))) : '') + '\"';\n  var suffix = options.xhtmlOut ? ' /' : '';\n  return '<img' + src + alt + title + suffix + '>';\n};\n\n/**\n * Tables\n */\n\nrules.table_open = function(/* tokens, idx, options, env */) {\n  return '<table>\\n';\n};\nrules.table_close = function(/* tokens, idx, options, env */) {\n  return '</table>\\n';\n};\nrules.thead_open = function(/* tokens, idx, options, env */) {\n  return '<thead>\\n';\n};\nrules.thead_close = function(/* tokens, idx, options, env */) {\n  return '</thead>\\n';\n};\nrules.tbody_open = function(/* tokens, idx, options, env */) {\n  return '<tbody>\\n';\n};\nrules.tbody_close = function(/* tokens, idx, options, env */) {\n  return '</tbody>\\n';\n};\nrules.tr_open = function(/* tokens, idx, options, env */) {\n  return '<tr>';\n};\nrules.tr_close = function(/* tokens, idx, options, env */) {\n  return '</tr>\\n';\n};\nrules.th_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<th'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.th_close = function(/* tokens, idx, options, env */) {\n  return '</th>';\n};\nrules.td_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<td'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.td_close = function(/* tokens, idx, options, env */) {\n  return '</td>';\n};\n\n/**\n * Bold\n */\n\nrules.strong_open = function(/* tokens, idx, options, env */) {\n  return '<strong>';\n};\nrules.strong_close = function(/* tokens, idx, options, env */) {\n  return '</strong>';\n};\n\n/**\n * Italicize\n */\n\nrules.em_open = function(/* tokens, idx, options, env */) {\n  return '<em>';\n};\nrules.em_close = function(/* tokens, idx, options, env */) {\n  return '</em>';\n};\n\n/**\n * Strikethrough\n */\n\nrules.del_open = function(/* tokens, idx, options, env */) {\n  return '<del>';\n};\nrules.del_close = function(/* tokens, idx, options, env */) {\n  return '</del>';\n};\n\n/**\n * Insert\n */\n\nrules.ins_open = function(/* tokens, idx, options, env */) {\n  return '<ins>';\n};\nrules.ins_close = function(/* tokens, idx, options, env */) {\n  return '</ins>';\n};\n\n/**\n * Highlight\n */\n\nrules.mark_open = function(/* tokens, idx, options, env */) {\n  return '<mark>';\n};\nrules.mark_close = function(/* tokens, idx, options, env */) {\n  return '</mark>';\n};\n\n/**\n * Super- and sub-script\n */\n\nrules.sub = function(tokens, idx /*, options, env */) {\n  return '<sub>' + escapeHtml(tokens[idx].content) + '</sub>';\n};\nrules.sup = function(tokens, idx /*, options, env */) {\n  return '<sup>' + escapeHtml(tokens[idx].content) + '</sup>';\n};\n\n/**\n * Breaks\n */\n\nrules.hardbreak = function(tokens, idx, options /*, env */) {\n  return options.xhtmlOut ? '<br />\\n' : '<br>\\n';\n};\nrules.softbreak = function(tokens, idx, options /*, env */) {\n  return options.breaks ? (options.xhtmlOut ? '<br />\\n' : '<br>\\n') : '\\n';\n};\n\n/**\n * Text\n */\n\nrules.text = function(tokens, idx /*, options, env */) {\n  return escapeHtml(tokens[idx].content);\n};\n\n/**\n * Content\n */\n\nrules.htmlblock = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\nrules.htmltag = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\n\n/**\n * Abbreviations, initialism\n */\n\nrules.abbr_open = function(tokens, idx /*, options, env */) {\n  return '<abbr title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\">';\n};\nrules.abbr_close = function(/* tokens, idx, options, env */) {\n  return '</abbr>';\n};\n\n/**\n * Footnotes\n */\n\nrules.footnote_ref = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return '<sup class=\"footnote-ref\"><a href=\"#fn' + n + '\" id=\"' + id + '\">[' + n + ']</a></sup>';\n};\nrules.footnote_block_open = function(tokens, idx, options) {\n  var hr = options.xhtmlOut\n    ? '<hr class=\"footnotes-sep\" />\\n'\n    : '<hr class=\"footnotes-sep\">\\n';\n  return hr + '<section class=\"footnotes\">\\n<ol class=\"footnotes-list\">\\n';\n};\nrules.footnote_block_close = function() {\n  return '</ol>\\n</section>\\n';\n};\nrules.footnote_open = function(tokens, idx) {\n  var id = Number(tokens[idx].id + 1).toString();\n  return '<li id=\"fn' + id + '\"  class=\"footnote-item\">';\n};\nrules.footnote_close = function() {\n  return '</li>\\n';\n};\nrules.footnote_anchor = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return ' <a href=\"#' + id + '\" class=\"footnote-backref\">↩</a>';\n};\n\n/**\n * Definition lists\n */\n\nrules.dl_open = function() {\n  return '<dl>\\n';\n};\nrules.dt_open = function() {\n  return '<dt>';\n};\nrules.dd_open = function() {\n  return '<dd>';\n};\nrules.dl_close = function() {\n  return '</dl>\\n';\n};\nrules.dt_close = function() {\n  return '</dt>\\n';\n};\nrules.dd_close = function() {\n  return '</dd>\\n';\n};\n\n/**\n * Helper functions\n */\n\nfunction nextToken(tokens, idx) {\n  if (++idx >= tokens.length - 2) {\n    return idx;\n  }\n  if ((tokens[idx].type === 'paragraph_open' && tokens[idx].tight) &&\n      (tokens[idx + 1].type === 'inline' && tokens[idx + 1].content.length === 0) &&\n      (tokens[idx + 2].type === 'paragraph_close' && tokens[idx + 2].tight)) {\n    return nextToken(tokens, idx + 2);\n  }\n  return idx;\n}\n\n/**\n * Check to see if `\\n` is needed before the next token.\n *\n * @param  {Array} `tokens`\n * @param  {Number} `idx`\n * @return {String} Empty string or newline\n * @api private\n */\n\nvar getBreak = rules.getBreak = function getBreak(tokens, idx) {\n  idx = nextToken(tokens, idx);\n  if (idx < tokens.length && tokens[idx].type === 'list_item_close') {\n    return '';\n  }\n  return '\\n';\n};\n\n/**\n * Renderer class. Renders HTML and exposes `rules` to allow\n * local modifications.\n */\n\nfunction Renderer() {\n  this.rules = assign({}, rules);\n\n  // exported helper, for custom rules only\n  this.getBreak = rules.getBreak;\n}\n\n/**\n * Render a string of inline HTML with the given `tokens` and\n * `options`.\n *\n * @param  {Array} `tokens`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @return {String}\n * @api public\n */\n\nRenderer.prototype.renderInline = function (tokens, options, env) {\n  var _rules = this.rules;\n  var len = tokens.length, i = 0;\n  var result = '';\n\n  while (len--) {\n    result += _rules[tokens[i].type](tokens, i++, options, env, this);\n  }\n\n  return result;\n};\n\n/**\n * Render a string of HTML with the given `tokens` and\n * `options`.\n *\n * @param  {Array} `tokens`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @return {String}\n * @api public\n */\n\nRenderer.prototype.render = function (tokens, options, env) {\n  var _rules = this.rules;\n  var len = tokens.length, i = -1;\n  var result = '';\n\n  while (++i < len) {\n    if (tokens[i].type === 'inline') {\n      result += this.renderInline(tokens[i].children, options, env);\n    } else {\n      result += _rules[tokens[i].type](tokens, i, options, env, this);\n    }\n  }\n  return result;\n};\n\n/**\n * Ruler is a helper class for building responsibility chains from\n * parse rules. It allows:\n *\n *   - easy stack rules chains\n *   - getting main chain and named chains content (as arrays of functions)\n *\n * Helper methods, should not be used directly.\n * @api private\n */\n\nfunction Ruler() {\n  // List of added rules. Each element is:\n  //\n  // { name: XXX,\n  //   enabled: Boolean,\n  //   fn: Function(),\n  //   alt: [ name2, name3 ] }\n  //\n  this.__rules__ = [];\n\n  // Cached rule chains.\n  //\n  // First level - chain name, '' for default.\n  // Second level - digital anchor for fast filtering by charcodes.\n  //\n  this.__cache__ = null;\n}\n\n/**\n * Find the index of a rule by `name`.\n *\n * @param  {String} `name`\n * @return {Number} Index of the given `name`\n * @api private\n */\n\nRuler.prototype.__find__ = function (name) {\n  var len = this.__rules__.length;\n  var i = -1;\n\n  while (len--) {\n    if (this.__rules__[++i].name === name) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n/**\n * Build the rules lookup cache\n *\n * @api private\n */\n\nRuler.prototype.__compile__ = function () {\n  var self = this;\n  var chains = [ '' ];\n\n  // collect unique names\n  self.__rules__.forEach(function (rule) {\n    if (!rule.enabled) {\n      return;\n    }\n\n    rule.alt.forEach(function (altName) {\n      if (chains.indexOf(altName) < 0) {\n        chains.push(altName);\n      }\n    });\n  });\n\n  self.__cache__ = {};\n\n  chains.forEach(function (chain) {\n    self.__cache__[chain] = [];\n    self.__rules__.forEach(function (rule) {\n      if (!rule.enabled) {\n        return;\n      }\n\n      if (chain && rule.alt.indexOf(chain) < 0) {\n        return;\n      }\n      self.__cache__[chain].push(rule.fn);\n    });\n  });\n};\n\n/**\n * Ruler public methods\n * ------------------------------------------------\n */\n\n/**\n * Replace rule function\n *\n * @param  {String} `name` Rule name\n * @param  {Function `fn`\n * @param  {Object} `options`\n * @api private\n */\n\nRuler.prototype.at = function (name, fn, options) {\n  var idx = this.__find__(name);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + name);\n  }\n\n  this.__rules__[idx].fn = fn;\n  this.__rules__[idx].alt = opt.alt || [];\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the chain before given the `ruleName`.\n *\n * @param  {String}   `beforeName`\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @api private\n */\n\nRuler.prototype.before = function (beforeName, ruleName, fn, options) {\n  var idx = this.__find__(beforeName);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + beforeName);\n  }\n\n  this.__rules__.splice(idx, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the chain after the given `ruleName`.\n *\n * @param  {String}   `afterName`\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @api private\n */\n\nRuler.prototype.after = function (afterName, ruleName, fn, options) {\n  var idx = this.__find__(afterName);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + afterName);\n  }\n\n  this.__rules__.splice(idx + 1, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the end of chain.\n *\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @return {String}\n */\n\nRuler.prototype.push = function (ruleName, fn, options) {\n  var opt = options || {};\n\n  this.__rules__.push({\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Enable a rule or list of rules.\n *\n * @param  {String|Array} `list` Name or array of rule names to enable\n * @param  {Boolean} `strict` If `true`, all non listed rules will be disabled.\n * @api private\n */\n\nRuler.prototype.enable = function (list, strict) {\n  list = !Array.isArray(list)\n    ? [ list ]\n    : list;\n\n  // In strict mode disable all existing rules first\n  if (strict) {\n    this.__rules__.forEach(function (rule) {\n      rule.enabled = false;\n    });\n  }\n\n  // Search by name and enable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n    if (idx < 0) {\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = true;\n  }, this);\n\n  this.__cache__ = null;\n};\n\n\n/**\n * Disable a rule or list of rules.\n *\n * @param  {String|Array} `list` Name or array of rule names to disable\n * @api private\n */\n\nRuler.prototype.disable = function (list) {\n  list = !Array.isArray(list)\n    ? [ list ]\n    : list;\n\n  // Search by name and disable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n    if (idx < 0) {\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = false;\n  }, this);\n\n  this.__cache__ = null;\n};\n\n/**\n * Get a rules list as an array of functions.\n *\n * @param  {String} `chainName`\n * @return {Object}\n * @api private\n */\n\nRuler.prototype.getRules = function (chainName) {\n  if (this.__cache__ === null) {\n    this.__compile__();\n  }\n  return this.__cache__[chainName] || [];\n};\n\nfunction block(state) {\n\n  if (state.inlineMode) {\n    state.tokens.push({\n      type: 'inline',\n      content: state.src.replace(/\\n/g, ' ').trim(),\n      level: 0,\n      lines: [ 0, 1 ],\n      children: []\n    });\n\n  } else {\n    state.block.parse(state.src, state.options, state.env, state.tokens);\n  }\n}\n\n// Inline parser state\n\nfunction StateInline(src, parserInline, options, env, outTokens) {\n  this.src = src;\n  this.env = env;\n  this.options = options;\n  this.parser = parserInline;\n  this.tokens = outTokens;\n  this.pos = 0;\n  this.posMax = this.src.length;\n  this.level = 0;\n  this.pending = '';\n  this.pendingLevel = 0;\n\n  this.cache = [];        // Stores { start: end } pairs. Useful for backtrack\n                          // optimization of pairs parse (emphasis, strikes).\n\n  // Link parser state vars\n\n  this.isInLabel = false; // Set true when seek link label - we should disable\n                          // \"paired\" rules (emphasis, strikes) to not skip\n                          // tailing `]`\n\n  this.linkLevel = 0;     // Increment for each nesting link. Used to prevent\n                          // nesting in definitions\n\n  this.linkContent = '';  // Temporary storage for link url\n\n  this.labelUnmatchedScopes = 0; // Track unpaired `[` for link labels\n                                 // (backtrack optimization)\n}\n\n// Flush pending text\n//\nStateInline.prototype.pushPending = function () {\n  this.tokens.push({\n    type: 'text',\n    content: this.pending,\n    level: this.pendingLevel\n  });\n  this.pending = '';\n};\n\n// Push new token to \"stream\".\n// If pending text exists - flush it as text token\n//\nStateInline.prototype.push = function (token) {\n  if (this.pending) {\n    this.pushPending();\n  }\n\n  this.tokens.push(token);\n  this.pendingLevel = this.level;\n};\n\n// Store value to cache.\n// !!! Implementation has parser-specific optimizations\n// !!! keys MUST be integer, >= 0; values MUST be integer, > 0\n//\nStateInline.prototype.cacheSet = function (key, val) {\n  for (var i = this.cache.length; i <= key; i++) {\n    this.cache.push(0);\n  }\n\n  this.cache[key] = val;\n};\n\n// Get cache value\n//\nStateInline.prototype.cacheGet = function (key) {\n  return key < this.cache.length ? this.cache[key] : 0;\n};\n\n/**\n * Parse link labels\n *\n * This function assumes that first character (`[`) already matches;\n * returns the end of the label.\n *\n * @param  {Object} state\n * @param  {Number} start\n * @api private\n */\n\nfunction parseLinkLabel(state, start) {\n  var level, found, marker,\n      labelEnd = -1,\n      max = state.posMax,\n      oldPos = state.pos,\n      oldFlag = state.isInLabel;\n\n  if (state.isInLabel) { return -1; }\n\n  if (state.labelUnmatchedScopes) {\n    state.labelUnmatchedScopes--;\n    return -1;\n  }\n\n  state.pos = start + 1;\n  state.isInLabel = true;\n  level = 1;\n\n  while (state.pos < max) {\n    marker = state.src.charCodeAt(state.pos);\n    if (marker === 0x5B /* [ */) {\n      level++;\n    } else if (marker === 0x5D /* ] */) {\n      level--;\n      if (level === 0) {\n        found = true;\n        break;\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (found) {\n    labelEnd = state.pos;\n    state.labelUnmatchedScopes = 0;\n  } else {\n    state.labelUnmatchedScopes = level - 1;\n  }\n\n  // restore old state\n  state.pos = oldPos;\n  state.isInLabel = oldFlag;\n\n  return labelEnd;\n}\n\n// Parse abbreviation definitions, i.e. `*[abbr]: description`\n\n\nfunction parseAbbr(str, parserInline, options, env) {\n  var state, labelEnd, pos, max, label, title;\n\n  if (str.charCodeAt(0) !== 0x2A/* * */) { return -1; }\n  if (str.charCodeAt(1) !== 0x5B/* [ */) { return -1; }\n\n  if (str.indexOf(']:') === -1) { return -1; }\n\n  state = new StateInline(str, parserInline, options, env, []);\n  labelEnd = parseLinkLabel(state, 1);\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return -1; }\n\n  max = state.posMax;\n\n  // abbr title is always one line, so looking for ending \"\\n\" here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x0A) { break; }\n  }\n\n  label = str.slice(2, labelEnd);\n  title = str.slice(labelEnd + 2, pos).trim();\n  if (title.length === 0) { return -1; }\n  if (!env.abbreviations) { env.abbreviations = {}; }\n  // prepend ':' to avoid conflict with Object.prototype members\n  if (typeof env.abbreviations[':' + label] === 'undefined') {\n    env.abbreviations[':' + label] = title;\n  }\n\n  return pos;\n}\n\nfunction abbr(state) {\n  var tokens = state.tokens, i, l, content, pos;\n\n  if (state.inlineMode) {\n    return;\n  }\n\n  // Parse inlines\n  for (i = 1, l = tokens.length - 1; i < l; i++) {\n    if (tokens[i - 1].type === 'paragraph_open' &&\n        tokens[i].type === 'inline' &&\n        tokens[i + 1].type === 'paragraph_close') {\n\n      content = tokens[i].content;\n      while (content.length) {\n        pos = parseAbbr(content, state.inline, state.options, state.env);\n        if (pos < 0) { break; }\n        content = content.slice(pos).trim();\n      }\n\n      tokens[i].content = content;\n      if (!content.length) {\n        tokens[i - 1].tight = true;\n        tokens[i + 1].tight = true;\n      }\n    }\n  }\n}\n\nfunction normalizeLink(url) {\n  var normalized = replaceEntities(url);\n  // We shouldn't care about the result of malformed URIs,\n  // and should not throw an exception.\n  try {\n    normalized = decodeURI(normalized);\n  } catch (err) {}\n  return encodeURI(normalized);\n}\n\n/**\n * Parse link destination\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nfunction parseLinkDestination(state, pos) {\n  var code, level, link,\n      start = pos,\n      max = state.posMax;\n\n  if (state.src.charCodeAt(pos) === 0x3C /* < */) {\n    pos++;\n    while (pos < max) {\n      code = state.src.charCodeAt(pos);\n      if (code === 0x0A /* \\n */) { return false; }\n      if (code === 0x3E /* > */) {\n        link = normalizeLink(unescapeMd(state.src.slice(start + 1, pos)));\n        if (!state.parser.validateLink(link)) { return false; }\n        state.pos = pos + 1;\n        state.linkContent = link;\n        return true;\n      }\n      if (code === 0x5C /* \\ */ && pos + 1 < max) {\n        pos += 2;\n        continue;\n      }\n\n      pos++;\n    }\n\n    // no closing '>'\n    return false;\n  }\n\n  // this should be ... } else { ... branch\n\n  level = 0;\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n\n    if (code === 0x20) { break; }\n\n    // ascii control chars\n    if (code < 0x20 || code === 0x7F) { break; }\n\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    if (code === 0x28 /* ( */) {\n      level++;\n      if (level > 1) { break; }\n    }\n\n    if (code === 0x29 /* ) */) {\n      level--;\n      if (level < 0) { break; }\n    }\n\n    pos++;\n  }\n\n  if (start === pos) { return false; }\n\n  link = unescapeMd(state.src.slice(start, pos));\n  if (!state.parser.validateLink(link)) { return false; }\n\n  state.linkContent = link;\n  state.pos = pos;\n  return true;\n}\n\n/**\n * Parse link title\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nfunction parseLinkTitle(state, pos) {\n  var code,\n      start = pos,\n      max = state.posMax,\n      marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x22 /* \" */ && marker !== 0x27 /* ' */ && marker !== 0x28 /* ( */) { return false; }\n\n  pos++;\n\n  // if opening marker is \"(\", switch it to closing marker \")\"\n  if (marker === 0x28) { marker = 0x29; }\n\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n    if (code === marker) {\n      state.pos = pos + 1;\n      state.linkContent = unescapeMd(state.src.slice(start + 1, pos));\n      return true;\n    }\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    pos++;\n  }\n\n  return false;\n}\n\nfunction normalizeReference(str) {\n  // use .toUpperCase() instead of .toLowerCase()\n  // here to avoid a conflict with Object.prototype\n  // members (most notably, `__proto__`)\n  return str.trim().replace(/\\s+/g, ' ').toUpperCase();\n}\n\nfunction parseReference(str, parser, options, env) {\n  var state, labelEnd, pos, max, code, start, href, title, label;\n\n  if (str.charCodeAt(0) !== 0x5B/* [ */) { return -1; }\n\n  if (str.indexOf(']:') === -1) { return -1; }\n\n  state = new StateInline(str, parser, options, env, []);\n  labelEnd = parseLinkLabel(state, 0);\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return -1; }\n\n  max = state.posMax;\n\n  // [label]:   destination   'title'\n  //         ^^^ skip optional whitespace here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    code = state.src.charCodeAt(pos);\n    if (code !== 0x20 && code !== 0x0A) { break; }\n  }\n\n  // [label]:   destination   'title'\n  //            ^^^^^^^^^^^ parse this\n  if (!parseLinkDestination(state, pos)) { return -1; }\n  href = state.linkContent;\n  pos = state.pos;\n\n  // [label]:   destination   'title'\n  //                       ^^^ skipping those spaces\n  start = pos;\n  for (pos = pos + 1; pos < max; pos++) {\n    code = state.src.charCodeAt(pos);\n    if (code !== 0x20 && code !== 0x0A) { break; }\n  }\n\n  // [label]:   destination   'title'\n  //                          ^^^^^^^ parse this\n  if (pos < max && start !== pos && parseLinkTitle(state, pos)) {\n    title = state.linkContent;\n    pos = state.pos;\n  } else {\n    title = '';\n    pos = start;\n  }\n\n  // ensure that the end of the line is empty\n  while (pos < max && state.src.charCodeAt(pos) === 0x20/* space */) { pos++; }\n  if (pos < max && state.src.charCodeAt(pos) !== 0x0A) { return -1; }\n\n  label = normalizeReference(str.slice(1, labelEnd));\n  if (typeof env.references[label] === 'undefined') {\n    env.references[label] = { title: title, href: href };\n  }\n\n  return pos;\n}\n\n\nfunction references(state) {\n  var tokens = state.tokens, i, l, content, pos;\n\n  state.env.references = state.env.references || {};\n\n  if (state.inlineMode) {\n    return;\n  }\n\n  // Scan definitions in paragraph inlines\n  for (i = 1, l = tokens.length - 1; i < l; i++) {\n    if (tokens[i].type === 'inline' &&\n        tokens[i - 1].type === 'paragraph_open' &&\n        tokens[i + 1].type === 'paragraph_close') {\n\n      content = tokens[i].content;\n      while (content.length) {\n        pos = parseReference(content, state.inline, state.options, state.env);\n        if (pos < 0) { break; }\n        content = content.slice(pos).trim();\n      }\n\n      tokens[i].content = content;\n      if (!content.length) {\n        tokens[i - 1].tight = true;\n        tokens[i + 1].tight = true;\n      }\n    }\n  }\n}\n\nfunction inline(state) {\n  var tokens = state.tokens, tok, i, l;\n\n  // Parse inlines\n  for (i = 0, l = tokens.length; i < l; i++) {\n    tok = tokens[i];\n    if (tok.type === 'inline') {\n      state.inline.parse(tok.content, state.options, state.env, tok.children);\n    }\n  }\n}\n\nfunction footnote_block(state) {\n  var i, l, j, t, lastParagraph, list, tokens, current, currentLabel,\n      level = 0,\n      insideRef = false,\n      refTokens = {};\n\n  if (!state.env.footnotes) { return; }\n\n  state.tokens = state.tokens.filter(function(tok) {\n    if (tok.type === 'footnote_reference_open') {\n      insideRef = true;\n      current = [];\n      currentLabel = tok.label;\n      return false;\n    }\n    if (tok.type === 'footnote_reference_close') {\n      insideRef = false;\n      // prepend ':' to avoid conflict with Object.prototype members\n      refTokens[':' + currentLabel] = current;\n      return false;\n    }\n    if (insideRef) { current.push(tok); }\n    return !insideRef;\n  });\n\n  if (!state.env.footnotes.list) { return; }\n  list = state.env.footnotes.list;\n\n  state.tokens.push({\n    type: 'footnote_block_open',\n    level: level++\n  });\n  for (i = 0, l = list.length; i < l; i++) {\n    state.tokens.push({\n      type: 'footnote_open',\n      id: i,\n      level: level++\n    });\n\n    if (list[i].tokens) {\n      tokens = [];\n      tokens.push({\n        type: 'paragraph_open',\n        tight: false,\n        level: level++\n      });\n      tokens.push({\n        type: 'inline',\n        content: '',\n        level: level,\n        children: list[i].tokens\n      });\n      tokens.push({\n        type: 'paragraph_close',\n        tight: false,\n        level: --level\n      });\n    } else if (list[i].label) {\n      tokens = refTokens[':' + list[i].label];\n    }\n\n    state.tokens = state.tokens.concat(tokens);\n    if (state.tokens[state.tokens.length - 1].type === 'paragraph_close') {\n      lastParagraph = state.tokens.pop();\n    } else {\n      lastParagraph = null;\n    }\n\n    t = list[i].count > 0 ? list[i].count : 1;\n    for (j = 0; j < t; j++) {\n      state.tokens.push({\n        type: 'footnote_anchor',\n        id: i,\n        subId: j,\n        level: level\n      });\n    }\n\n    if (lastParagraph) {\n      state.tokens.push(lastParagraph);\n    }\n\n    state.tokens.push({\n      type: 'footnote_close',\n      level: --level\n    });\n  }\n  state.tokens.push({\n    type: 'footnote_block_close',\n    level: --level\n  });\n}\n\n// Enclose abbreviations in <abbr> tags\n//\n\nvar PUNCT_CHARS = ' \\n()[]\\'\".,!?-';\n\n\n// from Google closure library\n// http://closure-library.googlecode.com/git-history/docs/local_closure_goog_string_string.js.source.html#line1021\nfunction regEscape(s) {\n  return s.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1');\n}\n\n\nfunction abbr2(state) {\n  var i, j, l, tokens, token, text, nodes, pos, level, reg, m, regText,\n      blockTokens = state.tokens;\n\n  if (!state.env.abbreviations) { return; }\n  if (!state.env.abbrRegExp) {\n    regText = '(^|[' + PUNCT_CHARS.split('').map(regEscape).join('') + '])'\n            + '(' + Object.keys(state.env.abbreviations).map(function (x) {\n                      return x.substr(1);\n                    }).sort(function (a, b) {\n                      return b.length - a.length;\n                    }).map(regEscape).join('|') + ')'\n            + '($|[' + PUNCT_CHARS.split('').map(regEscape).join('') + '])';\n    state.env.abbrRegExp = new RegExp(regText, 'g');\n  }\n  reg = state.env.abbrRegExp;\n\n  for (j = 0, l = blockTokens.length; j < l; j++) {\n    if (blockTokens[j].type !== 'inline') { continue; }\n    tokens = blockTokens[j].children;\n\n    // We scan from the end, to keep position when new tags added.\n    for (i = tokens.length - 1; i >= 0; i--) {\n      token = tokens[i];\n      if (token.type !== 'text') { continue; }\n\n      pos = 0;\n      text = token.content;\n      reg.lastIndex = 0;\n      level = token.level;\n      nodes = [];\n\n      while ((m = reg.exec(text))) {\n        if (reg.lastIndex > pos) {\n          nodes.push({\n            type: 'text',\n            content: text.slice(pos, m.index + m[1].length),\n            level: level\n          });\n        }\n\n        nodes.push({\n          type: 'abbr_open',\n          title: state.env.abbreviations[':' + m[2]],\n          level: level++\n        });\n        nodes.push({\n          type: 'text',\n          content: m[2],\n          level: level\n        });\n        nodes.push({\n          type: 'abbr_close',\n          level: --level\n        });\n        pos = reg.lastIndex - m[3].length;\n      }\n\n      if (!nodes.length) { continue; }\n\n      if (pos < text.length) {\n        nodes.push({\n          type: 'text',\n          content: text.slice(pos),\n          level: level\n        });\n      }\n\n      // replace current node\n      blockTokens[j].children = tokens = [].concat(tokens.slice(0, i), nodes, tokens.slice(i + 1));\n    }\n  }\n}\n\n// Simple typographical replacements\n//\n// TODO:\n// - fractionals 1/2, 1/4, 3/4 -> ½, ¼, ¾\n// - miltiplication 2 x 4 -> 2 × 4\n\nvar RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\nvar SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\nvar SCOPED_ABBR = {\n  'c': '©',\n  'r': '®',\n  'p': '§',\n  'tm': '™'\n};\n\nfunction replaceScopedAbbr(str) {\n  if (str.indexOf('(') < 0) { return str; }\n\n  return str.replace(SCOPED_ABBR_RE, function(match, name) {\n    return SCOPED_ABBR[name.toLowerCase()];\n  });\n}\n\n\nfunction replace(state) {\n  var i, token, text, inlineTokens, blkIdx;\n\n  if (!state.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    inlineTokens = state.tokens[blkIdx].children;\n\n    for (i = inlineTokens.length - 1; i >= 0; i--) {\n      token = inlineTokens[i];\n      if (token.type === 'text') {\n        text = token.content;\n\n        text = replaceScopedAbbr(text);\n\n        if (RARE_RE.test(text)) {\n          text = text\n            .replace(/\\+-/g, '±')\n            // .., ..., ....... -> …\n            // but ?..... & !..... -> ?.. & !..\n            .replace(/\\.{2,}/g, '…').replace(/([?!])…/g, '$1..')\n            .replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n            // em-dash\n            .replace(/(^|[^-])---([^-]|$)/mg, '$1\\u2014$2')\n            // en-dash\n            .replace(/(^|\\s)--(\\s|$)/mg, '$1\\u2013$2')\n            .replace(/(^|[^-\\s])--([^-\\s]|$)/mg, '$1\\u2013$2');\n        }\n\n        token.content = text;\n      }\n    }\n  }\n}\n\n// Convert straight quotation marks to typographic ones\n//\n\nvar QUOTE_TEST_RE = /['\"]/;\nvar QUOTE_RE = /['\"]/g;\nvar PUNCT_RE = /[-\\s()\\[\\]]/;\nvar APOSTROPHE = '’';\n\n// This function returns true if the character at `pos`\n// could be inside a word.\nfunction isLetter(str, pos) {\n  if (pos < 0 || pos >= str.length) { return false; }\n  return !PUNCT_RE.test(str[pos]);\n}\n\n\nfunction replaceAt(str, index, ch) {\n  return str.substr(0, index) + ch + str.substr(index + 1);\n}\n\n\nfunction smartquotes(state) {\n  /*eslint max-depth:0*/\n  var i, token, text, t, pos, max, thisLevel, lastSpace, nextSpace, item,\n      canOpen, canClose, j, isSingle, blkIdx, tokens,\n      stack;\n\n  if (!state.options.typographer) { return; }\n\n  stack = [];\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    tokens = state.tokens[blkIdx].children;\n    stack.length = 0;\n\n    for (i = 0; i < tokens.length; i++) {\n      token = tokens[i];\n\n      if (token.type !== 'text' || QUOTE_TEST_RE.test(token.text)) { continue; }\n\n      thisLevel = tokens[i].level;\n\n      for (j = stack.length - 1; j >= 0; j--) {\n        if (stack[j].level <= thisLevel) { break; }\n      }\n      stack.length = j + 1;\n\n      text = token.content;\n      pos = 0;\n      max = text.length;\n\n      /*eslint no-labels:0,block-scoped-var:0*/\n      OUTER:\n      while (pos < max) {\n        QUOTE_RE.lastIndex = pos;\n        t = QUOTE_RE.exec(text);\n        if (!t) { break; }\n\n        lastSpace = !isLetter(text, t.index - 1);\n        pos = t.index + 1;\n        isSingle = (t[0] === \"'\");\n        nextSpace = !isLetter(text, pos);\n\n        if (!nextSpace && !lastSpace) {\n          // middle of word\n          if (isSingle) {\n            token.content = replaceAt(token.content, t.index, APOSTROPHE);\n          }\n          continue;\n        }\n\n        canOpen = !nextSpace;\n        canClose = !lastSpace;\n\n        if (canClose) {\n          // this could be a closing quote, rewind the stack to get a match\n          for (j = stack.length - 1; j >= 0; j--) {\n            item = stack[j];\n            if (stack[j].level < thisLevel) { break; }\n            if (item.single === isSingle && stack[j].level === thisLevel) {\n              item = stack[j];\n              if (isSingle) {\n                tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, state.options.quotes[2]);\n                token.content = replaceAt(token.content, t.index, state.options.quotes[3]);\n              } else {\n                tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, state.options.quotes[0]);\n                token.content = replaceAt(token.content, t.index, state.options.quotes[1]);\n              }\n              stack.length = j;\n              continue OUTER;\n            }\n          }\n        }\n\n        if (canOpen) {\n          stack.push({\n            token: i,\n            pos: t.index,\n            single: isSingle,\n            level: thisLevel\n          });\n        } else if (canClose && isSingle) {\n          token.content = replaceAt(token.content, t.index, APOSTROPHE);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Core parser `rules`\n */\n\nvar _rules = [\n  [ 'block',          block          ],\n  [ 'abbr',           abbr           ],\n  [ 'references',     references     ],\n  [ 'inline',         inline         ],\n  [ 'footnote_tail',  footnote_block  ],\n  [ 'abbr2',          abbr2          ],\n  [ 'replacements',   replace   ],\n  [ 'smartquotes',    smartquotes    ],\n];\n\n/**\n * Class for top level (`core`) parser rules\n *\n * @api private\n */\n\nfunction Core() {\n  this.options = {};\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n}\n\n/**\n * Process rules with the given `state`\n *\n * @param  {Object} `state`\n * @api private\n */\n\nCore.prototype.process = function (state) {\n  var i, l, rules;\n  rules = this.ruler.getRules('');\n  for (i = 0, l = rules.length; i < l; i++) {\n    rules[i](state);\n  }\n};\n\n// Parser state class\n\nfunction StateBlock(src, parser, options, env, tokens) {\n  var ch, s, start, pos, len, indent, indent_found;\n\n  this.src = src;\n\n  // Shortcuts to simplify nested calls\n  this.parser = parser;\n\n  this.options = options;\n\n  this.env = env;\n\n  //\n  // Internal state vartiables\n  //\n\n  this.tokens = tokens;\n\n  this.bMarks = [];  // line begin offsets for fast jumps\n  this.eMarks = [];  // line end offsets for fast jumps\n  this.tShift = [];  // indent for each line\n\n  // block parser variables\n  this.blkIndent  = 0; // required block content indent\n                       // (for example, if we are in list)\n  this.line       = 0; // line index in src\n  this.lineMax    = 0; // lines count\n  this.tight      = false;  // loose/tight mode for lists\n  this.parentType = 'root'; // if `list`, block parser stops on two newlines\n  this.ddIndent   = -1; // indent of the current dd block (-1 if there isn't any)\n\n  this.level = 0;\n\n  // renderer\n  this.result = '';\n\n  // Create caches\n  // Generate markers.\n  s = this.src;\n  indent = 0;\n  indent_found = false;\n\n  for (start = pos = indent = 0, len = s.length; pos < len; pos++) {\n    ch = s.charCodeAt(pos);\n\n    if (!indent_found) {\n      if (ch === 0x20/* space */) {\n        indent++;\n        continue;\n      } else {\n        indent_found = true;\n      }\n    }\n\n    if (ch === 0x0A || pos === len - 1) {\n      if (ch !== 0x0A) { pos++; }\n      this.bMarks.push(start);\n      this.eMarks.push(pos);\n      this.tShift.push(indent);\n\n      indent_found = false;\n      indent = 0;\n      start = pos + 1;\n    }\n  }\n\n  // Push fake entry to simplify cache bounds checks\n  this.bMarks.push(s.length);\n  this.eMarks.push(s.length);\n  this.tShift.push(0);\n\n  this.lineMax = this.bMarks.length - 1; // don't count last fake line\n}\n\nStateBlock.prototype.isEmpty = function isEmpty(line) {\n  return this.bMarks[line] + this.tShift[line] >= this.eMarks[line];\n};\n\nStateBlock.prototype.skipEmptyLines = function skipEmptyLines(from) {\n  for (var max = this.lineMax; from < max; from++) {\n    if (this.bMarks[from] + this.tShift[from] < this.eMarks[from]) {\n      break;\n    }\n  }\n  return from;\n};\n\n// Skip spaces from given position.\nStateBlock.prototype.skipSpaces = function skipSpaces(pos) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== 0x20/* space */) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes from given position\nStateBlock.prototype.skipChars = function skipChars(pos, code) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== code) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes reverse from given position - 1\nStateBlock.prototype.skipCharsBack = function skipCharsBack(pos, code, min) {\n  if (pos <= min) { return pos; }\n\n  while (pos > min) {\n    if (code !== this.src.charCodeAt(--pos)) { return pos + 1; }\n  }\n  return pos;\n};\n\n// cut lines range from source.\nStateBlock.prototype.getLines = function getLines(begin, end, indent, keepLastLF) {\n  var i, first, last, queue, shift,\n      line = begin;\n\n  if (begin >= end) {\n    return '';\n  }\n\n  // Opt: don't use push queue for single line;\n  if (line + 1 === end) {\n    first = this.bMarks[line] + Math.min(this.tShift[line], indent);\n    last = keepLastLF ? this.eMarks[line] + 1 : this.eMarks[line];\n    return this.src.slice(first, last);\n  }\n\n  queue = new Array(end - begin);\n\n  for (i = 0; line < end; line++, i++) {\n    shift = this.tShift[line];\n    if (shift > indent) { shift = indent; }\n    if (shift < 0) { shift = 0; }\n\n    first = this.bMarks[line] + shift;\n\n    if (line + 1 < end || keepLastLF) {\n      // No need for bounds check because we have fake entry on tail.\n      last = this.eMarks[line] + 1;\n    } else {\n      last = this.eMarks[line];\n    }\n\n    queue[i] = this.src.slice(first, last);\n  }\n\n  return queue.join('');\n};\n\n// Code block (4 spaces padded)\n\nfunction code(state, startLine, endLine/*, silent*/) {\n  var nextLine, last;\n\n  if (state.tShift[startLine] - state.blkIndent < 4) { return false; }\n\n  last = nextLine = startLine + 1;\n\n  while (nextLine < endLine) {\n    if (state.isEmpty(nextLine)) {\n      nextLine++;\n      continue;\n    }\n    if (state.tShift[nextLine] - state.blkIndent >= 4) {\n      nextLine++;\n      last = nextLine;\n      continue;\n    }\n    break;\n  }\n\n  state.line = nextLine;\n  state.tokens.push({\n    type: 'code',\n    content: state.getLines(startLine, last, 4 + state.blkIndent, true),\n    block: true,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// fences (``` lang, ~~~ lang)\n\nfunction fences(state, startLine, endLine, silent) {\n  var marker, len, params, nextLine, mem,\n      haveEndMarker = false,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos + 3 > max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x7E/* ~ */ && marker !== 0x60 /* ` */) {\n    return false;\n  }\n\n  // scan marker length\n  mem = pos;\n  pos = state.skipChars(pos, marker);\n\n  len = pos - mem;\n\n  if (len < 3) { return false; }\n\n  params = state.src.slice(pos, max).trim();\n\n  if (params.indexOf('`') >= 0) { return false; }\n\n  // Since start is found, we can report success here in validation mode\n  if (silent) { return true; }\n\n  // search end of block\n  nextLine = startLine;\n\n  for (;;) {\n    nextLine++;\n    if (nextLine >= endLine) {\n      // unclosed block should be autoclosed by end of document.\n      // also block seems to be autoclosed by end of parent\n      break;\n    }\n\n    pos = mem = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos < max && state.tShift[nextLine] < state.blkIndent) {\n      // non-empty line with negative indent should stop the list:\n      // - ```\n      //  test\n      break;\n    }\n\n    if (state.src.charCodeAt(pos) !== marker) { continue; }\n\n    if (state.tShift[nextLine] - state.blkIndent >= 4) {\n      // closing fence should be indented less than 4 spaces\n      continue;\n    }\n\n    pos = state.skipChars(pos, marker);\n\n    // closing code fence must be at least as long as the opening one\n    if (pos - mem < len) { continue; }\n\n    // make sure tail has spaces only\n    pos = state.skipSpaces(pos);\n\n    if (pos < max) { continue; }\n\n    haveEndMarker = true;\n    // found!\n    break;\n  }\n\n  // If a fence has heading spaces, they should be removed from its inner block\n  len = state.tShift[startLine];\n\n  state.line = nextLine + (haveEndMarker ? 1 : 0);\n  state.tokens.push({\n    type: 'fence',\n    params: params,\n    content: state.getLines(startLine + 1, nextLine, len, true),\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// Block quotes\n\nfunction blockquote(state, startLine, endLine, silent) {\n  var nextLine, lastLineEmpty, oldTShift, oldBMarks, oldIndent, oldParentType, lines,\n      terminatorRules,\n      i, l, terminate,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos > max) { return false; }\n\n  // check the block quote marker\n  if (state.src.charCodeAt(pos++) !== 0x3E/* > */) { return false; }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // we know that it's going to be a valid blockquote,\n  // so no point trying to find the end of it in silent mode\n  if (silent) { return true; }\n\n  // skip one optional space after '>'\n  if (state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n  oldIndent = state.blkIndent;\n  state.blkIndent = 0;\n\n  oldBMarks = [ state.bMarks[startLine] ];\n  state.bMarks[startLine] = pos;\n\n  // check if we have an empty blockquote\n  pos = pos < max ? state.skipSpaces(pos) : pos;\n  lastLineEmpty = pos >= max;\n\n  oldTShift = [ state.tShift[startLine] ];\n  state.tShift[startLine] = pos - state.bMarks[startLine];\n\n  terminatorRules = state.parser.ruler.getRules('blockquote');\n\n  // Search the end of the block\n  //\n  // Block ends with either:\n  //  1. an empty line outside:\n  //     ```\n  //     > test\n  //\n  //     ```\n  //  2. an empty line inside:\n  //     ```\n  //     >\n  //     test\n  //     ```\n  //  3. another tag\n  //     ```\n  //     > test\n  //      - - -\n  //     ```\n  for (nextLine = startLine + 1; nextLine < endLine; nextLine++) {\n    pos = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos >= max) {\n      // Case 1: line is not inside the blockquote, and this line is empty.\n      break;\n    }\n\n    if (state.src.charCodeAt(pos++) === 0x3E/* > */) {\n      // This line is inside the blockquote.\n\n      // skip one optional space after '>'\n      if (state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n      oldBMarks.push(state.bMarks[nextLine]);\n      state.bMarks[nextLine] = pos;\n\n      pos = pos < max ? state.skipSpaces(pos) : pos;\n      lastLineEmpty = pos >= max;\n\n      oldTShift.push(state.tShift[nextLine]);\n      state.tShift[nextLine] = pos - state.bMarks[nextLine];\n      continue;\n    }\n\n    // Case 2: line is not inside the blockquote, and the last line was empty.\n    if (lastLineEmpty) { break; }\n\n    // Case 3: another tag found.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    oldBMarks.push(state.bMarks[nextLine]);\n    oldTShift.push(state.tShift[nextLine]);\n\n    // A negative number means that this is a paragraph continuation;\n    //\n    // Any negative number will do the job here, but it's better for it\n    // to be large enough to make any bugs obvious.\n    state.tShift[nextLine] = -1337;\n  }\n\n  oldParentType = state.parentType;\n  state.parentType = 'blockquote';\n  state.tokens.push({\n    type: 'blockquote_open',\n    lines: lines = [ startLine, 0 ],\n    level: state.level++\n  });\n  state.parser.tokenize(state, startLine, nextLine);\n  state.tokens.push({\n    type: 'blockquote_close',\n    level: --state.level\n  });\n  state.parentType = oldParentType;\n  lines[1] = state.line;\n\n  // Restore original tShift; this might not be necessary since the parser\n  // has already been here, but just to make sure we can do that.\n  for (i = 0; i < oldTShift.length; i++) {\n    state.bMarks[i + startLine] = oldBMarks[i];\n    state.tShift[i + startLine] = oldTShift[i];\n  }\n  state.blkIndent = oldIndent;\n\n  return true;\n}\n\n// Horizontal rule\n\nfunction hr(state, startLine, endLine, silent) {\n  var marker, cnt, ch,\n      pos = state.bMarks[startLine],\n      max = state.eMarks[startLine];\n\n  pos += state.tShift[startLine];\n\n  if (pos > max) { return false; }\n\n  marker = state.src.charCodeAt(pos++);\n\n  // Check hr marker\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x5F/* _ */) {\n    return false;\n  }\n\n  // markers can be mixed with spaces, but there should be at least 3 one\n\n  cnt = 1;\n  while (pos < max) {\n    ch = state.src.charCodeAt(pos++);\n    if (ch !== marker && ch !== 0x20/* space */) { return false; }\n    if (ch === marker) { cnt++; }\n  }\n\n  if (cnt < 3) { return false; }\n\n  if (silent) { return true; }\n\n  state.line = startLine + 1;\n  state.tokens.push({\n    type: 'hr',\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// Lists\n\n// Search `[-+*][\\n ]`, returns next pos arter marker on success\n// or -1 on fail.\nfunction skipBulletListMarker(state, startLine) {\n  var marker, pos, max;\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n  max = state.eMarks[startLine];\n\n  if (pos >= max) { return -1; }\n\n  marker = state.src.charCodeAt(pos++);\n  // Check bullet\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x2B/* + */) {\n    return -1;\n  }\n\n  if (pos < max && state.src.charCodeAt(pos) !== 0x20) {\n    // \" 1.test \" - is not a list item\n    return -1;\n  }\n\n  return pos;\n}\n\n// Search `\\d+[.)][\\n ]`, returns next pos arter marker on success\n// or -1 on fail.\nfunction skipOrderedListMarker(state, startLine) {\n  var ch,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos + 1 >= max) { return -1; }\n\n  ch = state.src.charCodeAt(pos++);\n\n  if (ch < 0x30/* 0 */ || ch > 0x39/* 9 */) { return -1; }\n\n  for (;;) {\n    // EOL -> fail\n    if (pos >= max) { return -1; }\n\n    ch = state.src.charCodeAt(pos++);\n\n    if (ch >= 0x30/* 0 */ && ch <= 0x39/* 9 */) {\n      continue;\n    }\n\n    // found valid marker\n    if (ch === 0x29/* ) */ || ch === 0x2e/* . */) {\n      break;\n    }\n\n    return -1;\n  }\n\n\n  if (pos < max && state.src.charCodeAt(pos) !== 0x20/* space */) {\n    // \" 1.test \" - is not a list item\n    return -1;\n  }\n  return pos;\n}\n\nfunction markTightParagraphs(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].tight = true;\n      state.tokens[i].tight = true;\n      i += 2;\n    }\n  }\n}\n\n\nfunction list(state, startLine, endLine, silent) {\n  var nextLine,\n      indent,\n      oldTShift,\n      oldIndent,\n      oldTight,\n      oldParentType,\n      start,\n      posAfterMarker,\n      max,\n      indentAfterMarker,\n      markerValue,\n      markerCharCode,\n      isOrdered,\n      contentStart,\n      listTokIdx,\n      prevEmptyEnd,\n      listLines,\n      itemLines,\n      tight = true,\n      terminatorRules,\n      i, l, terminate;\n\n  // Detect list type and position after marker\n  if ((posAfterMarker = skipOrderedListMarker(state, startLine)) >= 0) {\n    isOrdered = true;\n  } else if ((posAfterMarker = skipBulletListMarker(state, startLine)) >= 0) {\n    isOrdered = false;\n  } else {\n    return false;\n  }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // We should terminate list on style change. Remember first one to compare.\n  markerCharCode = state.src.charCodeAt(posAfterMarker - 1);\n\n  // For validation mode we can terminate immediately\n  if (silent) { return true; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  if (isOrdered) {\n    start = state.bMarks[startLine] + state.tShift[startLine];\n    markerValue = Number(state.src.substr(start, posAfterMarker - start - 1));\n\n    state.tokens.push({\n      type: 'ordered_list_open',\n      order: markerValue,\n      lines: listLines = [ startLine, 0 ],\n      level: state.level++\n    });\n\n  } else {\n    state.tokens.push({\n      type: 'bullet_list_open',\n      lines: listLines = [ startLine, 0 ],\n      level: state.level++\n    });\n  }\n\n  //\n  // Iterate list items\n  //\n\n  nextLine = startLine;\n  prevEmptyEnd = false;\n  terminatorRules = state.parser.ruler.getRules('list');\n\n  while (nextLine < endLine) {\n    contentStart = state.skipSpaces(posAfterMarker);\n    max = state.eMarks[nextLine];\n\n    if (contentStart >= max) {\n      // trimming space in \"-    \\n  3\" case, indent is 1 here\n      indentAfterMarker = 1;\n    } else {\n      indentAfterMarker = contentStart - posAfterMarker;\n    }\n\n    // If we have more than 4 spaces, the indent is 1\n    // (the rest is just indented code block)\n    if (indentAfterMarker > 4) { indentAfterMarker = 1; }\n\n    // If indent is less than 1, assume that it's one, example:\n    //  \"-\\n  test\"\n    if (indentAfterMarker < 1) { indentAfterMarker = 1; }\n\n    // \"  -  test\"\n    //  ^^^^^ - calculating total length of this thing\n    indent = (posAfterMarker - state.bMarks[nextLine]) + indentAfterMarker;\n\n    // Run subparser & write tokens\n    state.tokens.push({\n      type: 'list_item_open',\n      lines: itemLines = [ startLine, 0 ],\n      level: state.level++\n    });\n\n    oldIndent = state.blkIndent;\n    oldTight = state.tight;\n    oldTShift = state.tShift[startLine];\n    oldParentType = state.parentType;\n    state.tShift[startLine] = contentStart - state.bMarks[startLine];\n    state.blkIndent = indent;\n    state.tight = true;\n    state.parentType = 'list';\n\n    state.parser.tokenize(state, startLine, endLine, true);\n\n    // If any of list item is tight, mark list as tight\n    if (!state.tight || prevEmptyEnd) {\n      tight = false;\n    }\n    // Item become loose if finish with empty line,\n    // but we should filter last element, because it means list finish\n    prevEmptyEnd = (state.line - startLine) > 1 && state.isEmpty(state.line - 1);\n\n    state.blkIndent = oldIndent;\n    state.tShift[startLine] = oldTShift;\n    state.tight = oldTight;\n    state.parentType = oldParentType;\n\n    state.tokens.push({\n      type: 'list_item_close',\n      level: --state.level\n    });\n\n    nextLine = startLine = state.line;\n    itemLines[1] = nextLine;\n    contentStart = state.bMarks[startLine];\n\n    if (nextLine >= endLine) { break; }\n\n    if (state.isEmpty(nextLine)) {\n      break;\n    }\n\n    //\n    // Try to check if list is terminated or continued.\n    //\n    if (state.tShift[nextLine] < state.blkIndent) { break; }\n\n    // fail if terminating block found\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    // fail if list has another type\n    if (isOrdered) {\n      posAfterMarker = skipOrderedListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    } else {\n      posAfterMarker = skipBulletListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    }\n\n    if (markerCharCode !== state.src.charCodeAt(posAfterMarker - 1)) { break; }\n  }\n\n  // Finilize list\n  state.tokens.push({\n    type: isOrdered ? 'ordered_list_close' : 'bullet_list_close',\n    level: --state.level\n  });\n  listLines[1] = nextLine;\n\n  state.line = nextLine;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs(state, listTokIdx);\n  }\n\n  return true;\n}\n\n// Process footnote reference list\n\nfunction footnote(state, startLine, endLine, silent) {\n  var oldBMark, oldTShift, oldParentType, pos, label,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // line should be at least 5 chars - \"[^x]:\"\n  if (start + 4 > max) { return false; }\n\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A /* : */) { return false; }\n  if (silent) { return true; }\n  pos++;\n\n  if (!state.env.footnotes) { state.env.footnotes = {}; }\n  if (!state.env.footnotes.refs) { state.env.footnotes.refs = {}; }\n  label = state.src.slice(start + 2, pos - 2);\n  state.env.footnotes.refs[':' + label] = -1;\n\n  state.tokens.push({\n    type: 'footnote_reference_open',\n    label: label,\n    level: state.level++\n  });\n\n  oldBMark = state.bMarks[startLine];\n  oldTShift = state.tShift[startLine];\n  oldParentType = state.parentType;\n  state.tShift[startLine] = state.skipSpaces(pos) - pos;\n  state.bMarks[startLine] = pos;\n  state.blkIndent += 4;\n  state.parentType = 'footnote';\n\n  if (state.tShift[startLine] < state.blkIndent) {\n    state.tShift[startLine] += state.blkIndent;\n    state.bMarks[startLine] -= state.blkIndent;\n  }\n\n  state.parser.tokenize(state, startLine, endLine, true);\n\n  state.parentType = oldParentType;\n  state.blkIndent -= 4;\n  state.tShift[startLine] = oldTShift;\n  state.bMarks[startLine] = oldBMark;\n\n  state.tokens.push({\n    type: 'footnote_reference_close',\n    level: --state.level\n  });\n\n  return true;\n}\n\n// heading (#, ##, ...)\n\nfunction heading(state, startLine, endLine, silent) {\n  var ch, level, tmp,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos >= max) { return false; }\n\n  ch  = state.src.charCodeAt(pos);\n\n  if (ch !== 0x23/* # */ || pos >= max) { return false; }\n\n  // count heading level\n  level = 1;\n  ch = state.src.charCodeAt(++pos);\n  while (ch === 0x23/* # */ && pos < max && level <= 6) {\n    level++;\n    ch = state.src.charCodeAt(++pos);\n  }\n\n  if (level > 6 || (pos < max && ch !== 0x20/* space */)) { return false; }\n\n  if (silent) { return true; }\n\n  // Let's cut tails like '    ###  ' from the end of string\n\n  max = state.skipCharsBack(max, 0x20, pos); // space\n  tmp = state.skipCharsBack(max, 0x23, pos); // #\n  if (tmp > pos && state.src.charCodeAt(tmp - 1) === 0x20/* space */) {\n    max = tmp;\n  }\n\n  state.line = startLine + 1;\n\n  state.tokens.push({ type: 'heading_open',\n    hLevel: level,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  // only if header is not empty\n  if (pos < max) {\n    state.tokens.push({\n      type: 'inline',\n      content: state.src.slice(pos, max).trim(),\n      level: state.level + 1,\n      lines: [ startLine, state.line ],\n      children: []\n    });\n  }\n  state.tokens.push({ type: 'heading_close', hLevel: level, level: state.level });\n\n  return true;\n}\n\n// lheading (---, ===)\n\nfunction lheading(state, startLine, endLine/*, silent*/) {\n  var marker, pos, max,\n      next = startLine + 1;\n\n  if (next >= endLine) { return false; }\n  if (state.tShift[next] < state.blkIndent) { return false; }\n\n  // Scan next line\n\n  if (state.tShift[next] - state.blkIndent > 3) { return false; }\n\n  pos = state.bMarks[next] + state.tShift[next];\n  max = state.eMarks[next];\n\n  if (pos >= max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x2D/* - */ && marker !== 0x3D/* = */) { return false; }\n\n  pos = state.skipChars(pos, marker);\n\n  pos = state.skipSpaces(pos);\n\n  if (pos < max) { return false; }\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n\n  state.line = next + 1;\n  state.tokens.push({\n    type: 'heading_open',\n    hLevel: marker === 0x3D/* = */ ? 1 : 2,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n  state.tokens.push({\n    type: 'inline',\n    content: state.src.slice(pos, state.eMarks[startLine]).trim(),\n    level: state.level + 1,\n    lines: [ startLine, state.line - 1 ],\n    children: []\n  });\n  state.tokens.push({\n    type: 'heading_close',\n    hLevel: marker === 0x3D/* = */ ? 1 : 2,\n    level: state.level\n  });\n\n  return true;\n}\n\n// List of valid html blocks names, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#html-blocks\n\nvar html_blocks = {};\n\n[\n  'article',\n  'aside',\n  'button',\n  'blockquote',\n  'body',\n  'canvas',\n  'caption',\n  'col',\n  'colgroup',\n  'dd',\n  'div',\n  'dl',\n  'dt',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'header',\n  'hgroup',\n  'hr',\n  'iframe',\n  'li',\n  'map',\n  'object',\n  'ol',\n  'output',\n  'p',\n  'pre',\n  'progress',\n  'script',\n  'section',\n  'style',\n  'table',\n  'tbody',\n  'td',\n  'textarea',\n  'tfoot',\n  'th',\n  'tr',\n  'thead',\n  'ul',\n  'video'\n].forEach(function (name) { html_blocks[name] = true; });\n\n// HTML block\n\n\nvar HTML_TAG_OPEN_RE = /^<([a-zA-Z]{1,15})[\\s\\/>]/;\nvar HTML_TAG_CLOSE_RE = /^<\\/([a-zA-Z]{1,15})[\\s>]/;\n\nfunction isLetter$1(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\nfunction htmlblock(state, startLine, endLine, silent) {\n  var ch, match, nextLine,\n      pos = state.bMarks[startLine],\n      max = state.eMarks[startLine],\n      shift = state.tShift[startLine];\n\n  pos += shift;\n\n  if (!state.options.html) { return false; }\n\n  if (shift > 3 || pos + 2 >= max) { return false; }\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  ch = state.src.charCodeAt(pos + 1);\n\n  if (ch === 0x21/* ! */ || ch === 0x3F/* ? */) {\n    // Directive start / comment start / processing instruction start\n    if (silent) { return true; }\n\n  } else if (ch === 0x2F/* / */ || isLetter$1(ch)) {\n\n    // Probably start or end of tag\n    if (ch === 0x2F/* \\ */) {\n      // closing tag\n      match = state.src.slice(pos, max).match(HTML_TAG_CLOSE_RE);\n      if (!match) { return false; }\n    } else {\n      // opening tag\n      match = state.src.slice(pos, max).match(HTML_TAG_OPEN_RE);\n      if (!match) { return false; }\n    }\n    // Make sure tag name is valid\n    if (html_blocks[match[1].toLowerCase()] !== true) { return false; }\n    if (silent) { return true; }\n\n  } else {\n    return false;\n  }\n\n  // If we are here - we detected HTML block.\n  // Let's roll down till empty line (block end).\n  nextLine = startLine + 1;\n  while (nextLine < state.lineMax && !state.isEmpty(nextLine)) {\n    nextLine++;\n  }\n\n  state.line = nextLine;\n  state.tokens.push({\n    type: 'htmlblock',\n    level: state.level,\n    lines: [ startLine, state.line ],\n    content: state.getLines(startLine, nextLine, 0, true)\n  });\n\n  return true;\n}\n\n// GFM table, non-standard\n\nfunction getLine(state, line) {\n  var pos = state.bMarks[line] + state.blkIndent,\n      max = state.eMarks[line];\n\n  return state.src.substr(pos, max - pos);\n}\n\nfunction table(state, startLine, endLine, silent) {\n  var ch, lineText, pos, i, nextLine, rows, cell,\n      aligns, t, tableLines, tbodyLines;\n\n  // should have at least three lines\n  if (startLine + 2 > endLine) { return false; }\n\n  nextLine = startLine + 1;\n\n  if (state.tShift[nextLine] < state.blkIndent) { return false; }\n\n  // first character of the second line should be '|' or '-'\n\n  pos = state.bMarks[nextLine] + state.tShift[nextLine];\n  if (pos >= state.eMarks[nextLine]) { return false; }\n\n  ch = state.src.charCodeAt(pos);\n  if (ch !== 0x7C/* | */ && ch !== 0x2D/* - */ && ch !== 0x3A/* : */) { return false; }\n\n  lineText = getLine(state, startLine + 1);\n  if (!/^[-:| ]+$/.test(lineText)) { return false; }\n\n  rows = lineText.split('|');\n  if (rows <= 2) { return false; }\n  aligns = [];\n  for (i = 0; i < rows.length; i++) {\n    t = rows[i].trim();\n    if (!t) {\n      // allow empty columns before and after table, but not in between columns;\n      // e.g. allow ` |---| `, disallow ` ---||--- `\n      if (i === 0 || i === rows.length - 1) {\n        continue;\n      } else {\n        return false;\n      }\n    }\n\n    if (!/^:?-+:?$/.test(t)) { return false; }\n    if (t.charCodeAt(t.length - 1) === 0x3A/* : */) {\n      aligns.push(t.charCodeAt(0) === 0x3A/* : */ ? 'center' : 'right');\n    } else if (t.charCodeAt(0) === 0x3A/* : */) {\n      aligns.push('left');\n    } else {\n      aligns.push('');\n    }\n  }\n\n  lineText = getLine(state, startLine).trim();\n  if (lineText.indexOf('|') === -1) { return false; }\n  rows = lineText.replace(/^\\||\\|$/g, '').split('|');\n  if (aligns.length !== rows.length) { return false; }\n  if (silent) { return true; }\n\n  state.tokens.push({\n    type: 'table_open',\n    lines: tableLines = [ startLine, 0 ],\n    level: state.level++\n  });\n  state.tokens.push({\n    type: 'thead_open',\n    lines: [ startLine, startLine + 1 ],\n    level: state.level++\n  });\n\n  state.tokens.push({\n    type: 'tr_open',\n    lines: [ startLine, startLine + 1 ],\n    level: state.level++\n  });\n  for (i = 0; i < rows.length; i++) {\n    state.tokens.push({\n      type: 'th_open',\n      align: aligns[i],\n      lines: [ startLine, startLine + 1 ],\n      level: state.level++\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: rows[i].trim(),\n      lines: [ startLine, startLine + 1 ],\n      level: state.level,\n      children: []\n    });\n    state.tokens.push({ type: 'th_close', level: --state.level });\n  }\n  state.tokens.push({ type: 'tr_close', level: --state.level });\n  state.tokens.push({ type: 'thead_close', level: --state.level });\n\n  state.tokens.push({\n    type: 'tbody_open',\n    lines: tbodyLines = [ startLine + 2, 0 ],\n    level: state.level++\n  });\n\n  for (nextLine = startLine + 2; nextLine < endLine; nextLine++) {\n    if (state.tShift[nextLine] < state.blkIndent) { break; }\n\n    lineText = getLine(state, nextLine).trim();\n    if (lineText.indexOf('|') === -1) { break; }\n    rows = lineText.replace(/^\\||\\|$/g, '').split('|');\n\n    state.tokens.push({ type: 'tr_open', level: state.level++ });\n    for (i = 0; i < rows.length; i++) {\n      state.tokens.push({ type: 'td_open', align: aligns[i], level: state.level++ });\n      // 0x7c === '|'\n      cell = rows[i].substring(\n          rows[i].charCodeAt(0) === 0x7c ? 1 : 0,\n          rows[i].charCodeAt(rows[i].length - 1) === 0x7c ? rows[i].length - 1 : rows[i].length\n      ).trim();\n      state.tokens.push({\n        type: 'inline',\n        content: cell,\n        level: state.level,\n        children: []\n      });\n      state.tokens.push({ type: 'td_close', level: --state.level });\n    }\n    state.tokens.push({ type: 'tr_close', level: --state.level });\n  }\n  state.tokens.push({ type: 'tbody_close', level: --state.level });\n  state.tokens.push({ type: 'table_close', level: --state.level });\n\n  tableLines[1] = tbodyLines[1] = nextLine;\n  state.line = nextLine;\n  return true;\n}\n\n// Definition lists\n\n// Search `[:~][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipMarker(state, line) {\n  var pos, marker,\n      start = state.bMarks[line] + state.tShift[line],\n      max = state.eMarks[line];\n\n  if (start >= max) { return -1; }\n\n  // Check bullet\n  marker = state.src.charCodeAt(start++);\n  if (marker !== 0x7E/* ~ */ && marker !== 0x3A/* : */) { return -1; }\n\n  pos = state.skipSpaces(start);\n\n  // require space after \":\"\n  if (start === pos) { return -1; }\n\n  // no empty definitions, e.g. \"  : \"\n  if (pos >= max) { return -1; }\n\n  return pos;\n}\n\nfunction markTightParagraphs$1(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].tight = true;\n      state.tokens[i].tight = true;\n      i += 2;\n    }\n  }\n}\n\nfunction deflist(state, startLine, endLine, silent) {\n  var contentStart,\n      ddLine,\n      dtLine,\n      itemLines,\n      listLines,\n      listTokIdx,\n      nextLine,\n      oldIndent,\n      oldDDIndent,\n      oldParentType,\n      oldTShift,\n      oldTight,\n      prevEmptyEnd,\n      tight;\n\n  if (silent) {\n    // quirk: validation mode validates a dd block only, not a whole deflist\n    if (state.ddIndent < 0) { return false; }\n    return skipMarker(state, startLine) >= 0;\n  }\n\n  nextLine = startLine + 1;\n  if (state.isEmpty(nextLine)) {\n    if (++nextLine > endLine) { return false; }\n  }\n\n  if (state.tShift[nextLine] < state.blkIndent) { return false; }\n  contentStart = skipMarker(state, nextLine);\n  if (contentStart < 0) { return false; }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  state.tokens.push({\n    type: 'dl_open',\n    lines: listLines = [ startLine, 0 ],\n    level: state.level++\n  });\n\n  //\n  // Iterate list items\n  //\n\n  dtLine = startLine;\n  ddLine = nextLine;\n\n  // One definition list can contain multiple DTs,\n  // and one DT can be followed by multiple DDs.\n  //\n  // Thus, there is two loops here, and label is\n  // needed to break out of the second one\n  //\n  /*eslint no-labels:0,block-scoped-var:0*/\n  OUTER:\n  for (;;) {\n    tight = true;\n    prevEmptyEnd = false;\n\n    state.tokens.push({\n      type: 'dt_open',\n      lines: [ dtLine, dtLine ],\n      level: state.level++\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: state.getLines(dtLine, dtLine + 1, state.blkIndent, false).trim(),\n      level: state.level + 1,\n      lines: [ dtLine, dtLine ],\n      children: []\n    });\n    state.tokens.push({\n      type: 'dt_close',\n      level: --state.level\n    });\n\n    for (;;) {\n      state.tokens.push({\n        type: 'dd_open',\n        lines: itemLines = [ nextLine, 0 ],\n        level: state.level++\n      });\n\n      oldTight = state.tight;\n      oldDDIndent = state.ddIndent;\n      oldIndent = state.blkIndent;\n      oldTShift = state.tShift[ddLine];\n      oldParentType = state.parentType;\n      state.blkIndent = state.ddIndent = state.tShift[ddLine] + 2;\n      state.tShift[ddLine] = contentStart - state.bMarks[ddLine];\n      state.tight = true;\n      state.parentType = 'deflist';\n\n      state.parser.tokenize(state, ddLine, endLine, true);\n\n      // If any of list item is tight, mark list as tight\n      if (!state.tight || prevEmptyEnd) {\n        tight = false;\n      }\n      // Item become loose if finish with empty line,\n      // but we should filter last element, because it means list finish\n      prevEmptyEnd = (state.line - ddLine) > 1 && state.isEmpty(state.line - 1);\n\n      state.tShift[ddLine] = oldTShift;\n      state.tight = oldTight;\n      state.parentType = oldParentType;\n      state.blkIndent = oldIndent;\n      state.ddIndent = oldDDIndent;\n\n      state.tokens.push({\n        type: 'dd_close',\n        level: --state.level\n      });\n\n      itemLines[1] = nextLine = state.line;\n\n      if (nextLine >= endLine) { break OUTER; }\n\n      if (state.tShift[nextLine] < state.blkIndent) { break OUTER; }\n      contentStart = skipMarker(state, nextLine);\n      if (contentStart < 0) { break; }\n\n      ddLine = nextLine;\n\n      // go to the next loop iteration:\n      // insert DD tag and repeat checking\n    }\n\n    if (nextLine >= endLine) { break; }\n    dtLine = nextLine;\n\n    if (state.isEmpty(dtLine)) { break; }\n    if (state.tShift[dtLine] < state.blkIndent) { break; }\n\n    ddLine = dtLine + 1;\n    if (ddLine >= endLine) { break; }\n    if (state.isEmpty(ddLine)) { ddLine++; }\n    if (ddLine >= endLine) { break; }\n\n    if (state.tShift[ddLine] < state.blkIndent) { break; }\n    contentStart = skipMarker(state, ddLine);\n    if (contentStart < 0) { break; }\n\n    // go to the next loop iteration:\n    // insert DT and DD tags and repeat checking\n  }\n\n  // Finilize list\n  state.tokens.push({\n    type: 'dl_close',\n    level: --state.level\n  });\n  listLines[1] = nextLine;\n\n  state.line = nextLine;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs$1(state, listTokIdx);\n  }\n\n  return true;\n}\n\n// Paragraph\n\nfunction paragraph(state, startLine/*, endLine*/) {\n  var endLine, content, terminate, i, l,\n      nextLine = startLine + 1,\n      terminatorRules;\n\n  endLine = state.lineMax;\n\n  // jump line-by-line until empty one or EOF\n  if (nextLine < endLine && !state.isEmpty(nextLine)) {\n    terminatorRules = state.parser.ruler.getRules('paragraph');\n\n    for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n      // this would be a code block normally, but after paragraph\n      // it's considered a lazy continuation regardless of what's there\n      if (state.tShift[nextLine] - state.blkIndent > 3) { continue; }\n\n      // Some tags can terminate paragraph without empty line.\n      terminate = false;\n      for (i = 0, l = terminatorRules.length; i < l; i++) {\n        if (terminatorRules[i](state, nextLine, endLine, true)) {\n          terminate = true;\n          break;\n        }\n      }\n      if (terminate) { break; }\n    }\n  }\n\n  content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n\n  state.line = nextLine;\n  if (content.length) {\n    state.tokens.push({\n      type: 'paragraph_open',\n      tight: false,\n      lines: [ startLine, state.line ],\n      level: state.level\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: content,\n      level: state.level + 1,\n      lines: [ startLine, state.line ],\n      children: []\n    });\n    state.tokens.push({\n      type: 'paragraph_close',\n      tight: false,\n      level: state.level\n    });\n  }\n\n  return true;\n}\n\n/**\n * Parser rules\n */\n\nvar _rules$1 = [\n  [ 'code',       code ],\n  [ 'fences',     fences,     [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'blockquote', blockquote, [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'hr',         hr,         [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'list',       list,       [ 'paragraph', 'blockquote' ] ],\n  [ 'footnote',   footnote,   [ 'paragraph' ] ],\n  [ 'heading',    heading,    [ 'paragraph', 'blockquote' ] ],\n  [ 'lheading',   lheading ],\n  [ 'htmlblock',  htmlblock,  [ 'paragraph', 'blockquote' ] ],\n  [ 'table',      table,      [ 'paragraph' ] ],\n  [ 'deflist',    deflist,    [ 'paragraph' ] ],\n  [ 'paragraph',  paragraph ]\n];\n\n/**\n * Block Parser class\n *\n * @api private\n */\n\nfunction ParserBlock() {\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules$1.length; i++) {\n    this.ruler.push(_rules$1[i][0], _rules$1[i][1], {\n      alt: (_rules$1[i][2] || []).slice()\n    });\n  }\n}\n\n/**\n * Generate tokens for the given input range.\n *\n * @param  {Object} `state` Has properties like `src`, `parser`, `options` etc\n * @param  {Number} `startLine`\n * @param  {Number} `endLine`\n * @api private\n */\n\nParserBlock.prototype.tokenize = function (state, startLine, endLine) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var line = startLine;\n  var hasEmptyLines = false;\n  var ok, i;\n\n  while (line < endLine) {\n    state.line = line = state.skipEmptyLines(line);\n    if (line >= endLine) {\n      break;\n    }\n\n    // Termination condition for nested calls.\n    // Nested calls currently used for blockquotes & lists\n    if (state.tShift[line] < state.blkIndent) {\n      break;\n    }\n\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.line`\n    // - update `state.tokens`\n    // - return true\n\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, line, endLine, false);\n      if (ok) {\n        break;\n      }\n    }\n\n    // set state.tight iff we had an empty line before current tag\n    // i.e. latest empty line should not count\n    state.tight = !hasEmptyLines;\n\n    // paragraph might \"eat\" one newline after it in nested lists\n    if (state.isEmpty(state.line - 1)) {\n      hasEmptyLines = true;\n    }\n\n    line = state.line;\n\n    if (line < endLine && state.isEmpty(line)) {\n      hasEmptyLines = true;\n      line++;\n\n      // two empty lines should stop the parser in list mode\n      if (line < endLine && state.parentType === 'list' && state.isEmpty(line)) { break; }\n      state.line = line;\n    }\n  }\n};\n\nvar TABS_SCAN_RE = /[\\n\\t]/g;\nvar NEWLINES_RE  = /\\r[\\n\\u0085]|[\\u2424\\u2028\\u0085]/g;\nvar SPACES_RE    = /\\u00a0/g;\n\n/**\n * Tokenize the given `str`.\n *\n * @param  {String} `str` Source string\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @param  {Array} `outTokens`\n * @api private\n */\n\nParserBlock.prototype.parse = function (str, options, env, outTokens) {\n  var state, lineStart = 0, lastTabPos = 0;\n  if (!str) { return []; }\n\n  // Normalize spaces\n  str = str.replace(SPACES_RE, ' ');\n\n  // Normalize newlines\n  str = str.replace(NEWLINES_RE, '\\n');\n\n  // Replace tabs with proper number of spaces (1..4)\n  if (str.indexOf('\\t') >= 0) {\n    str = str.replace(TABS_SCAN_RE, function (match, offset) {\n      var result;\n      if (str.charCodeAt(offset) === 0x0A) {\n        lineStart = offset + 1;\n        lastTabPos = 0;\n        return match;\n      }\n      result = '    '.slice((offset - lineStart - lastTabPos) % 4);\n      lastTabPos = offset - lineStart + 1;\n      return result;\n    });\n  }\n\n  state = new StateBlock(str, this, options, env, outTokens);\n  this.tokenize(state, state.line, state.lineMax);\n};\n\n// Skip text characters for text token, place those to pending buffer\n// and increment current pos\n\n// Rule to skip pure text\n// '{}$%@~+=:' reserved for extentions\n\nfunction isTerminatorChar(ch) {\n  switch (ch) {\n    case 0x0A/* \\n */:\n    case 0x5C/* \\ */:\n    case 0x60/* ` */:\n    case 0x2A/* * */:\n    case 0x5F/* _ */:\n    case 0x5E/* ^ */:\n    case 0x5B/* [ */:\n    case 0x5D/* ] */:\n    case 0x21/* ! */:\n    case 0x26/* & */:\n    case 0x3C/* < */:\n    case 0x3E/* > */:\n    case 0x7B/* { */:\n    case 0x7D/* } */:\n    case 0x24/* $ */:\n    case 0x25/* % */:\n    case 0x40/* @ */:\n    case 0x7E/* ~ */:\n    case 0x2B/* + */:\n    case 0x3D/* = */:\n    case 0x3A/* : */:\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction text(state, silent) {\n  var pos = state.pos;\n\n  while (pos < state.posMax && !isTerminatorChar(state.src.charCodeAt(pos))) {\n    pos++;\n  }\n\n  if (pos === state.pos) { return false; }\n\n  if (!silent) { state.pending += state.src.slice(state.pos, pos); }\n\n  state.pos = pos;\n\n  return true;\n}\n\n// Proceess '\\n'\n\nfunction newline(state, silent) {\n  var pmax, max, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x0A/* \\n */) { return false; }\n\n  pmax = state.pending.length - 1;\n  max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        // Strip out all trailing spaces on this line.\n        for (var i = pmax - 2; i >= 0; i--) {\n          if (state.pending.charCodeAt(i) !== 0x20) {\n            state.pending = state.pending.substring(0, i + 1);\n            break;\n          }\n        }\n        state.push({\n          type: 'hardbreak',\n          level: state.level\n        });\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push({\n          type: 'softbreak',\n          level: state.level\n        });\n      }\n\n    } else {\n      state.push({\n        type: 'softbreak',\n        level: state.level\n      });\n    }\n  }\n\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n  state.pos = pos;\n  return true;\n}\n\n// Proceess escaped chars and hardbreaks\n\nvar ESCAPED = [];\n\nfor (var i = 0; i < 256; i++) { ESCAPED.push(0); }\n\n'\\\\!\"#$%&\\'()*+,./:;<=>?@[]^_`{|}~-'\n  .split('').forEach(function(ch) { ESCAPED[ch.charCodeAt(0)] = 1; });\n\n\nfunction escape(state, silent) {\n  var ch, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x5C/* \\ */) { return false; }\n\n  pos++;\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (ch < 256 && ESCAPED[ch] !== 0) {\n      if (!silent) { state.pending += state.src[pos]; }\n      state.pos += 2;\n      return true;\n    }\n\n    if (ch === 0x0A) {\n      if (!silent) {\n        state.push({\n          type: 'hardbreak',\n          level: state.level\n        });\n      }\n\n      pos++;\n      // skip leading whitespaces from next line\n      while (pos < max && state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n      state.pos = pos;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += '\\\\'; }\n  state.pos++;\n  return true;\n}\n\n// Parse backticks\n\nfunction backticks(state, silent) {\n  var start, max, marker, matchStart, matchEnd,\n      pos = state.pos,\n      ch = state.src.charCodeAt(pos);\n\n  if (ch !== 0x60/* ` */) { return false; }\n\n  start = pos;\n  pos++;\n  max = state.posMax;\n\n  while (pos < max && state.src.charCodeAt(pos) === 0x60/* ` */) { pos++; }\n\n  marker = state.src.slice(start, pos);\n\n  matchStart = matchEnd = pos;\n\n  while ((matchStart = state.src.indexOf('`', matchEnd)) !== -1) {\n    matchEnd = matchStart + 1;\n\n    while (matchEnd < max && state.src.charCodeAt(matchEnd) === 0x60/* ` */) { matchEnd++; }\n\n    if (matchEnd - matchStart === marker.length) {\n      if (!silent) {\n        state.push({\n          type: 'code',\n          content: state.src.slice(pos, matchStart)\n                              .replace(/[ \\n]+/g, ' ')\n                              .trim(),\n          block: false,\n          level: state.level\n        });\n      }\n      state.pos = matchEnd;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += marker; }\n  state.pos += marker.length;\n  return true;\n}\n\n// Process ~~deleted text~~\n\nfunction del(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x7E/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x7E/* ~ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x7E/* ~ */) { return false; }\n  if (nextChar === 0x7E/* ~ */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x7E/* ~ */) { pos++; }\n  if (pos > start + 3) {\n    // sequence of 4+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x7E/* ~ */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x7E/* ~ */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x7E/* ~ */ && lastChar !== 0x7E/* ~ */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '~~'\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '~~'\n            stack++;\n          } // else {\n            //  // standalone ' ~~ ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'del_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'del_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process ++inserted text++\n\nfunction ins(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x2B/* + */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x2B/* + */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x2B/* + */) { return false; }\n  if (nextChar === 0x2B/* + */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x2B/* + */) { pos++; }\n  if (pos !== start + 2) {\n    // sequence of 3+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x2B/* + */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x2B/* + */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x2B/* + */ && lastChar !== 0x2B/* + */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '++'\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '++'\n            stack++;\n          } // else {\n            //  // standalone ' ++ ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'ins_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'ins_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process ==highlighted text==\n\nfunction mark(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x3D/* = */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x3D/* = */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x3D/* = */) { return false; }\n  if (nextChar === 0x3D/* = */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x3D/* = */) { pos++; }\n  if (pos !== start + 2) {\n    // sequence of 3+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x3D/* = */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x3D/* = */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x3D/* = */ && lastChar !== 0x3D/* = */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '=='\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '=='\n            stack++;\n          } // else {\n            //  // standalone ' == ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'mark_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'mark_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process *this* and _that_\n\nfunction isAlphaNum(code) {\n  return (code >= 0x30 /* 0 */ && code <= 0x39 /* 9 */) ||\n         (code >= 0x41 /* A */ && code <= 0x5A /* Z */) ||\n         (code >= 0x61 /* a */ && code <= 0x7A /* z */);\n}\n\n// parse sequence of emphasis markers,\n// \"start\" should point at a valid marker\nfunction scanDelims(state, start) {\n  var pos = start, lastChar, nextChar, count,\n      can_open = true,\n      can_close = true,\n      max = state.posMax,\n      marker = state.src.charCodeAt(start);\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n\n  while (pos < max && state.src.charCodeAt(pos) === marker) { pos++; }\n  if (pos >= max) { can_open = false; }\n  count = pos - start;\n\n  if (count >= 4) {\n    // sequence of four or more unescaped markers can't start/end an emphasis\n    can_open = can_close = false;\n  } else {\n    nextChar = pos < max ? state.src.charCodeAt(pos) : -1;\n\n    // check whitespace conditions\n    if (nextChar === 0x20 || nextChar === 0x0A) { can_open = false; }\n    if (lastChar === 0x20 || lastChar === 0x0A) { can_close = false; }\n\n    if (marker === 0x5F /* _ */) {\n      // check if we aren't inside the word\n      if (isAlphaNum(lastChar)) { can_open = false; }\n      if (isAlphaNum(nextChar)) { can_close = false; }\n    }\n  }\n\n  return {\n    can_open: can_open,\n    can_close: can_close,\n    delims: count\n  };\n}\n\nfunction emphasis(state, silent) {\n  var startCount,\n      count,\n      found,\n      oldCount,\n      newCount,\n      stack,\n      res,\n      max = state.posMax,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (marker !== 0x5F/* _ */ && marker !== 0x2A /* * */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n\n  res = scanDelims(state, start);\n  startCount = res.delims;\n  if (!res.can_open) {\n    state.pos += startCount;\n    if (!silent) { state.pending += state.src.slice(start, state.pos); }\n    return true;\n  }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + startCount;\n  stack = [ startCount ];\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === marker) {\n      res = scanDelims(state, state.pos);\n      count = res.delims;\n      if (res.can_close) {\n        oldCount = stack.pop();\n        newCount = count;\n\n        while (oldCount !== newCount) {\n          if (newCount < oldCount) {\n            stack.push(oldCount - newCount);\n            break;\n          }\n\n          // assert(newCount > oldCount)\n          newCount -= oldCount;\n\n          if (stack.length === 0) { break; }\n          state.pos += oldCount;\n          oldCount = stack.pop();\n        }\n\n        if (stack.length === 0) {\n          startCount = oldCount;\n          found = true;\n          break;\n        }\n        state.pos += count;\n        continue;\n      }\n\n      if (res.can_open) { stack.push(count); }\n      state.pos += count;\n      continue;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + startCount;\n\n  if (!silent) {\n    if (startCount === 2 || startCount === 3) {\n      state.push({ type: 'strong_open', level: state.level++ });\n    }\n    if (startCount === 1 || startCount === 3) {\n      state.push({ type: 'em_open', level: state.level++ });\n    }\n\n    state.parser.tokenize(state);\n\n    if (startCount === 1 || startCount === 3) {\n      state.push({ type: 'em_close', level: --state.level });\n    }\n    if (startCount === 2 || startCount === 3) {\n      state.push({ type: 'strong_close', level: --state.level });\n    }\n  }\n\n  state.pos = state.posMax + startCount;\n  state.posMax = max;\n  return true;\n}\n\n// Process ~subscript~\n\n// same as UNESCAPE_MD_RE plus a space\nvar UNESCAPE_RE = /\\\\([ \\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction sub(state, silent) {\n  var found,\n      content,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x7E/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 2 >= max) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + 1;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 0x7E/* ~ */) {\n      found = true;\n      break;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n    return false;\n  }\n\n  content = state.src.slice(start + 1, state.pos);\n\n  // don't allow unescaped spaces/newlines inside\n  if (content.match(/(^|[^\\\\])(\\\\\\\\)*\\s/)) {\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  if (!silent) {\n    state.push({\n      type: 'sub',\n      level: state.level,\n      content: content.replace(UNESCAPE_RE, '$1')\n    });\n  }\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process ^superscript^\n\n// same as UNESCAPE_MD_RE plus a space\nvar UNESCAPE_RE$1 = /\\\\([ \\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction sup(state, silent) {\n  var found,\n      content,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 2 >= max) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + 1;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 0x5E/* ^ */) {\n      found = true;\n      break;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n    return false;\n  }\n\n  content = state.src.slice(start + 1, state.pos);\n\n  // don't allow unescaped spaces/newlines inside\n  if (content.match(/(^|[^\\\\])(\\\\\\\\)*\\s/)) {\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  if (!silent) {\n    state.push({\n      type: 'sup',\n      level: state.level,\n      content: content.replace(UNESCAPE_RE$1, '$1')\n    });\n  }\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process [links](<to> \"stuff\")\n\n\nfunction links(state, silent) {\n  var labelStart,\n      labelEnd,\n      label,\n      href,\n      title,\n      pos,\n      ref,\n      code,\n      isImage = false,\n      oldPos = state.pos,\n      max = state.posMax,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (marker === 0x21/* ! */) {\n    isImage = true;\n    marker = state.src.charCodeAt(++start);\n  }\n\n  if (marker !== 0x5B/* [ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  labelStart = start + 1;\n  labelEnd = parseLinkLabel(state, start);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) { return false; }\n\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28/* ( */) {\n    //\n    // Inline link\n    //\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n    if (pos >= max) { return false; }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    if (parseLinkDestination(state, pos)) {\n      href = state.linkContent;\n      pos = state.pos;\n    } else {\n      href = '';\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                ^^ skipping these spaces\n    start = pos;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                  ^^^^^^^ parsing link title\n    if (pos < max && start !== pos && parseLinkTitle(state, pos)) {\n      title = state.linkContent;\n      pos = state.pos;\n\n      // [link](  <href>  \"title\"  )\n      //                         ^^ skipping these spaces\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (code !== 0x20 && code !== 0x0A) { break; }\n      }\n    } else {\n      title = '';\n    }\n\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29/* ) */) {\n      state.pos = oldPos;\n      return false;\n    }\n    pos++;\n  } else {\n    //\n    // Link reference\n    //\n\n    // do not allow nested reference links\n    if (state.linkLevel > 0) { return false; }\n\n    // [foo]  [bar]\n    //      ^^ optional whitespace (can include newlines)\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B/* [ */) {\n      start = pos + 1;\n      pos = parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = start - 1;\n      }\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) {\n      if (typeof label === 'undefined') {\n        pos = labelEnd + 1;\n      }\n      label = state.src.slice(labelStart, labelEnd);\n    }\n\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    if (isImage) {\n      state.push({\n        type: 'image',\n        src: href,\n        title: title,\n        alt: state.src.substr(labelStart, labelEnd - labelStart),\n        level: state.level\n      });\n    } else {\n      state.push({\n        type: 'link_open',\n        href: href,\n        title: title,\n        level: state.level++\n      });\n      state.linkLevel++;\n      state.parser.tokenize(state);\n      state.linkLevel--;\n      state.push({ type: 'link_close', level: --state.level });\n    }\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// Process inline footnotes (^[...])\n\n\nfunction footnote_inline(state, silent) {\n  var labelStart,\n      labelEnd,\n      footnoteId,\n      oldLength,\n      max = state.posMax,\n      start = state.pos;\n\n  if (start + 2 >= max) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5B/* [ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  labelStart = start + 2;\n  labelEnd = parseLinkLabel(state, start + 1);\n\n  // parser failed to find ']', so it's not a valid note\n  if (labelEnd < 0) { return false; }\n\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    if (!state.env.footnotes) { state.env.footnotes = {}; }\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n    footnoteId = state.env.footnotes.list.length;\n\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      level: state.level\n    });\n    state.linkLevel++;\n    oldLength = state.tokens.length;\n    state.parser.tokenize(state);\n    state.env.footnotes.list[footnoteId] = { tokens: state.tokens.splice(oldLength) };\n    state.linkLevel--;\n  }\n\n  state.pos = labelEnd + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process footnote references ([^...])\n\nfunction footnote_ref(state, silent) {\n  var label,\n      pos,\n      footnoteId,\n      footnoteSubId,\n      max = state.posMax,\n      start = state.pos;\n\n  // should be at least 4 chars - \"[^x]\"\n  if (start + 3 > max) { return false; }\n\n  if (!state.env.footnotes || !state.env.footnotes.refs) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x0A) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos >= max) { return false; }\n  pos++;\n\n  label = state.src.slice(start + 2, pos - 1);\n  if (typeof state.env.footnotes.refs[':' + label] === 'undefined') { return false; }\n\n  if (!silent) {\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n\n    if (state.env.footnotes.refs[':' + label] < 0) {\n      footnoteId = state.env.footnotes.list.length;\n      state.env.footnotes.list[footnoteId] = { label: label, count: 0 };\n      state.env.footnotes.refs[':' + label] = footnoteId;\n    } else {\n      footnoteId = state.env.footnotes.refs[':' + label];\n    }\n\n    footnoteSubId = state.env.footnotes.list[footnoteId].count;\n    state.env.footnotes.list[footnoteId].count++;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      subId: footnoteSubId,\n      level: state.level\n    });\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// List of valid url schemas, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#autolinks\n\nvar url_schemas = [\n  'coap',\n  'doi',\n  'javascript',\n  'aaa',\n  'aaas',\n  'about',\n  'acap',\n  'cap',\n  'cid',\n  'crid',\n  'data',\n  'dav',\n  'dict',\n  'dns',\n  'file',\n  'ftp',\n  'geo',\n  'go',\n  'gopher',\n  'h323',\n  'http',\n  'https',\n  'iax',\n  'icap',\n  'im',\n  'imap',\n  'info',\n  'ipp',\n  'iris',\n  'iris.beep',\n  'iris.xpc',\n  'iris.xpcs',\n  'iris.lwz',\n  'ldap',\n  'mailto',\n  'mid',\n  'msrp',\n  'msrps',\n  'mtqp',\n  'mupdate',\n  'news',\n  'nfs',\n  'ni',\n  'nih',\n  'nntp',\n  'opaquelocktoken',\n  'pop',\n  'pres',\n  'rtsp',\n  'service',\n  'session',\n  'shttp',\n  'sieve',\n  'sip',\n  'sips',\n  'sms',\n  'snmp',\n  'soap.beep',\n  'soap.beeps',\n  'tag',\n  'tel',\n  'telnet',\n  'tftp',\n  'thismessage',\n  'tn3270',\n  'tip',\n  'tv',\n  'urn',\n  'vemmi',\n  'ws',\n  'wss',\n  'xcon',\n  'xcon-userid',\n  'xmlrpc.beep',\n  'xmlrpc.beeps',\n  'xmpp',\n  'z39.50r',\n  'z39.50s',\n  'adiumxtra',\n  'afp',\n  'afs',\n  'aim',\n  'apt',\n  'attachment',\n  'aw',\n  'beshare',\n  'bitcoin',\n  'bolo',\n  'callto',\n  'chrome',\n  'chrome-extension',\n  'com-eventbrite-attendee',\n  'content',\n  'cvs',\n  'dlna-playsingle',\n  'dlna-playcontainer',\n  'dtn',\n  'dvb',\n  'ed2k',\n  'facetime',\n  'feed',\n  'finger',\n  'fish',\n  'gg',\n  'git',\n  'gizmoproject',\n  'gtalk',\n  'hcp',\n  'icon',\n  'ipn',\n  'irc',\n  'irc6',\n  'ircs',\n  'itms',\n  'jar',\n  'jms',\n  'keyparc',\n  'lastfm',\n  'ldaps',\n  'magnet',\n  'maps',\n  'market',\n  'message',\n  'mms',\n  'ms-help',\n  'msnim',\n  'mumble',\n  'mvn',\n  'notes',\n  'oid',\n  'palm',\n  'paparazzi',\n  'platform',\n  'proxy',\n  'psyc',\n  'query',\n  'res',\n  'resource',\n  'rmi',\n  'rsync',\n  'rtmp',\n  'secondlife',\n  'sftp',\n  'sgn',\n  'skype',\n  'smb',\n  'soldat',\n  'spotify',\n  'ssh',\n  'steam',\n  'svn',\n  'teamspeak',\n  'things',\n  'udp',\n  'unreal',\n  'ut2004',\n  'ventrilo',\n  'view-source',\n  'webcal',\n  'wtai',\n  'wyciwyg',\n  'xfire',\n  'xri',\n  'ymsgr'\n];\n\n// Process autolinks '<protocol:...>'\n\n\n/*eslint max-len:0*/\nvar EMAIL_RE    = /^<([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/;\nvar AUTOLINK_RE = /^<([a-zA-Z.\\-]{1,25}):([^<>\\x00-\\x20]*)>/;\n\n\nfunction autolink(state, silent) {\n  var tail, linkMatch, emailMatch, url, fullUrl, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  tail = state.src.slice(pos);\n\n  if (tail.indexOf('>') < 0) { return false; }\n\n  linkMatch = tail.match(AUTOLINK_RE);\n\n  if (linkMatch) {\n    if (url_schemas.indexOf(linkMatch[1].toLowerCase()) < 0) { return false; }\n\n    url = linkMatch[0].slice(1, -1);\n    fullUrl = normalizeLink(url);\n    if (!state.parser.validateLink(url)) { return false; }\n\n    if (!silent) {\n      state.push({\n        type: 'link_open',\n        href: fullUrl,\n        level: state.level\n      });\n      state.push({\n        type: 'text',\n        content: url,\n        level: state.level + 1\n      });\n      state.push({ type: 'link_close', level: state.level });\n    }\n\n    state.pos += linkMatch[0].length;\n    return true;\n  }\n\n  emailMatch = tail.match(EMAIL_RE);\n\n  if (emailMatch) {\n\n    url = emailMatch[0].slice(1, -1);\n\n    fullUrl = normalizeLink('mailto:' + url);\n    if (!state.parser.validateLink(fullUrl)) { return false; }\n\n    if (!silent) {\n      state.push({\n        type: 'link_open',\n        href: fullUrl,\n        level: state.level\n      });\n      state.push({\n        type: 'text',\n        content: url,\n        level: state.level + 1\n      });\n      state.push({ type: 'link_close', level: state.level });\n    }\n\n    state.pos += emailMatch[0].length;\n    return true;\n  }\n\n  return false;\n}\n\n// Regexps to match html elements\n\nfunction replace$1(regex, options) {\n  regex = regex.source;\n  options = options || '';\n\n  return function self(name, val) {\n    if (!name) {\n      return new RegExp(regex, options);\n    }\n    val = val.source || val;\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\n\nvar attr_name     = /[a-zA-Z_:][a-zA-Z0-9:._-]*/;\n\nvar unquoted      = /[^\"'=<>`\\x00-\\x20]+/;\nvar single_quoted = /'[^']*'/;\nvar double_quoted = /\"[^\"]*\"/;\n\n/*eslint no-spaced-func:0*/\nvar attr_value  = replace$1(/(?:unquoted|single_quoted|double_quoted)/)\n                    ('unquoted', unquoted)\n                    ('single_quoted', single_quoted)\n                    ('double_quoted', double_quoted)\n                    ();\n\nvar attribute   = replace$1(/(?:\\s+attr_name(?:\\s*=\\s*attr_value)?)/)\n                    ('attr_name', attr_name)\n                    ('attr_value', attr_value)\n                    ();\n\nvar open_tag    = replace$1(/<[A-Za-z][A-Za-z0-9]*attribute*\\s*\\/?>/)\n                    ('attribute', attribute)\n                    ();\n\nvar close_tag   = /<\\/[A-Za-z][A-Za-z0-9]*\\s*>/;\nvar comment     = /<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/;\nvar processing  = /<[?].*?[?]>/;\nvar declaration = /<![A-Z]+\\s+[^>]*>/;\nvar cdata       = /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/;\n\nvar HTML_TAG_RE = replace$1(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)\n  ('open_tag', open_tag)\n  ('close_tag', close_tag)\n  ('comment', comment)\n  ('processing', processing)\n  ('declaration', declaration)\n  ('cdata', cdata)\n  ();\n\n// Process html tags\n\n\nfunction isLetter$2(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\n\nfunction htmltag(state, silent) {\n  var ch, match, max, pos = state.pos;\n\n  if (!state.options.html) { return false; }\n\n  // Check start\n  max = state.posMax;\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */ ||\n      pos + 2 >= max) {\n    return false;\n  }\n\n  // Quick fail on second char\n  ch = state.src.charCodeAt(pos + 1);\n  if (ch !== 0x21/* ! */ &&\n      ch !== 0x3F/* ? */ &&\n      ch !== 0x2F/* / */ &&\n      !isLetter$2(ch)) {\n    return false;\n  }\n\n  match = state.src.slice(pos).match(HTML_TAG_RE);\n  if (!match) { return false; }\n\n  if (!silent) {\n    state.push({\n      type: 'htmltag',\n      content: state.src.slice(pos, pos + match[0].length),\n      level: state.level\n    });\n  }\n  state.pos += match[0].length;\n  return true;\n}\n\n// Process html entity - &#123;, &#xAF;, &quot;, ...\n\n\nvar DIGITAL_RE = /^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i;\nvar NAMED_RE   = /^&([a-z][a-z0-9]{1,31});/i;\n\n\nfunction entity(state, silent) {\n  var ch, code, match, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x26/* & */) { return false; }\n\n  if (pos + 1 < max) {\n    ch = state.src.charCodeAt(pos + 1);\n\n    if (ch === 0x23 /* # */) {\n      match = state.src.slice(pos).match(DIGITAL_RE);\n      if (match) {\n        if (!silent) {\n          code = match[1][0].toLowerCase() === 'x' ? parseInt(match[1].slice(1), 16) : parseInt(match[1], 10);\n          state.pending += isValidEntityCode(code) ? fromCodePoint(code) : fromCodePoint(0xFFFD);\n        }\n        state.pos += match[0].length;\n        return true;\n      }\n    } else {\n      match = state.src.slice(pos).match(NAMED_RE);\n      if (match) {\n        var decoded = decodeEntity(match[1]);\n        if (match[1] !== decoded) {\n          if (!silent) { state.pending += decoded; }\n          state.pos += match[0].length;\n          return true;\n        }\n      }\n    }\n  }\n\n  if (!silent) { state.pending += '&'; }\n  state.pos++;\n  return true;\n}\n\n/**\n * Inline Parser `rules`\n */\n\nvar _rules$2 = [\n  [ 'text',            text ],\n  [ 'newline',         newline ],\n  [ 'escape',          escape ],\n  [ 'backticks',       backticks ],\n  [ 'del',             del ],\n  [ 'ins',             ins ],\n  [ 'mark',            mark ],\n  [ 'emphasis',        emphasis ],\n  [ 'sub',             sub ],\n  [ 'sup',             sup ],\n  [ 'links',           links ],\n  [ 'footnote_inline', footnote_inline ],\n  [ 'footnote_ref',    footnote_ref ],\n  [ 'autolink',        autolink ],\n  [ 'htmltag',         htmltag ],\n  [ 'entity',          entity ]\n];\n\n/**\n * Inline Parser class. Note that link validation is stricter\n * in Remarkable than what is specified by CommonMark. If you\n * want to change this you can use a custom validator.\n *\n * @api private\n */\n\nfunction ParserInline() {\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules$2.length; i++) {\n    this.ruler.push(_rules$2[i][0], _rules$2[i][1]);\n  }\n\n  // Can be overridden with a custom validator\n  this.validateLink = validateLink;\n}\n\n/**\n * Skip a single token by running all rules in validation mode.\n * Returns `true` if any rule reports success.\n *\n * @param  {Object} `state`\n * @api privage\n */\n\nParserInline.prototype.skipToken = function (state) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var pos = state.pos;\n  var i, cached_pos;\n\n  if ((cached_pos = state.cacheGet(pos)) > 0) {\n    state.pos = cached_pos;\n    return;\n  }\n\n  for (i = 0; i < len; i++) {\n    if (rules[i](state, true)) {\n      state.cacheSet(pos, state.pos);\n      return;\n    }\n  }\n\n  state.pos++;\n  state.cacheSet(pos, state.pos);\n};\n\n/**\n * Generate tokens for the given input range.\n *\n * @param  {Object} `state`\n * @api private\n */\n\nParserInline.prototype.tokenize = function (state) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var end = state.posMax;\n  var ok, i;\n\n  while (state.pos < end) {\n\n    // Try all possible rules.\n    // On success, the rule should:\n    //\n    // - update `state.pos`\n    // - update `state.tokens`\n    // - return true\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, false);\n\n      if (ok) {\n        break;\n      }\n    }\n\n    if (ok) {\n      if (state.pos >= end) { break; }\n      continue;\n    }\n\n    state.pending += state.src[state.pos++];\n  }\n\n  if (state.pending) {\n    state.pushPending();\n  }\n};\n\n/**\n * Parse the given input string.\n *\n * @param  {String} `str`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @param  {Array} `outTokens`\n * @api private\n */\n\nParserInline.prototype.parse = function (str, options, env, outTokens) {\n  var state = new StateInline(str, this, options, env, outTokens);\n  this.tokenize(state);\n};\n\n/**\n * Validate the given `url` by checking for bad protocols.\n *\n * @param  {String} `url`\n * @return {Boolean}\n */\n\nfunction validateLink(url) {\n  var BAD_PROTOCOLS = [ 'vbscript', 'javascript', 'file', 'data' ];\n  var str = url.trim().toLowerCase();\n  // Care about digital entities \"javascript&#x3A;alert(1)\"\n  str = replaceEntities(str);\n  if (str.indexOf(':') !== -1 && BAD_PROTOCOLS.indexOf(str.split(':')[0]) !== -1) {\n    return false;\n  }\n  return true;\n}\n\n// Remarkable default options\n\nvar defaultConfig = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '«»' for Russian, '„“' for German.\n    quotes: '“”‘’',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'block',\n        'inline',\n        'references',\n        'replacements',\n        'smartquotes',\n        'references',\n        'abbr2',\n        'footnote_tail'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fences',\n        'footnote',\n        'heading',\n        'hr',\n        'htmlblock',\n        'lheading',\n        'list',\n        'paragraph',\n        'table'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'del',\n        'emphasis',\n        'entity',\n        'escape',\n        'footnote_ref',\n        'htmltag',\n        'links',\n        'newline',\n        'text'\n      ]\n    }\n  }\n};\n\n// Remarkable default options\n\nvar fullConfig = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '«»' for Russian, '„“' for German.\n    quotes:       '“”‘’',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight:     null,\n\n    maxNesting:    20            // Internal protection, recursion limit\n  },\n\n  components: {\n    // Don't restrict core/block/inline rules\n    core: {},\n    block: {},\n    inline: {}\n  }\n};\n\n// Commonmark default options\n\nvar commonmarkConfig = {\n  options: {\n    html:         true,         // Enable HTML tags in source\n    xhtmlOut:     true,         // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '«»' for Russian, '„“' for German.\n    quotes: '“”‘’',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'block',\n        'inline',\n        'references',\n        'abbr2'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fences',\n        'heading',\n        'hr',\n        'htmlblock',\n        'lheading',\n        'list',\n        'paragraph'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'emphasis',\n        'entity',\n        'escape',\n        'htmltag',\n        'links',\n        'newline',\n        'text'\n      ]\n    }\n  }\n};\n\n/**\n * Preset configs\n */\n\nvar config = {\n  'default': defaultConfig,\n  'full': fullConfig,\n  'commonmark': commonmarkConfig\n};\n\n/**\n * The `StateCore` class manages state.\n *\n * @param {Object} `instance` Remarkable instance\n * @param {String} `str` Markdown string\n * @param {Object} `env`\n */\n\nfunction StateCore(instance, str, env) {\n  this.src = str;\n  this.env = env;\n  this.options = instance.options;\n  this.tokens = [];\n  this.inlineMode = false;\n\n  this.inline = instance.inline;\n  this.block = instance.block;\n  this.renderer = instance.renderer;\n  this.typographer = instance.typographer;\n}\n\n/**\n * The main `Remarkable` class. Create an instance of\n * `Remarkable` with a `preset` and/or `options`.\n *\n * @param {String} `preset` If no preset is given, `default` is used.\n * @param {Object} `options`\n */\n\nfunction Remarkable(preset, options) {\n  if (typeof preset !== 'string') {\n    options = preset;\n    preset = 'default';\n  }\n\n  if (options && options.linkify != null) {\n    console.warn(\n      'linkify option is removed. Use linkify plugin instead:\\n\\n' +\n      'import Remarkable from \\'remarkable\\';\\n' +\n      'import linkify from \\'remarkable/linkify\\';\\n' +\n      'new Remarkable().use(linkify)\\n'\n    );\n  }\n\n  this.inline   = new ParserInline();\n  this.block    = new ParserBlock();\n  this.core     = new Core();\n  this.renderer = new Renderer();\n  this.ruler    = new Ruler();\n\n  this.options  = {};\n  this.configure(config[preset]);\n  this.set(options || {});\n}\n\n/**\n * Set options as an alternative to passing them\n * to the constructor.\n *\n * ```js\n * md.set({typographer: true});\n * ```\n * @param {Object} `options`\n * @api public\n */\n\nRemarkable.prototype.set = function (options) {\n  assign(this.options, options);\n};\n\n/**\n * Batch loader for components rules states, and options\n *\n * @param  {Object} `presets`\n */\n\nRemarkable.prototype.configure = function (presets) {\n  var self = this;\n\n  if (!presets) { throw new Error('Wrong `remarkable` preset, check name/content'); }\n  if (presets.options) { self.set(presets.options); }\n  if (presets.components) {\n    Object.keys(presets.components).forEach(function (name) {\n      if (presets.components[name].rules) {\n        self[name].ruler.enable(presets.components[name].rules, true);\n      }\n    });\n  }\n};\n\n/**\n * Use a plugin.\n *\n * ```js\n * var md = new Remarkable();\n *\n * md.use(plugin1)\n *   .use(plugin2, opts)\n *   .use(plugin3);\n * ```\n *\n * @param  {Function} `plugin`\n * @param  {Object} `options`\n * @return {Object} `Remarkable` for chaining\n */\n\nRemarkable.prototype.use = function (plugin, options) {\n  plugin(this, options);\n  return this;\n};\n\n\n/**\n * Parse the input `string` and return a tokens array.\n * Modifies `env` with definitions data.\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {Array} Array of tokens\n */\n\nRemarkable.prototype.parse = function (str, env) {\n  var state = new StateCore(this, str, env);\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * The main `.render()` method that does all the magic :)\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {String} Rendered HTML.\n */\n\nRemarkable.prototype.render = function (str, env) {\n  env = env || {};\n  return this.renderer.render(this.parse(str, env), this.options, env);\n};\n\n/**\n * Parse the given content `string` as a single string.\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {Array} Array of tokens\n */\n\nRemarkable.prototype.parseInline = function (str, env) {\n  var state = new StateCore(this, str, env);\n  state.inlineMode = true;\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * Render a single content `string`, without wrapping it\n * to paragraphs\n *\n * @param  {String} `str`\n * @param  {Object} `env`\n * @return {String}\n */\n\nRemarkable.prototype.renderInline = function (str, env) {\n  env = env || {};\n  return this.renderer.render(this.parseInline(str, env), this.options, env);\n};\n\nexport { Remarkable, utils };\n","const {\n  hasOwnProperty,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n} = Object;\n\nlet { freeze, seal, create } = Object; // eslint-disable-line import/no-mutable-exports\nlet { apply, construct } = typeof Reflect !== 'undefined' && Reflect;\n\nif (!apply) {\n  apply = function (fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!freeze) {\n  freeze = function (x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function (x) {\n    return x;\n  };\n}\n\nif (!construct) {\n  construct = function (Func, args) {\n    return new Func(...args);\n  };\n}\n\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayIndexOf = unapply(Array.prototype.indexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySlice = unapply(Array.prototype.slice);\n\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\n\nconst regExpTest = unapply(RegExp.prototype.test);\n\nconst typeErrorCreate = unconstruct(TypeError);\n\nexport function unapply(func) {\n  return (thisArg, ...args) => apply(func, thisArg, args);\n}\n\nexport function unconstruct(func) {\n  return (...args) => construct(func, args);\n}\n\n/* Add properties to a lookup table */\nexport function addToSet(set, array) {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = stringToLowerCase(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/* Shallow clone an object */\nexport function clone(object) {\n  const newObject = create(null);\n\n  let property;\n  for (property in object) {\n    if (apply(hasOwnProperty, object, [property])) {\n      newObject[property] = object[property];\n    }\n  }\n\n  return newObject;\n}\n\n/* IE10 doesn't support __lookupGetter__ so lets'\n * simulate it. It also automatically checks\n * if the prop is function or getter and behaves\n * accordingly. */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(element) {\n    console.warn('fallback value for', element);\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nexport {\n  // Array\n  arrayForEach,\n  arrayIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  // Object\n  freeze,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n  hasOwnProperty,\n  isFrozen,\n  setPrototypeOf,\n  seal,\n  // RegExp\n  regExpTest,\n  // String\n  stringIndexOf,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringTrim,\n  // Errors\n  typeErrorCreate,\n  // Other\n  lookupGetter,\n};\n","import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'decorator',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meter',\n  'nav',\n  'nobr',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'section',\n  'select',\n  'shadow',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n]);\n\n// SVG\nexport const svg = freeze([\n  'svg',\n  'a',\n  'altglyph',\n  'altglyphdef',\n  'altglyphitem',\n  'animatecolor',\n  'animatemotion',\n  'animatetransform',\n  'circle',\n  'clippath',\n  'defs',\n  'desc',\n  'ellipse',\n  'filter',\n  'font',\n  'g',\n  'glyph',\n  'glyphref',\n  'hkern',\n  'image',\n  'line',\n  'lineargradient',\n  'marker',\n  'mask',\n  'metadata',\n  'mpath',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialgradient',\n  'rect',\n  'stop',\n  'style',\n  'switch',\n  'symbol',\n  'text',\n  'textpath',\n  'title',\n  'tref',\n  'tspan',\n  'view',\n  'vkern',\n]);\n\nexport const svgFilters = freeze([\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n]);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nexport const svgDisallowed = freeze([\n  'animate',\n  'color-profile',\n  'cursor',\n  'discard',\n  'fedropshadow',\n  'feimage',\n  'font-face',\n  'font-face-format',\n  'font-face-name',\n  'font-face-src',\n  'font-face-uri',\n  'foreignobject',\n  'hatch',\n  'hatchpath',\n  'mesh',\n  'meshgradient',\n  'meshpatch',\n  'meshrow',\n  'missing-glyph',\n  'script',\n  'set',\n  'solidcolor',\n  'unknown',\n  'use',\n]);\n\nexport const mathMl = freeze([\n  'math',\n  'menclose',\n  'merror',\n  'mfenced',\n  'mfrac',\n  'mglyph',\n  'mi',\n  'mlabeledtr',\n  'mmultiscripts',\n  'mn',\n  'mo',\n  'mover',\n  'mpadded',\n  'mphantom',\n  'mroot',\n  'mrow',\n  'ms',\n  'mspace',\n  'msqrt',\n  'mstyle',\n  'msub',\n  'msup',\n  'msubsup',\n  'mtable',\n  'mtd',\n  'mtext',\n  'mtr',\n  'munder',\n  'munderover',\n]);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nexport const mathMlDisallowed = freeze([\n  'maction',\n  'maligngroup',\n  'malignmark',\n  'mlongdiv',\n  'mscarries',\n  'mscarry',\n  'msgroup',\n  'mstack',\n  'msline',\n  'msrow',\n  'semantics',\n  'annotation',\n  'annotation-xml',\n  'mprescripts',\n  'none',\n]);\n\nexport const text = freeze(['#text']);\n","import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'accept',\n  'action',\n  'align',\n  'alt',\n  'autocapitalize',\n  'autocomplete',\n  'autopictureinpicture',\n  'autoplay',\n  'background',\n  'bgcolor',\n  'border',\n  'capture',\n  'cellpadding',\n  'cellspacing',\n  'checked',\n  'cite',\n  'class',\n  'clear',\n  'color',\n  'cols',\n  'colspan',\n  'controls',\n  'controlslist',\n  'coords',\n  'crossorigin',\n  'datetime',\n  'decoding',\n  'default',\n  'dir',\n  'disabled',\n  'disablepictureinpicture',\n  'disableremoteplayback',\n  'download',\n  'draggable',\n  'enctype',\n  'enterkeyhint',\n  'face',\n  'for',\n  'headers',\n  'height',\n  'hidden',\n  'high',\n  'href',\n  'hreflang',\n  'id',\n  'inputmode',\n  'integrity',\n  'ismap',\n  'kind',\n  'label',\n  'lang',\n  'list',\n  'loading',\n  'loop',\n  'low',\n  'max',\n  'maxlength',\n  'media',\n  'method',\n  'min',\n  'minlength',\n  'multiple',\n  'muted',\n  'name',\n  'noshade',\n  'novalidate',\n  'nowrap',\n  'open',\n  'optimum',\n  'pattern',\n  'placeholder',\n  'playsinline',\n  'poster',\n  'preload',\n  'pubdate',\n  'radiogroup',\n  'readonly',\n  'rel',\n  'required',\n  'rev',\n  'reversed',\n  'role',\n  'rows',\n  'rowspan',\n  'spellcheck',\n  'scope',\n  'selected',\n  'shape',\n  'size',\n  'sizes',\n  'span',\n  'srclang',\n  'start',\n  'src',\n  'srcset',\n  'step',\n  'style',\n  'summary',\n  'tabindex',\n  'title',\n  'translate',\n  'type',\n  'usemap',\n  'valign',\n  'value',\n  'width',\n  'xmlns',\n  'slot',\n]);\n\nexport const svg = freeze([\n  'accent-height',\n  'accumulate',\n  'additive',\n  'alignment-baseline',\n  'ascent',\n  'attributename',\n  'attributetype',\n  'azimuth',\n  'basefrequency',\n  'baseline-shift',\n  'begin',\n  'bias',\n  'by',\n  'class',\n  'clip',\n  'clippathunits',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'diffuseconstant',\n  'direction',\n  'display',\n  'divisor',\n  'dur',\n  'edgemode',\n  'elevation',\n  'end',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'filterunits',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'fx',\n  'fy',\n  'g1',\n  'g2',\n  'glyph-name',\n  'glyphref',\n  'gradientunits',\n  'gradienttransform',\n  'height',\n  'href',\n  'id',\n  'image-rendering',\n  'in',\n  'in2',\n  'k',\n  'k1',\n  'k2',\n  'k3',\n  'k4',\n  'kerning',\n  'keypoints',\n  'keysplines',\n  'keytimes',\n  'lang',\n  'lengthadjust',\n  'letter-spacing',\n  'kernelmatrix',\n  'kernelunitlength',\n  'lighting-color',\n  'local',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'markerheight',\n  'markerunits',\n  'markerwidth',\n  'maskcontentunits',\n  'maskunits',\n  'max',\n  'mask',\n  'media',\n  'method',\n  'mode',\n  'min',\n  'name',\n  'numoctaves',\n  'offset',\n  'operator',\n  'opacity',\n  'order',\n  'orient',\n  'orientation',\n  'origin',\n  'overflow',\n  'paint-order',\n  'path',\n  'pathlength',\n  'patterncontentunits',\n  'patterntransform',\n  'patternunits',\n  'points',\n  'preservealpha',\n  'preserveaspectratio',\n  'primitiveunits',\n  'r',\n  'rx',\n  'ry',\n  'radius',\n  'refx',\n  'refy',\n  'repeatcount',\n  'repeatdur',\n  'restart',\n  'result',\n  'rotate',\n  'scale',\n  'seed',\n  'shape-rendering',\n  'specularconstant',\n  'specularexponent',\n  'spreadmethod',\n  'startoffset',\n  'stddeviation',\n  'stitchtiles',\n  'stop-color',\n  'stop-opacity',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke',\n  'stroke-width',\n  'style',\n  'surfacescale',\n  'systemlanguage',\n  'tabindex',\n  'targetx',\n  'targety',\n  'transform',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'textlength',\n  'type',\n  'u1',\n  'u2',\n  'unicode',\n  'values',\n  'viewbox',\n  'visibility',\n  'version',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'width',\n  'word-spacing',\n  'wrap',\n  'writing-mode',\n  'xchannelselector',\n  'ychannelselector',\n  'x',\n  'x1',\n  'x2',\n  'xmlns',\n  'y',\n  'y1',\n  'y2',\n  'z',\n  'zoomandpan',\n]);\n\nexport const mathMl = freeze([\n  'accent',\n  'accentunder',\n  'align',\n  'bevelled',\n  'close',\n  'columnsalign',\n  'columnlines',\n  'columnspan',\n  'denomalign',\n  'depth',\n  'dir',\n  'display',\n  'displaystyle',\n  'encoding',\n  'fence',\n  'frame',\n  'height',\n  'href',\n  'id',\n  'largeop',\n  'length',\n  'linethickness',\n  'lspace',\n  'lquote',\n  'mathbackground',\n  'mathcolor',\n  'mathsize',\n  'mathvariant',\n  'maxsize',\n  'minsize',\n  'movablelimits',\n  'notation',\n  'numalign',\n  'open',\n  'rowalign',\n  'rowlines',\n  'rowspacing',\n  'rowspan',\n  'rspace',\n  'rquote',\n  'scriptlevel',\n  'scriptminsize',\n  'scriptsizemultiplier',\n  'selection',\n  'separator',\n  'separators',\n  'stretchy',\n  'subscriptshift',\n  'supscriptshift',\n  'symmetric',\n  'voffset',\n  'width',\n  'xmlns',\n]);\n\nexport const xml = freeze([\n  'xlink:href',\n  'xml:id',\n  'xlink:title',\n  'xml:space',\n  'xmlns:xlink',\n]);\n","import { seal } from './utils.js';\n\n// eslint-disable-next-line unicorn/better-regex\nexport const MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nexport const ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\nexport const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nexport const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nexport const IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nexport const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nexport const ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\n","import * as TAGS from './tags.js';\nimport * as ATTRS from './attrs.js';\nimport * as EXPRESSIONS from './regexp.js';\nimport {\n  addToSet,\n  clone,\n  freeze,\n  arrayForEach,\n  arrayPop,\n  arrayPush,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringIndexOf,\n  stringTrim,\n  regExpTest,\n  typeErrorCreate,\n  lookupGetter,\n} from './utils.js';\n\nconst getGlobal = () => (typeof window === 'undefined' ? null : window);\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {Document} document The document object (to determine policy name suffix)\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported).\n */\nconst _createTrustedTypesPolicy = function (trustedTypes, document) {\n  if (\n    typeof trustedTypes !== 'object' ||\n    typeof trustedTypes.createPolicy !== 'function'\n  ) {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (\n    document.currentScript &&\n    document.currentScript.hasAttribute(ATTR_NAME)\n  ) {\n    suffix = document.currentScript.getAttribute(ATTR_NAME);\n  }\n\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn(\n      'TrustedTypes policy ' + policyName + ' could not be created.'\n    );\n    return null;\n  }\n};\n\nfunction createDOMPurify(window = getGlobal()) {\n  const DOMPurify = (root) => createDOMPurify(root);\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = VERSION;\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  const originalDocument = window.document;\n\n  let { document } = window;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    Text,\n    Comment,\n    DOMParser,\n    trustedTypes,\n  } = window;\n\n  const ElementPrototype = Element.prototype;\n\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  const trustedTypesPolicy = _createTrustedTypesPolicy(\n    trustedTypes,\n    originalDocument\n  );\n  const emptyHTML =\n    trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML('')\n      : '';\n\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName,\n  } = document;\n  const { importNode } = originalDocument;\n\n  let documentMode = {};\n  try {\n    documentMode = clone(document).documentMode ? document.documentMode : {};\n  } catch (_) {}\n\n  let hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported =\n    typeof getParentNode === 'function' &&\n    implementation &&\n    typeof implementation.createHTMLDocument !== 'undefined' &&\n    documentMode !== 9;\n\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n  } = EXPRESSIONS;\n\n  let { IS_ALLOWED_URI } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n    ...TAGS.html,\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.mathMl,\n    ...TAGS.text,\n  ]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n    ...ATTRS.html,\n    ...ATTRS.svg,\n    ...ATTRS.mathMl,\n    ...ATTRS.xml,\n  ]);\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n   * `Node` is imported into the current `Document`. If this flag is not enabled the\n   * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n   * DOMPurify.\n   *\n   * This defaults to `true` starting DOMPurify 2.2.0. Note that setting it to `false`\n   * might cause XSS from attacks hidden in closed shadowroots in case the browser\n   * supports Declarative Shadow: DOM https://web.dev/declarative-shadow-dom/\n   */\n  let RETURN_DOM_IMPORT = true;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks? */\n  let SANITIZE_DOM = true;\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, [\n    'annotation-xml',\n    'audio',\n    'colgroup',\n    'desc',\n    'foreignobject',\n    'head',\n    'iframe',\n    'math',\n    'mi',\n    'mn',\n    'mo',\n    'ms',\n    'mtext',\n    'noembed',\n    'noframes',\n    'noscript',\n    'plaintext',\n    'script',\n    'style',\n    'svg',\n    'template',\n    'thead',\n    'title',\n    'video',\n    'xmp',\n  ]);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n    'audio',\n    'video',\n    'img',\n    'source',\n    'image',\n    'track',\n  ]);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n    'alt',\n    'class',\n    'for',\n    'id',\n    'label',\n    'name',\n    'pattern',\n    'placeholder',\n    'role',\n    'summary',\n    'title',\n    'value',\n    'style',\n    'xmlns',\n  ]);\n\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc;\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function (cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS =\n      'ALLOWED_TAGS' in cfg\n        ? addToSet({}, cfg.ALLOWED_TAGS)\n        : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR =\n      'ALLOWED_ATTR' in cfg\n        ? addToSet({}, cfg.ALLOWED_ATTR)\n        : DEFAULT_ALLOWED_ATTR;\n    URI_SAFE_ATTRIBUTES =\n      'ADD_URI_SAFE_ATTR' in cfg\n        ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR)\n        : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS =\n      'ADD_DATA_URI_TAGS' in cfg\n        ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS)\n        : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS =\n      'FORBID_CONTENTS' in cfg\n        ? addToSet({}, cfg.FORBID_CONTENTS)\n        : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_DOM_IMPORT = cfg.RETURN_DOM_IMPORT !== false; // Default true\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n\n    PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1\n        ? (PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE)\n        : (PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE);\n\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc =\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml'\n        ? (x) => x\n        : stringToLowerCase;\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [...TAGS.text]);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, TAGS.html);\n        addToSet(ALLOWED_ATTR, ATTRS.html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svgFilters);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, TAGS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n    'mi',\n    'mo',\n    'mn',\n    'ms',\n    'mtext',\n  ]);\n\n  const HTML_INTEGRATION_POINTS = addToSet({}, [\n    'foreignobject',\n    'desc',\n    'title',\n    'annotation-xml',\n  ]);\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, TAGS.svg);\n  addToSet(ALL_SVG_TAGS, TAGS.svgFilters);\n  addToSet(ALL_SVG_TAGS, TAGS.svgDisallowed);\n\n  const ALL_MATHML_TAGS = addToSet({}, TAGS.mathMl);\n  addToSet(ALL_MATHML_TAGS, TAGS.mathMlDisallowed);\n\n  /**\n   *\n   *\n   * @param  {Element} element a DOM element whose namespace is being checked\n   * @returns {boolean} Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function (element) {\n    let parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: HTML_NAMESPACE,\n        tagName: 'template',\n      };\n    }\n\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return (\n          tagName === 'svg' &&\n          (parentTagName === 'annotation-xml' ||\n            MATHML_TEXT_INTEGRATION_POINTS[parentTagName])\n        );\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (\n        parent.namespaceURI === SVG_NAMESPACE &&\n        !HTML_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      if (\n        parent.namespaceURI === MATHML_NAMESPACE &&\n        !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      // Certain elements are allowed in both SVG and HTML\n      // namespace. We need to specify them explicitly\n      // so that they don't get erronously deleted from\n      // HTML namespace.\n      const commonSvgAndHTMLElements = addToSet({}, [\n        'title',\n        'style',\n        'font',\n        'a',\n        'script',\n      ]);\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return (\n        !ALL_MATHML_TAGS[tagName] &&\n        (commonSvgAndHTMLElements[tagName] || !ALL_SVG_TAGS[tagName])\n      );\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG or MathML). Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  const _forceRemove = function (node) {\n    arrayPush(DOMPurify.removed, { element: node });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      node.parentNode.removeChild(node);\n    } catch (_) {\n      try {\n        node.outerHTML = emptyHTML;\n      } catch (_) {\n        node.remove();\n      }\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  const _removeAttribute = function (name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node,\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node,\n      });\n    }\n\n    node.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\"\" attributes\n    if (name === 'is' && !ALLOWED_ATTR[name]) {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(node);\n        } catch (_) {}\n      } else {\n        try {\n          node.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  const _initDocument = function (dirty) {\n    /* Create a HTML document */\n    let doc;\n    let leadingWhitespace;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml') {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty =\n        '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' +\n        dirty +\n        '</body></html>';\n    }\n\n    const dirtyPayload = trustedTypesPolicy\n      ? trustedTypesPolicy.createHTML(dirty)\n      : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    const body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(\n        document.createTextNode(leadingWhitespace),\n        body.childNodes[0] || null\n      );\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(\n        doc,\n        WHOLE_DOCUMENT ? 'html' : 'body'\n      )[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n  const _createIterator = function (root) {\n    return createNodeIterator.call(\n      root.ownerDocument || root,\n      root,\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT,\n      null,\n      false\n    );\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  const _isClobbered = function (elm) {\n    if (elm instanceof Text || elm instanceof Comment) {\n      return false;\n    }\n\n    if (\n      typeof elm.nodeName !== 'string' ||\n      typeof elm.textContent !== 'string' ||\n      typeof elm.removeChild !== 'function' ||\n      !(elm.attributes instanceof NamedNodeMap) ||\n      typeof elm.removeAttribute !== 'function' ||\n      typeof elm.setAttribute !== 'function' ||\n      typeof elm.namespaceURI !== 'string' ||\n      typeof elm.insertBefore !== 'function'\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  const _isNode = function (object) {\n    return typeof Node === 'object'\n      ? object instanceof Node\n      : object &&\n          typeof object === 'object' &&\n          typeof object.nodeType === 'number' &&\n          typeof object.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  const _executeHook = function (entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    arrayForEach(hooks[entryPoint], (hook) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function (currentNode) {\n    let content;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check if tagname contains Unicode */\n    if (stringMatch(currentNode.nodeName, /[\\u0080-\\uFFFF]/)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS,\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (\n      !_isNode(currentNode.firstElementChild) &&\n      (!_isNode(currentNode.content) ||\n        !_isNode(currentNode.content.firstElementChild)) &&\n      regExpTest(/<[/\\w]/g, currentNode.innerHTML) &&\n      regExpTest(/<[/\\w]/g, currentNode.textContent)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Mitigate a problem with templates inside select */\n    if (\n      tagName === 'select' &&\n      regExpTest(/<template/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n\n          for (let i = childCount - 1; i >= 0; --i) {\n            parentNode.insertBefore(\n              cloneNode(childNodes[i], true),\n              getNextSibling(currentNode)\n            );\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    if (\n      (tagName === 'noscript' || tagName === 'noembed') &&\n      regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = stringReplace(content, MUSTACHE_EXPR, ' ');\n      content = stringReplace(content, ERB_EXPR, ' ');\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function (lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (\n      SANITIZE_DOM &&\n      (lcName === 'id' || lcName === 'name') &&\n      (value in document || value in formElement)\n    ) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (\n      ALLOW_DATA_ATTR &&\n      !FORBID_ATTR[lcName] &&\n      regExpTest(DATA_ATTR, lcName)\n    ) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      return false;\n\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (\n      regExpTest(IS_ALLOWED_URI, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if (\n      (lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') &&\n      lcTag !== 'script' &&\n      stringIndexOf(value, 'data:') === 0 &&\n      DATA_URI_TAGS[lcTag]\n    ) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (\n      ALLOW_UNKNOWN_PROTOCOLS &&\n      !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Check for binary attributes */\n      // eslint-disable-next-line no-negated-condition\n    } else if (!value) {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    } else {\n      return false;\n    }\n\n    return true;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  const _sanitizeAttributes = function (currentNode) {\n    let attr;\n    let value;\n    let lcName;\n    let l;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    const { attributes } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes) {\n      return;\n    }\n\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      const { name, namespaceURI } = attr;\n      value = stringTrim(attr.value);\n      lcName = transformCaseFunc(name);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        value = stringReplace(value, MUSTACHE_EXPR, ' ');\n        value = stringReplace(value, ERB_EXPR, ' ');\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        arrayPop(DOMPurify.removed);\n      } catch (_) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function (fragment) {\n    let shadowNode;\n    const shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while ((shadowNode = shadowIterator.nextNode())) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg) {\n    let body;\n    let importedNode;\n    let currentNode;\n    let oldNode;\n    let returnNode;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw typeErrorCreate('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      }\n    }\n\n    /* Check we can run. Otherwise fall back or ignore */\n    if (!DOMPurify.isSupported) {\n      if (\n        typeof window.toStaticHTML === 'object' ||\n        typeof window.toStaticHTML === 'function'\n      ) {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        }\n\n        if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* No special handling necessary for in-place sanitization */\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (\n        !RETURN_DOM &&\n        !SAFE_FOR_TEMPLATES &&\n        !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1\n      ) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n          ? trustedTypesPolicy.createHTML(dirty)\n          : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : emptyHTML;\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while ((currentNode = nodeIterator.nextNode())) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    oldNode = null;\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (RETURN_DOM_IMPORT) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR, ' ');\n      serializedHTML = stringReplace(serializedHTML, ERB_EXPR, ' ');\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML(serializedHTML)\n      : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      arrayPop(hooks[entryPoint]);\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nexport default createDOMPurify();\n","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Table = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  striped,\n  bordered,\n  borderless,\n  hover,\n  size,\n  variant,\n  responsive,\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  const classes = classNames(className, decoratedBsPrefix, variant && `${decoratedBsPrefix}-${variant}`, size && `${decoratedBsPrefix}-${size}`, striped && `${decoratedBsPrefix}-striped`, bordered && `${decoratedBsPrefix}-bordered`, borderless && `${decoratedBsPrefix}-borderless`, hover && `${decoratedBsPrefix}-hover`);\n\n  const table = /*#__PURE__*/_jsx(\"table\", { ...props,\n    className: classes,\n    ref: ref\n  });\n\n  if (responsive) {\n    let responsiveClass = `${decoratedBsPrefix}-responsive`;\n\n    if (typeof responsive === 'string') {\n      responsiveClass = `${responsiveClass}-${responsive}`;\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: responsiveClass,\n      children: table\n    });\n  }\n\n  return table;\n});\nexport default Table;"],"sourceRoot":""}