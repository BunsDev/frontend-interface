(this["webpackJsonpfrontend-interface"]=this["webpackJsonpfrontend-interface"]||[]).push([[15],{2823:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(4047),i=r(4048),u=r(2858),o=r(1225),s=r(2873),a=r(4049),c=r(2831);t.OPS=r(3005);var f=r(4050),p=t.OPS.OP_RESERVED;function h(e){return u.Buffer(e)||function(e){return u.Number(e)&&(e===t.OPS.OP_0||e>=t.OPS.OP_1&&e<=t.OPS.OP_16||e===t.OPS.OP_1NEGATE)}(e)}function l(e){return u.Array(e)&&e.every(h)}function d(e){return 0===e.length?t.OPS.OP_0:1===e.length?e[0]>=1&&e[0]<=16?p+e[0]:129===e[0]?t.OPS.OP_1NEGATE:void 0:void 0}function v(t){return e.isBuffer(t)}function y(t){return e.isBuffer(t)}function w(t){if(v(t))return t;c(u.Array,t);var r=t.reduce((function(e,t){return y(t)?1===t.length&&void 0!==d(t)?e+1:e+a.encodingLength(t.length)+t.length:e+1}),0),n=e.allocUnsafe(r),i=0;if(t.forEach((function(e){if(y(e)){var t=d(e);if(void 0!==t)return n.writeUInt8(t,i),void(i+=1);i+=a.encode(n,e.length,i),e.copy(n,i),i+=e.length}else n.writeUInt8(e,i),i+=1})),i!==n.length)throw new Error("Could not decode chunks");return n}function g(e){if(r=e,u.Array(r))return e;var r;c(u.Buffer,e);for(var n=[],i=0;i<e.length;){var o=e[i];if(o>t.OPS.OP_0&&o<=t.OPS.OP_PUSHDATA4){var s=a.decode(e,i);if(null===s)return null;if((i+=s.size)+s.number>e.length)return null;var f=e.slice(i,i+s.number);i+=s.number;var p=d(f);void 0!==p?n.push(p):n.push(f)}else n.push(o),i+=1}return n}function m(e){var t=-129&e;return t>0&&t<4}t.isPushOnly=l,t.compile=w,t.decompile=g,t.toASM=function(e){return v(e)&&(e=g(e)),e.map((function(e){if(y(e)){var t=d(e);if(void 0===t)return e.toString("hex");e=t}return f[e]})).join(" ")},t.fromASM=function(r){return c(u.String,r),w(r.split(" ").map((function(r){return void 0!==t.OPS[r]?t.OPS[r]:(c(u.Hex,r),e.from(r,"hex"))})))},t.toStack=function(r){return r=g(r),c(l,r),r.map((function(r){return y(r)?r:r===t.OPS.OP_0?e.allocUnsafe(0):n.encode(r-p)}))},t.isCanonicalPubKey=function(e){return s.isPoint(e)},t.isDefinedHashType=m,t.isCanonicalScriptSignature=function(t){return!!e.isBuffer(t)&&(!!m(t[t.length-1])&&o.check(t.slice(0,-1)))},t.number=n,t.signature=i}).call(this,r(5).Buffer)},2831:function(e,t,r){var n=r(3226),i=r(3099),u=n.tfJSON,o=n.TfTypeError,s=n.TfPropertyTypeError,a=n.tfSubError,c=n.getValueTypeName,f={arrayOf:function(e,t){function r(r,n){return!!i.Array(r)&&(!i.Nil(r)&&(!(void 0!==t.minLength&&r.length<t.minLength)&&(!(void 0!==t.maxLength&&r.length>t.maxLength)&&((void 0===t.length||r.length===t.length)&&r.every((function(t,r){try{return h(e,t,n)}catch(i){throw a(i,r)}}))))))}return e=p(e),t=t||{},r.toJSON=function(){var r="["+u(e)+"]";return void 0!==t.length?r+="{"+t.length+"}":void 0===t.minLength&&void 0===t.maxLength||(r+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,n){return i.Nil(r)||t(r,n,e)}return t=p(t),r.toJSON=function(){return"?"+u(t)},r},map:function(e,t){function r(r,n){if(!i.Object(r))return!1;if(i.Nil(r))return!1;for(var u in r){try{t&&h(t,u,n)}catch(s){throw a(s,u,"key")}try{var o=r[u];h(e,o,n)}catch(s){throw a(s,u)}}return!0}return e=p(e),t&&(t=p(t)),r.toJSON=t?function(){return"{"+u(t)+": "+u(e)+"}"}:function(){return"{"+u(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=p(e[r]);function n(e,r){if(!i.Object(e))return!1;if(i.Nil(e))return!1;var n;try{for(n in t){h(t[n],e[n],r)}}catch(u){throw a(u,n)}if(r)for(n in e)if(!t[n])throw new s(void 0,n);return!0}return n.toJSON=function(){return u(t)},n},anyOf:function(){var e=[].slice.call(arguments).map(p);function t(t,r){return e.some((function(e){try{return h(e,t,r)}catch(n){return!1}}))}return t.toJSON=function(){return e.map(u).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(p);function t(t,r){return e.every((function(e){try{return h(e,t,r)}catch(n){return!1}}))}return t.toJSON=function(){return e.map(u).join(" & ")},t},quacksLike:function(e){function t(t){return e===c(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(p);function t(t,r){return!i.Nil(t)&&(!i.Nil(t.length)&&((!r||t.length===e.length)&&e.every((function(e,n){try{return h(e,t[n],r)}catch(i){throw a(i,n)}}))))}return t.toJSON=function(){return"("+e.map(u).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function p(e){if(i.String(e))return"?"===e[0]?f.maybe(e.slice(1)):i[e]||f.quacksLike(e);if(e&&i.Object(e)){if(i.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return f.arrayOf(e[0])}return f.object(e)}return i.Function(e)?e:f.value(e)}function h(e,t,r,n){if(i.Function(e)){if(e(t,r))return!0;throw new o(n||e,t)}return h(p(e),t,r)}for(var l in f.oneOf=f.anyOf,i)h[l]=i[l];for(l in f)h[l]=f[l];var d=r(4045);for(l in d)h[l]=d[l];h.compile=p,h.TfTypeError=o,h.TfPropertyTypeError=s,e.exports=h},2847:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},2848:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(t.GlobalTypes||(t.GlobalTypes={})),t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT"}(t.InputTypes||(t.InputTypes={})),t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment"],function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION"}(t.OutputTypes||(t.OutputTypes={})),t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation"]},2858:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2831),i=Math.pow(2,31)-1;function u(e){return n.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return n.UInt32(e)&&e<=i},t.BIP32Path=u,u.toJSON=function(){return"BIP32 derivation path"},t.Signer=function(e){return(n.Buffer(e.publicKey)||"function"===typeof e.getPublicKey)&&"function"===typeof e.sign};t.Satoshi=function(e){return n.UInt53(e)&&e<=21e14},t.ECPoint=n.quacksLike("Point"),t.Network=n.compile({messagePrefix:n.oneOf(n.Buffer,n.String),bip32:{public:n.UInt32,private:n.UInt32},pubKeyHash:n.UInt8,scriptHash:n.UInt8,wif:n.UInt8}),t.Buffer256bit=n.BufferN(32),t.Hash160bit=n.BufferN(20),t.Hash256bit=n.BufferN(32),t.Number=n.Number,t.Array=n.Array,t.Boolean=n.Boolean,t.String=n.String,t.Buffer=n.Buffer,t.Hex=n.Hex,t.maybe=n.maybe,t.tuple=n.tuple,t.UInt8=n.UInt8,t.UInt32=n.UInt32,t.Function=n.Function,t.BufferN=n.BufferN,t.Null=n.Null,t.oneOf=n.oneOf},2866:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(83);function i(e){try{return n("rmd160").update(e).digest()}catch(t){return n("ripemd160").update(e).digest()}}function u(e){return n("sha256").update(e).digest()}t.ripemd160=i,t.sha1=function(e){return n("sha1").update(e).digest()},t.sha256=u,t.hash160=function(e){return i(u(e))},t.hash256=function(e){return u(u(e))}},2873:function(e,t,r){(function(t){var n=r(34),i=new(0,r(143).ec)("secp256k1"),u=r(4044),o=t.alloc(32,0),s=t.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),a=t.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),c=i.curve.n,f=c.shrn(1),p=i.curve.g,h="Expected Private",l="Expected Point",d="Expected Tweak",v="Expected Hash";function y(e){return t.isBuffer(e)&&32===e.length}function w(e){return!!y(e)&&e.compare(s)<0}function g(e){if(!t.isBuffer(e))return!1;if(e.length<33)return!1;var r=e[0],n=e.slice(1,33);if(0===n.compare(o))return!1;if(n.compare(a)>=0)return!1;if((2===r||3===r)&&33===e.length){try{k(e)}catch(u){return!1}return!0}var i=e.slice(33);return 0!==i.compare(o)&&(!(i.compare(a)>=0)&&(4===r&&65===e.length))}function m(e){return 4!==e[0]}function _(e){return!!y(e)&&(e.compare(o)>0&&e.compare(s)<0)}function S(e,t){return void 0===e&&void 0!==t?m(t):void 0===e||e}function b(e){return new n(e)}function E(e){return e.toArrayLike(t,"be",32)}function k(e){return i.curve.decodePoint(e)}function T(e,r){return t.from(e._encode(r))}function O(e,r,n){if(!y(e))throw new TypeError(v);if(!_(r))throw new TypeError(h);if(void 0!==n&&!y(n))throw new TypeError("Expected Extra Data (32 bytes)");var i,o,s=b(r),a=b(e);u(e,r,(function(e){var t=b(e),r=p.mul(t);return!r.isInfinity()&&(0!==(i=r.x.umod(c)).isZero()&&0!==(o=t.invm(c).mul(a.add(s.mul(i))).umod(c)).isZero())}),_,n),o.cmp(f)>0&&(o=c.sub(o));var l=t.allocUnsafe(64);return E(i).copy(l,0),E(o).copy(l,32),l}e.exports={isPoint:g,isPointCompressed:function(e){return!!g(e)&&m(e)},isPrivate:_,pointAdd:function(e,t,r){if(!g(e))throw new TypeError(l);if(!g(t))throw new TypeError(l);var n=k(e),i=k(t),u=n.add(i);return u.isInfinity()?null:T(u,S(r,e))},pointAddScalar:function(e,t,r){if(!g(e))throw new TypeError(l);if(!w(t))throw new TypeError(d);var n=S(r,e),i=k(e);if(0===t.compare(o))return T(i,n);var u=b(t),s=p.mul(u),a=i.add(s);return a.isInfinity()?null:T(a,n)},pointCompress:function(e,t){if(!g(e))throw new TypeError(l);var r=k(e);if(r.isInfinity())throw new TypeError(l);return T(r,S(t,e))},pointFromScalar:function(e,t){if(!_(e))throw new TypeError(h);var r=b(e),n=p.mul(r);return n.isInfinity()?null:T(n,S(t))},pointMultiply:function(e,t,r){if(!g(e))throw new TypeError(l);if(!w(t))throw new TypeError(d);var n=S(r,e),i=k(e),u=b(t),o=i.mul(u);return o.isInfinity()?null:T(o,n)},privateAdd:function(e,t){if(!_(e))throw new TypeError(h);if(!w(t))throw new TypeError(d);var r=b(e),n=b(t),i=E(r.add(n).umod(c));return _(i)?i:null},privateSub:function(e,t){if(!_(e))throw new TypeError(h);if(!w(t))throw new TypeError(d);var r=b(e),n=b(t),i=E(r.sub(n).umod(c));return _(i)?i:null},sign:function(e,t){return O(e,t)},signWithEntropy:function(e,t,r){return O(e,t,r)},verify:function(e,r,n,i){if(!y(e))throw new TypeError(v);if(!g(r))throw new TypeError(l);if(!function(e){var r=e.slice(0,32),n=e.slice(32,64);return t.isBuffer(e)&&64===e.length&&r.compare(s)<0&&n.compare(s)<0}(n))throw new TypeError("Expected Signature");var u=k(r),o=b(n.slice(0,32)),a=b(n.slice(32,64));if(i&&a.cmp(f)>0)return!1;if(o.gtn(0)<=0)return!1;if(a.gtn(0)<=0)return!1;var h=b(e),d=a.invm(c),w=h.mul(d).umod(c),m=o.mul(d).umod(c),_=p.mulAdd(w,u,m);return!_.isInfinity()&&_.x.umod(c).eq(o)}}}).call(this,r(5).Buffer)},2890:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=r.call(this);return this[t]=e,e},set:function(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){var t;return function(){return void 0!==t?t:t=e()}}},2945:function(e,t,r){"use strict";var n=r(83),i=r(4042);e.exports=i((function(e){var t=n("sha256").update(e).digest();return n("sha256").update(t).digest()}))},3004:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4046);t.embed=n.p2data;var i=r(4051);t.p2ms=i.p2ms;var u=r(4052);t.p2pk=u.p2pk;var o=r(4053);t.p2pkh=o.p2pkh;var s=r(4054);t.p2sh=s.p2sh;var a=r(4055);t.p2wpkh=a.p2wpkh;var c=r(4056);t.p2wsh=c.p2wsh},3005:function(e){e.exports=JSON.parse('{"OP_FALSE":0,"OP_0":0,"OP_PUSHDATA1":76,"OP_PUSHDATA2":77,"OP_PUSHDATA4":78,"OP_1NEGATE":79,"OP_RESERVED":80,"OP_TRUE":81,"OP_1":81,"OP_2":82,"OP_3":83,"OP_4":84,"OP_5":85,"OP_6":86,"OP_7":87,"OP_8":88,"OP_9":89,"OP_10":90,"OP_11":91,"OP_12":92,"OP_13":93,"OP_14":94,"OP_15":95,"OP_16":96,"OP_NOP":97,"OP_VER":98,"OP_IF":99,"OP_NOTIF":100,"OP_VERIF":101,"OP_VERNOTIF":102,"OP_ELSE":103,"OP_ENDIF":104,"OP_VERIFY":105,"OP_RETURN":106,"OP_TOALTSTACK":107,"OP_FROMALTSTACK":108,"OP_2DROP":109,"OP_2DUP":110,"OP_3DUP":111,"OP_2OVER":112,"OP_2ROT":113,"OP_2SWAP":114,"OP_IFDUP":115,"OP_DEPTH":116,"OP_DROP":117,"OP_DUP":118,"OP_NIP":119,"OP_OVER":120,"OP_PICK":121,"OP_ROLL":122,"OP_ROT":123,"OP_SWAP":124,"OP_TUCK":125,"OP_CAT":126,"OP_SUBSTR":127,"OP_LEFT":128,"OP_RIGHT":129,"OP_SIZE":130,"OP_INVERT":131,"OP_AND":132,"OP_OR":133,"OP_XOR":134,"OP_EQUAL":135,"OP_EQUALVERIFY":136,"OP_RESERVED1":137,"OP_RESERVED2":138,"OP_1ADD":139,"OP_1SUB":140,"OP_2MUL":141,"OP_2DIV":142,"OP_NEGATE":143,"OP_ABS":144,"OP_NOT":145,"OP_0NOTEQUAL":146,"OP_ADD":147,"OP_SUB":148,"OP_MUL":149,"OP_DIV":150,"OP_MOD":151,"OP_LSHIFT":152,"OP_RSHIFT":153,"OP_BOOLAND":154,"OP_BOOLOR":155,"OP_NUMEQUAL":156,"OP_NUMEQUALVERIFY":157,"OP_NUMNOTEQUAL":158,"OP_LESSTHAN":159,"OP_GREATERTHAN":160,"OP_LESSTHANOREQUAL":161,"OP_GREATERTHANOREQUAL":162,"OP_MIN":163,"OP_MAX":164,"OP_WITHIN":165,"OP_RIPEMD160":166,"OP_SHA1":167,"OP_SHA256":168,"OP_HASH160":169,"OP_HASH256":170,"OP_CODESEPARATOR":171,"OP_CHECKSIG":172,"OP_CHECKSIGVERIFY":173,"OP_CHECKMULTISIG":174,"OP_CHECKMULTISIGVERIFY":175,"OP_NOP1":176,"OP_NOP2":177,"OP_CHECKLOCKTIMEVERIFY":177,"OP_NOP3":178,"OP_CHECKSEQUENCEVERIFY":178,"OP_NOP4":179,"OP_NOP5":180,"OP_NOP6":181,"OP_NOP7":182,"OP_NOP8":183,"OP_NOP9":184,"OP_NOP10":185,"OP_PUBKEYHASH":253,"OP_PUBKEY":254,"OP_INVALIDOPCODE":255}')},3006:function(e,t,r){"use strict";(function(e){var n=r(11),i=r(26);Object.defineProperty(t,"__esModule",{value:!0});var u=r(2858),o=r(2831),s=r(3102);function a(e,t){if("number"!==typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function c(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return a((n*=4294967296)+r,9007199254740991),n+r}function f(e,t,r){return a(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}t.readUInt64LE=c,t.writeUInt64LE=f,t.reverseBuffer=function(e){if(e.length<1)return e;for(var t=e.length-1,r=0,n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.cloneBuffer=function(t){var r=e.allocUnsafe(t.length);return t.copy(r),r};var p=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.buffer=t,this.offset=r,o(u.tuple(u.Buffer,u.UInt32),[t,r])}return i(e,[{key:"writeUInt8",value:function(e){this.offset=this.buffer.writeUInt8(e,this.offset)}},{key:"writeInt32",value:function(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}},{key:"writeUInt32",value:function(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}},{key:"writeUInt64",value:function(e){this.offset=f(this.buffer,e,this.offset)}},{key:"writeVarInt",value:function(e){s.encode(e,this.buffer,this.offset),this.offset+=s.encode.bytes}},{key:"writeSlice",value:function(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}},{key:"writeVarSlice",value:function(e){this.writeVarInt(e.length),this.writeSlice(e)}},{key:"writeVector",value:function(e){var t=this;this.writeVarInt(e.length),e.forEach((function(e){return t.writeVarSlice(e)}))}}]),e}();t.BufferWriter=p;var h=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.buffer=t,this.offset=r,o(u.tuple(u.Buffer,u.UInt32),[t,r])}return i(e,[{key:"readUInt8",value:function(){var e=this.buffer.readUInt8(this.offset);return this.offset++,e}},{key:"readInt32",value:function(){var e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}},{key:"readUInt32",value:function(){var e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}},{key:"readUInt64",value:function(){var e=c(this.buffer,this.offset);return this.offset+=8,e}},{key:"readVarInt",value:function(){var e=s.decode(this.buffer,this.offset);return this.offset+=s.decode.bytes,e}},{key:"readSlice",value:function(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");var t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"readVarSlice",value:function(){return this.readSlice(this.readVarInt())}},{key:"readVector",value:function(){for(var e=this.readVarInt(),t=[],r=0;r<e;r++)t.push(this.readVarSlice());return t}}]),e}();t.BufferReader=h}).call(this,r(5).Buffer)},3007:function(e,t,r){"use strict";(function(e){var n=r(11),i=r(26);Object.defineProperty(t,"__esModule",{value:!0});var u=r(3006),o=r(2866),s=r(2823),a=r(2823),c=r(2858),f=r(2831),p=r(3102);function h(e){var t=e.length;return p.encodingLength(t)+t}function l(e){var t=e.length;return p.encodingLength(t)+e.reduce((function(e,t){return e+h(t)}),0)}var d=e.allocUnsafe(0),v=[],y=e.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),w=e.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),g=e.from("ffffffffffffffff","hex"),m={script:d,valueBuffer:g};function _(e){return void 0!==e.value}var S=function(){function t(){n(this,t),this.version=1,this.locktime=0,this.ins=[],this.outs=[]}return i(t,[{key:"isCoinbase",value:function(){return 1===this.ins.length&&t.isCoinbaseHash(this.ins[0].hash)}},{key:"addInput",value:function(e,r,n,i){return f(c.tuple(c.Hash256bit,c.UInt32,c.maybe(c.UInt32),c.maybe(c.Buffer)),arguments),c.Null(n)&&(n=t.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:r,script:i||d,sequence:n,witness:v})-1}},{key:"addOutput",value:function(e,t){return f(c.tuple(c.Buffer,c.Satoshi),arguments),this.outs.push({script:e,value:t})-1}},{key:"hasWitnesses",value:function(){return this.ins.some((function(e){return 0!==e.witness.length}))}},{key:"weight",value:function(){return 3*this.byteLength(!1)+this.byteLength(!0)}},{key:"virtualSize",value:function(){return Math.ceil(this.weight()/4)}},{key:"byteLength",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e&&this.hasWitnesses();return(t?10:8)+p.encodingLength(this.ins.length)+p.encodingLength(this.outs.length)+this.ins.reduce((function(e,t){return e+40+h(t.script)}),0)+this.outs.reduce((function(e,t){return e+8+h(t.script)}),0)+(t?this.ins.reduce((function(e,t){return e+l(t.witness)}),0):0)}},{key:"clone",value:function(){var e=new t;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((function(e){return{hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}})),e.outs=this.outs.map((function(e){return{script:e.script,value:e.value}})),e}},{key:"hashForSignature",value:function(r,n,i){if(f(c.tuple(c.UInt32,c.Buffer,c.Number),arguments),r>=this.ins.length)return w;var u=s.compile(s.decompile(n).filter((function(e){return e!==a.OPS.OP_CODESEPARATOR}))),p=this.clone();if((31&i)===t.SIGHASH_NONE)p.outs=[],p.ins.forEach((function(e,t){t!==r&&(e.sequence=0)}));else if((31&i)===t.SIGHASH_SINGLE){if(r>=this.outs.length)return w;p.outs.length=r+1;for(var h=0;h<r;h++)p.outs[h]=m;p.ins.forEach((function(e,t){t!==r&&(e.sequence=0)}))}i&t.SIGHASH_ANYONECANPAY?(p.ins=[p.ins[r]],p.ins[0].script=u):(p.ins.forEach((function(e){e.script=d})),p.ins[r].script=u);var l=e.allocUnsafe(p.byteLength(!1)+4);return l.writeInt32LE(i,l.length-4),p.__toBuffer(l,0,!1),o.hash256(l)}},{key:"hashForWitnessV0",value:function(r,n,i,s){f(c.tuple(c.UInt32,c.Buffer,c.Satoshi,c.UInt32),arguments);var a,p=e.from([]),l=y,d=y,v=y;if(s&t.SIGHASH_ANYONECANPAY||(p=e.allocUnsafe(36*this.ins.length),a=new u.BufferWriter(p,0),this.ins.forEach((function(e){a.writeSlice(e.hash),a.writeUInt32(e.index)})),d=o.hash256(p)),s&t.SIGHASH_ANYONECANPAY||(31&s)===t.SIGHASH_SINGLE||(31&s)===t.SIGHASH_NONE||(p=e.allocUnsafe(4*this.ins.length),a=new u.BufferWriter(p,0),this.ins.forEach((function(e){a.writeUInt32(e.sequence)})),v=o.hash256(p)),(31&s)!==t.SIGHASH_SINGLE&&(31&s)!==t.SIGHASH_NONE){var w=this.outs.reduce((function(e,t){return e+8+h(t.script)}),0);p=e.allocUnsafe(w),a=new u.BufferWriter(p,0),this.outs.forEach((function(e){a.writeUInt64(e.value),a.writeVarSlice(e.script)})),l=o.hash256(p)}else if((31&s)===t.SIGHASH_SINGLE&&r<this.outs.length){var g=this.outs[r];p=e.allocUnsafe(8+h(g.script)),(a=new u.BufferWriter(p,0)).writeUInt64(g.value),a.writeVarSlice(g.script),l=o.hash256(p)}p=e.allocUnsafe(156+h(n)),a=new u.BufferWriter(p,0);var m=this.ins[r];return a.writeUInt32(this.version),a.writeSlice(d),a.writeSlice(v),a.writeSlice(m.hash),a.writeUInt32(m.index),a.writeVarSlice(n),a.writeUInt64(i),a.writeUInt32(m.sequence),a.writeSlice(l),a.writeUInt32(this.locktime),a.writeUInt32(s),o.hash256(p)}},{key:"getHash",value:function(t){return t&&this.isCoinbase()?e.alloc(32,0):o.hash256(this.__toBuffer(void 0,void 0,t))}},{key:"getId",value:function(){return u.reverseBuffer(this.getHash(!1)).toString("hex")}},{key:"toBuffer",value:function(e,t){return this.__toBuffer(e,t,!0)}},{key:"toHex",value:function(){return this.toBuffer(void 0,void 0).toString("hex")}},{key:"setInputScript",value:function(e,t){f(c.tuple(c.Number,c.Buffer),arguments),this.ins[e].script=t}},{key:"setWitness",value:function(e,t){f(c.tuple(c.Number,[c.Buffer]),arguments),this.ins[e].witness=t}},{key:"__toBuffer",value:function(r,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r||(r=e.allocUnsafe(this.byteLength(i)));var o=new u.BufferWriter(r,n||0);o.writeInt32(this.version);var s=i&&this.hasWitnesses();return s&&(o.writeUInt8(t.ADVANCED_TRANSACTION_MARKER),o.writeUInt8(t.ADVANCED_TRANSACTION_FLAG)),o.writeVarInt(this.ins.length),this.ins.forEach((function(e){o.writeSlice(e.hash),o.writeUInt32(e.index),o.writeVarSlice(e.script),o.writeUInt32(e.sequence)})),o.writeVarInt(this.outs.length),this.outs.forEach((function(e){_(e)?o.writeUInt64(e.value):o.writeSlice(e.valueBuffer),o.writeVarSlice(e.script)})),s&&this.ins.forEach((function(e){o.writeVector(e.witness)})),o.writeUInt32(this.locktime),void 0!==n?r.slice(n,o.offset):r}}],[{key:"fromBuffer",value:function(e,r){var n=new u.BufferReader(e),i=new t;i.version=n.readInt32();var o=n.readUInt8(),s=n.readUInt8(),a=!1;o===t.ADVANCED_TRANSACTION_MARKER&&s===t.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;for(var c=n.readVarInt(),f=0;f<c;++f)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:v});for(var p=n.readVarInt(),h=0;h<p;++h)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(a){for(var l=0;l<c;++l)i.ins[l].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==e.length)throw new Error("Transaction has unexpected data");return i}},{key:"fromHex",value:function(r){return t.fromBuffer(e.from(r,"hex"),!1)}},{key:"isCoinbaseHash",value:function(e){f(c.Hash256bit,e);for(var t=0;t<32;++t)if(0!==e[t])return!1;return!0}}]),t}();S.DEFAULT_SEQUENCE=4294967295,S.SIGHASH_ALL=1,S.SIGHASH_NONE=2,S.SIGHASH_SINGLE=3,S.SIGHASH_ANYONECANPAY=128,S.ADVANCED_TRANSACTION_MARKER=0,S.ADVANCED_TRANSACTION_FLAG=1,t.Transaction=S}).call(this,r(5).Buffer)},3008:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});function r(e){if(e<0||e>9007199254740991||e%1!==0)throw new RangeError("value out of range")}function n(e){return r(e),e<253?1:e<=65535?3:e<=4294967295?5:9}t.encode=function t(i,u,o){if(r(i),u||(u=e.allocUnsafe(n(i))),!e.isBuffer(u))throw new TypeError("buffer must be a Buffer instance");return o||(o=0),i<253?(u.writeUInt8(i,o),Object.assign(t,{bytes:1})):i<=65535?(u.writeUInt8(253,o),u.writeUInt16LE(i,o+1),Object.assign(t,{bytes:3})):i<=4294967295?(u.writeUInt8(254,o),u.writeUInt32LE(i,o+1),Object.assign(t,{bytes:5})):(u.writeUInt8(255,o),u.writeUInt32LE(i>>>0,o+1),u.writeUInt32LE(i/4294967296|0,o+5),Object.assign(t,{bytes:9})),u},t.decode=function t(n,i){if(!e.isBuffer(n))throw new TypeError("buffer must be a Buffer instance");i||(i=0);var u=n.readUInt8(i);if(u<253)return Object.assign(t,{bytes:1}),u;if(253===u)return Object.assign(t,{bytes:3}),n.readUInt16LE(i+1);if(254===u)return Object.assign(t,{bytes:5}),n.readUInt32LE(i+1);Object.assign(t,{bytes:9});var o=n.readUInt32LE(i+1),s=4294967296*n.readUInt32LE(i+5)+o;return r(s),s},t.encodingLength=n}).call(this,r(5).Buffer)},3015:function(e,t,r){"use strict";var n=r(2),i=r(30),u=r(31),o=r.n(u),s=r(0),a=(r(343),r(181)),c=r(754),f=r(38),p=r(28),h=r(177),l=r(459),d=r(115),v=r(1),y=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],w=s.forwardRef((function(e,t){var r=e.bsPrefix,u=e.active,s=e.disabled,a=e.eventKey,c=e.className,w=e.variant,g=e.action,m=e.as,_=Object(i.a)(e,y);r=Object(f.a)(r,"list-group-item");var S=Object(l.b)(Object(n.a)({key:Object(d.b)(a,_.href),active:u},_)),b=Object(p.a)(S,2),E=b[0],k=b[1],T=Object(h.a)((function(e){if(s)return e.preventDefault(),void e.stopPropagation();E.onClick(e)}));s&&void 0===_.tabIndex&&(_.tabIndex=-1,_["aria-disabled"]=!0);var O=m||(g?_.href?"a":"button":"div");return Object(v.jsx)(O,Object(n.a)(Object(n.a)(Object(n.a)({ref:t},_),E),{},{onClick:T,className:o()(c,r,k.isActive&&"active",s&&"disabled",w&&"".concat(r,"-").concat(w),g&&"".concat(r,"-action"))}))}));w.displayName="ListGroupItem";var g=w,m=["className","bsPrefix","variant","horizontal","as"],_=s.forwardRef((function(e,t){var r,u=Object(a.a)(e,{activeKey:"onSelect"}),s=u.className,p=u.bsPrefix,h=u.variant,l=u.horizontal,d=u.as,y=void 0===d?"div":d,w=Object(i.a)(u,m),g=Object(f.a)(p,"list-group");return l&&(r=!0===l?"horizontal":"horizontal-".concat(l)),Object(v.jsx)(c.a,Object(n.a)(Object(n.a)({ref:t},w),{},{as:y,className:o()(s,g,h&&"".concat(g,"-").concat(h),r&&"".concat(g,"-").concat(r))}))}));_.displayName="ListGroup";t.a=Object.assign(_,{Item:g})},3096:function(e,t,r){(function(t){var n=r(572).pbkdf2Sync,i=2147483647;function u(e,r,n,i,u){if(t.isBuffer(e)&&t.isBuffer(n))e.copy(n,i,r,r+u);else for(;u--;)n[i++]=e[r++]}e.exports=function(e,r,o,s,a,c,f){if(0===o||0!==(o&o-1))throw Error("N must be > 0 and a power of 2");if(o>i/128/s)throw Error("Parameter N is too large");if(s>i/128/a)throw Error("Parameter r is too large");var p,h=new t(256*s),l=new t(128*s*o),d=new Int32Array(16),v=new Int32Array(16),y=new t(64),w=n(e,r,1,128*a*s,"sha256");if(f){var g=a*o*2,m=0;p=function(){++m%1e3===0&&f({current:m,total:g,percent:m/g*100})}}for(var _=0;_<a;_++)S(w,128*_*s,s,o,l,h);return n(e,w,1,c,"sha256");function S(e,t,r,n,i,u){var o,s=128*r;for(e.copy(u,0,t,t+s),o=0;o<n;o++)u.copy(i,o*s,0,0+s),b(u,0,s,r),p&&p();for(o=0;o<n;o++){var a=0+64*(2*r-1);T(i,(u.readUInt32LE(a)&n-1)*s,u,0,s),b(u,0,s,r),p&&p()}u.copy(e,t,0,0+s)}function b(e,t,r,n){var i;for(u(e,t+64*(2*n-1),y,0,64),i=0;i<2*n;i++)T(e,64*i,y,0,64),k(y),u(y,0,e,r+64*i,64);for(i=0;i<n;i++)u(e,r+2*i*64,e,t+64*i,64);for(i=0;i<n;i++)u(e,r+64*(2*i+1),e,t+64*(i+n),64)}function E(e,t){return e<<t|e>>>32-t}function k(e){var t;for(t=0;t<16;t++)d[t]=(255&e[4*t+0])<<0,d[t]|=(255&e[4*t+1])<<8,d[t]|=(255&e[4*t+2])<<16,d[t]|=(255&e[4*t+3])<<24;for(u(d,0,v,0,16),t=8;t>0;t-=2)v[4]^=E(v[0]+v[12],7),v[8]^=E(v[4]+v[0],9),v[12]^=E(v[8]+v[4],13),v[0]^=E(v[12]+v[8],18),v[9]^=E(v[5]+v[1],7),v[13]^=E(v[9]+v[5],9),v[1]^=E(v[13]+v[9],13),v[5]^=E(v[1]+v[13],18),v[14]^=E(v[10]+v[6],7),v[2]^=E(v[14]+v[10],9),v[6]^=E(v[2]+v[14],13),v[10]^=E(v[6]+v[2],18),v[3]^=E(v[15]+v[11],7),v[7]^=E(v[3]+v[15],9),v[11]^=E(v[7]+v[3],13),v[15]^=E(v[11]+v[7],18),v[1]^=E(v[0]+v[3],7),v[2]^=E(v[1]+v[0],9),v[3]^=E(v[2]+v[1],13),v[0]^=E(v[3]+v[2],18),v[6]^=E(v[5]+v[4],7),v[7]^=E(v[6]+v[5],9),v[4]^=E(v[7]+v[6],13),v[5]^=E(v[4]+v[7],18),v[11]^=E(v[10]+v[9],7),v[8]^=E(v[11]+v[10],9),v[9]^=E(v[8]+v[11],13),v[10]^=E(v[9]+v[8],18),v[12]^=E(v[15]+v[14],7),v[13]^=E(v[12]+v[15],9),v[14]^=E(v[13]+v[12],13),v[15]^=E(v[14]+v[13],18);for(t=0;t<16;++t)d[t]=v[t]+d[t];for(t=0;t<16;t++){var r=4*t;e[r+0]=d[t]>>0&255,e[r+1]=d[t]>>8&255,e[r+2]=d[t]>>16&255,e[r+3]=d[t]>>24&255}}function T(e,t,r,n,i){for(var u=0;u<i;u++)r[n+u]^=e[t+u]}}}).call(this,r(5).Buffer)},3099:function(e,t){var r={Array:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return null!==e&&void 0!==e&&e.constructor===Array})),Boolean:function(e){return"boolean"===typeof e},Function:function(e){return"function"===typeof e},Nil:function(e){return void 0===e||null===e},Number:function(e){return"number"===typeof e},Object:function(e){return"object"===typeof e},String:function(e){return"string"===typeof e},"":function(){return!0}};for(var n in r.Null=r.Nil,r)r[n].toJSON=function(e){return e}.bind(null,n);e.exports=r},3100:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2847),i=r(3004),u=r(2823),o=r(2858),s=r(577),a=r(2945),c=r(2831);function f(e){var t=a.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function p(t){var r=s.decode(t),n=s.fromWords(r.words.slice(1));return{version:r.words[0],prefix:r.prefix,data:e.from(n)}}t.fromBase58Check=f,t.fromBech32=p,t.toBase58Check=function(t,r){c(o.tuple(o.Hash160bit,o.UInt8),arguments);var n=e.allocUnsafe(21);return n.writeUInt8(r,0),t.copy(n,1),a.encode(n)},t.toBech32=function(e,t,r){var n=s.toWords(e);return n.unshift(t),s.encode(r,n)},t.fromOutputScript=function(e,t){t=t||n.bitcoin;try{return i.p2pkh({output:e,network:t}).address}catch(r){}try{return i.p2sh({output:e,network:t}).address}catch(r){}try{return i.p2wpkh({output:e,network:t}).address}catch(r){}try{return i.p2wsh({output:e,network:t}).address}catch(r){}throw new Error(u.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){var r,u;t=t||n.bitcoin;try{r=f(e)}catch(o){}if(r){if(r.version===t.pubKeyHash)return i.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return i.p2sh({hash:r.hash}).output}else{try{u=p(e)}catch(o){}if(u){if(u.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===u.version){if(20===u.data.length)return i.p2wpkh({hash:u.data}).output;if(32===u.data.length)return i.p2wsh({hash:u.data}).output}}}throw new Error(e+" has no matching Script")}}).call(this,r(5).Buffer)},3101:function(e,t,r){"use strict";(function(e){var n=r(11),i=r(26);Object.defineProperty(t,"__esModule",{value:!0});var u=r(2847),o=r(2858),s=r(2873),a=r(239),c=r(2831),f=r(3227),p=c.maybe(c.compile({compressed:o.maybe(o.Boolean),network:o.maybe(o.Network)})),h=function(){function t(e,r,i){n(this,t),this.__D=e,this.__Q=r,this.lowR=!1,void 0===i&&(i={}),this.compressed=void 0===i.compressed||i.compressed,this.network=i.network||u.bitcoin,void 0!==r&&(this.__Q=s.pointCompress(r,this.compressed))}return i(t,[{key:"privateKey",get:function(){return this.__D}},{key:"publicKey",get:function(){return this.__Q||(this.__Q=s.pointFromScalar(this.__D,this.compressed)),this.__Q}},{key:"toWIF",value:function(){if(!this.__D)throw new Error("Missing private key");return f.encode(this.network.wif,this.__D,this.compressed)}},{key:"sign",value:function(t,r){if(!this.__D)throw new Error("Missing private key");if(void 0===r&&(r=this.lowR),!1===r)return s.sign(t,this.__D);for(var n=s.sign(t,this.__D),i=e.alloc(32,0),u=0;n[0]>127;)u++,i.writeUIntLE(u,0,6),n=s.signWithEntropy(t,this.__D,i);return n}},{key:"verify",value:function(e,t){return s.verify(e,this.publicKey,t)}}]),t}();function l(e,t){if(c(o.Buffer256bit,e),!s.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return c(p,t),new h(e,void 0,t)}t.fromPrivateKey=l,t.fromPublicKey=function(e,t){return c(s.isPoint,e),c(p,t),new h(void 0,e,t)},t.fromWIF=function(e,t){var r=f.decode(e),n=r.version;if(o.Array(t)){if(!(t=t.filter((function(e){return n===e.wif})).pop()))throw new Error("Unknown network version")}else if(t=t||u.bitcoin,n!==t.wif)throw new Error("Invalid network version");return l(r.privateKey,{compressed:r.compressed,network:t})},t.makeRandom=function(e){c(p,e),void 0===e&&(e={});var t,r=e.rng||a;do{t=r(32),c(o.Buffer256bit,t)}while(!s.isPrivate(t));return l(t,e)}}).call(this,r(5).Buffer)},3102:function(e,t,r){"use strict";var n=r(54).Buffer;function i(e){if(e<0||e>9007199254740991||e%1!==0)throw new RangeError("value out of range")}function u(e){return i(e),e<253?1:e<=65535?3:e<=4294967295?5:9}e.exports={encode:function e(t,r,o){if(i(t),r||(r=n.allocUnsafe(u(t))),!n.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return o||(o=0),t<253?(r.writeUInt8(t,o),e.bytes=1):t<=65535?(r.writeUInt8(253,o),r.writeUInt16LE(t,o+1),e.bytes=3):t<=4294967295?(r.writeUInt8(254,o),r.writeUInt32LE(t,o+1),e.bytes=5):(r.writeUInt8(255,o),r.writeUInt32LE(t>>>0,o+1),r.writeUInt32LE(t/4294967296|0,o+5),e.bytes=9),r},decode:function e(t,r){if(!n.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var u=t.readUInt8(r);if(u<253)return e.bytes=1,u;if(253===u)return e.bytes=3,t.readUInt16LE(r+1);if(254===u)return e.bytes=5,t.readUInt32LE(r+1);e.bytes=9;var o=t.readUInt32LE(r+1),s=4294967296*t.readUInt32LE(r+5)+o;return i(s),s},encodingLength:u}},3103:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848),i=r(4063),u=r(4064),o=r(4065),s=r(4066),a=r(4067),c=r(4068),f=r(4069),p=r(4070),h=r(4071),l=r(4072),d=r(4073),v=r(4074),y=r(4075),w={unsignedTx:u,globalXpub:i,checkPubkey:d.makeChecker([])};t.globals=w;var g={nonWitnessUtxo:a,partialSig:c,sighashType:p,finalScriptSig:o,finalScriptWitness:s,porCommitment:f,witnessUtxo:h,bip32Derivation:l.makeConverter(n.InputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(n.InputTypes.REDEEM_SCRIPT),witnessScript:y.makeConverter(n.InputTypes.WITNESS_SCRIPT),checkPubkey:d.makeChecker([n.InputTypes.PARTIAL_SIG,n.InputTypes.BIP32_DERIVATION])};t.inputs=g;var m={bip32Derivation:l.makeConverter(n.OutputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(n.OutputTypes.REDEEM_SCRIPT),witnessScript:y.makeConverter(n.OutputTypes.WITNESS_SCRIPT),checkPubkey:d.makeChecker([n.OutputTypes.BIP32_DERIVATION])};t.outputs=m},3104:function(e,t,r){"use strict";(function(e){var n=r(255);Object.defineProperty(t,"__esModule",{value:!0});var i=r(3008);function u(t){var r=t.key.length,n=t.value.length,u=i.encodingLength(r),o=i.encodingLength(n),s=e.allocUnsafe(u+r+o+n);return i.encode(r,s,0),t.key.copy(s,u),i.encode(n,s,u+r),t.value.copy(s,u+r+o),s}function o(e,t){if("number"!==typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}t.range=function(e){return n(Array(e).keys())},t.reverseBuffer=function(e){if(e.length<1)return e;for(var t=e.length-1,r=0,n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.keyValsToBuffer=function(t){var r=t.map(u);return r.push(e.from([0])),e.concat(r)},t.keyValToBuffer=u,t.readUInt64LE=function(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return o((n*=4294967296)+r,9007199254740991),n+r},t.writeUInt64LE=function(e,t,r){return o(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}}).call(this,r(5).Buffer)},3105:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4079);t.input=n;var i=r(4080);t.output=i},3106:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4082);t.input=n;var i=r(4083);t.output=i},3107:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4084);t.input=n;var i=r(4085);t.output=i},3226:function(e,t,r){var n=r(3099);function i(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function u(e){return n.Nil(e)?"":i(e.constructor)}function o(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function s(e){return n.Function(e)?e.toJSON?e.toJSON():i(e):n.Array(e)?"Array":e&&n.Object(e)?"Object":void 0!==e?e:""}function a(e,t,r){var i=function(e){return n.Function(e)?"":n.String(e)?JSON.stringify(e):e&&n.Object(e)?"":e}(t);return"Expected "+s(e)+", got"+(""!==r?" "+r:"")+(""!==i?" "+i:"")}function c(e,t,r){r=r||u(t),this.message=a(e,t,r),o(this,c),this.__type=e,this.__value=t,this.__valueTypeName=r}function f(e,t,r,n,i){e?(i=i||u(n),this.message=function(e,t,r,n,i){var u='" of type ';return"key"===t&&(u='" with key type '),a('property "'+s(r)+u+s(e),n,i)}(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',o(this,c),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,f.prototype=Object.create(Error.prototype),f.prototype.constructor=c,e.exports={TfTypeError:c,TfPropertyTypeError:f,tfCustomError:function(e,t){return new c(e,{},t)},tfSubError:function(e,t,r){return e instanceof f?(t=t+"."+e.__property,e=new f(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof c&&(e=new f(e.__type,t,r,e.__value,e.__valueTypeName)),o(e),e},tfJSON:s,getValueTypeName:u}},3227:function(e,t,r){(function(t){var n=r(2945);function i(e,t){if(void 0!==t&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function u(e,r,n){var i=new t(n?34:33);return i.writeUInt8(e,0),r.copy(i,1),n&&(i[33]=1),i}e.exports={decode:function(e,t){return i(n.decode(e),t)},decodeRaw:i,encode:function(e,t,r){return"number"===typeof e?n.encode(u(e,t,r)):n.encode(u(e.version,e.privateKey,e.compressed))},encodeRaw:u}}).call(this,r(5).Buffer)},3228:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(4062)),n(r(4076))},3229:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(3103);function i(e,t){var r=e[t];if(void 0===r)throw new Error("No input #".concat(t));return r}function u(e,t,r,n){throw new Error("Data for ".concat(e," key ").concat(t," is incorrect: Expected ")+"".concat(r," and got ").concat(JSON.stringify(n)))}function o(e){return function(t,r){for(var i=function(){var i=s[o],a=t[i],c=n[e+"s"][i]||{},f=c.canAdd,p=c.canAddToArray,h=c.check,l=c.expected;if(h)if(!!p){if(!Array.isArray(a)||r[i]&&!Array.isArray(r[i]))throw new Error("Key type ".concat(i," must be an array"));a.every(h)||u(e,i,l,a);var d=r[i]||[],v=new Set;if(!a.every((function(e){return p(d,e,v)})))throw new Error("Can not add duplicate data to array");r[i]=d.concat(a)}else{if(h(a)||u(e,i,l,a),!f(r,a))throw new Error("Can not add duplicate data to ".concat(e));r[i]=a}},o=0,s=Object.keys(t);o<s.length;o++)i()}}t.checkForInput=i,t.checkForOutput=function(e,t){var r=e[t];if(void 0===r)throw new Error("No output #".concat(t));return r},t.checkHasKey=function(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter((function(t){return t.key.equals(e.key)})).length)throw new Error("Duplicate Key: ".concat(e.key.toString("hex")))},t.getEnumLength=function(e){var t=0;return Object.keys(e).forEach((function(e){Number(isNaN(Number(e)))&&t++})),t},t.inputCheckUncleanFinalized=function(e,t){var r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){var n=!!t.redeemScript,i=!!t.witnessScript,u=!n||!!t.finalScriptSig,o=!i||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=u&&o&&s}if(!1===r)throw new Error("Input #".concat(e," has too much or too little data to clean"))},t.updateGlobal=o("global"),t.updateInput=o("input"),t.updateOutput=o("output"),t.addInputAttributes=function(e,r){var n=i(e,e.length-1);t.updateInput(r,n)},t.addOutputAttributes=function(e,r){var n=i(e,e.length-1);t.updateOutput(r,n)},t.defaultVersionSetter=function(t,r){if(!e.isBuffer(r)||r.length<4)throw new Error("Set Version: Invalid Transaction");return r.writeUInt32LE(t,0),r},t.defaultLocktimeSetter=function(t,r){if(!e.isBuffer(r)||r.length<4)throw new Error("Set Locktime: Invalid Transaction");return r.writeUInt32LE(t,r.length-4),r}}).call(this,r(5).Buffer)},3230:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2823);function u(e){var t=n.compile(e);return 22===t.length&&t[0]===i.OPS.OP_0&&20===t[1]}t.check=u,u.toJSON=function(){return"Witness pubKeyHash output"}},3231:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2823);function u(e){var t=n.compile(e);return 34===t.length&&t[0]===i.OPS.OP_0&&32===t[1]}t.check=u,u.toJSON=function(){return"Witness scriptHash output"}},3232:function(e,t){e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},3233:function(e,t){e.exports={L:1,M:0,Q:3,H:2}},3234:function(e,t,r){var n=r(3235);function i(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}i.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var u=0;u<e.getLength();u++)t[r+u]^=n.gexp(n.glog(this.get(r))+n.glog(e.get(u)));return new i(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=n.glog(this.get(0))-n.glog(e.get(0)),r=new Array(this.getLength()),u=0;u<this.getLength();u++)r[u]=this.get(u);for(u=0;u<e.getLength();u++)r[u]^=n.gexp(n.glog(e.get(u))+t);return new i(r,0).mod(e)}},e.exports=i},3235:function(e,t){for(var r={glog:function(e){if(e<1)throw new Error("glog("+e+")");return r.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return r.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},n=0;n<8;n++)r.EXP_TABLE[n]=1<<n;for(n=8;n<256;n++)r.EXP_TABLE[n]=r.EXP_TABLE[n-4]^r.EXP_TABLE[n-5]^r.EXP_TABLE[n-6]^r.EXP_TABLE[n-8];for(n=0;n<255;n++)r.LOG_TABLE[r.EXP_TABLE[n]]=n;e.exports=r},4038:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4039);t.bip32=n;var i=r(3100);t.address=i;var u=r(2866);t.crypto=u;var o=r(3101);t.ECPair=o;var s=r(2847);t.networks=s;var a=r(3004);t.payments=a;var c=r(2823);t.script=c;var f=r(4057);t.Block=f.Block;var p=r(4059);t.Psbt=p.Psbt;var h=r(2823);t.opcodes=h.OPS;var l=r(3007);t.Transaction=l.Transaction;var d=r(4077);t.TransactionBuilder=d.TransactionBuilder},4039:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4040);t.fromSeed=n.fromSeed,t.fromBase58=n.fromBase58,t.fromPublicKey=n.fromPublicKey,t.fromPrivateKey=n.fromPrivateKey},4040:function(e,t,r){"use strict";(function(e){var n=r(11),i=r(26);Object.defineProperty(t,"__esModule",{value:!0});var u=r(4041),o=r(2945),s=r(2873),a=r(2831),c=r(3227),f=a.BufferN(32),p=a.compile({wif:a.UInt8,bip32:{public:a.UInt32,private:a.UInt32}}),h={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},l=2147483648,d=Math.pow(2,31)-1;function v(e){return a.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function y(e){return a.UInt32(e)&&e<=d}var w=function(){function t(e,r,i,u){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;n(this,t),this.__D=e,this.__Q=r,this.chainCode=i,this.network=u,this.__DEPTH=o,this.__INDEX=s,this.__PARENT_FINGERPRINT=c,a(p,u),this.lowR=!1}return i(t,[{key:"depth",get:function(){return this.__DEPTH}},{key:"index",get:function(){return this.__INDEX}},{key:"parentFingerprint",get:function(){return this.__PARENT_FINGERPRINT}},{key:"publicKey",get:function(){return void 0===this.__Q&&(this.__Q=s.pointFromScalar(this.__D,!0)),this.__Q}},{key:"privateKey",get:function(){return this.__D}},{key:"identifier",get:function(){return u.hash160(this.publicKey)}},{key:"fingerprint",get:function(){return this.identifier.slice(0,4)}},{key:"compressed",get:function(){return!0}},{key:"isNeutered",value:function(){return void 0===this.__D}},{key:"neutered",value:function(){return _(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}},{key:"toBase58",value:function(){var t=this.network,r=this.isNeutered()?t.bip32.public:t.bip32.private,n=e.allocUnsafe(78);return n.writeUInt32BE(r,0),n.writeUInt8(this.depth,4),n.writeUInt32BE(this.parentFingerprint,5),n.writeUInt32BE(this.index,9),this.chainCode.copy(n,13),this.isNeutered()?this.publicKey.copy(n,45):(n.writeUInt8(0,45),this.privateKey.copy(n,46)),o.encode(n)}},{key:"toWIF",value:function(){if(!this.privateKey)throw new TypeError("Missing private key");return c.encode(this.network.wif,this.privateKey,!0)}},{key:"derive",value:function(t){a(a.UInt32,t);var r=t>=l,n=e.allocUnsafe(37);if(r){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");n[0]=0,this.privateKey.copy(n,1),n.writeUInt32BE(t,33)}else this.publicKey.copy(n,0),n.writeUInt32BE(t,33);var i,o=u.hmacSHA512(this.chainCode,n),c=o.slice(0,32),f=o.slice(32);if(!s.isPrivate(c))return this.derive(t+1);if(this.isNeutered()){var p=s.pointAddScalar(this.publicKey,c,!0);if(null===p)return this.derive(t+1);i=_(p,f,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}else{var h=s.privateAdd(this.privateKey,c);if(null==h)return this.derive(t+1);i=m(h,f,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}return i}},{key:"deriveHardened",value:function(e){return a(y,e),this.derive(e+l)}},{key:"derivePath",value:function(e){a(v,e);var t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce((function(e,t){var r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)}},{key:"sign",value:function(t,r){if(!this.privateKey)throw new Error("Missing private key");if(void 0===r&&(r=this.lowR),!1===r)return s.sign(t,this.privateKey);for(var n=s.sign(t,this.privateKey),i=e.alloc(32,0),u=0;n[0]>127;)u++,i.writeUIntLE(u,0,6),n=s.signWithEntropy(t,this.privateKey,i);return n}},{key:"verify",value:function(e,t){return s.verify(e,this.publicKey,t)}}]),t}();function g(e,t,r){return m(e,t,r)}function m(e,t,r,n,i,u){if(a({privateKey:f,chainCode:f},{privateKey:e,chainCode:t}),r=r||h,!s.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new w(e,void 0,t,r,n,i,u)}function _(e,t,r,n,i,u){if(a({publicKey:a.BufferN(33),chainCode:f},{publicKey:e,chainCode:t}),r=r||h,!s.isPoint(e))throw new TypeError("Point is not on the curve");return new w(void 0,e,t,r,n,i,u)}t.fromBase58=function(e,t){var r=o.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||h;var n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");var i=r[4],u=r.readUInt32BE(5);if(0===i&&0!==u)throw new TypeError("Invalid parent fingerprint");var s=r.readUInt32BE(9);if(0===i&&0!==s)throw new TypeError("Invalid index");var a,c=r.slice(13,45);if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");a=m(r.slice(46,78),c,t,i,s,u)}else{a=_(r.slice(45,78),c,t,i,s,u)}return a},t.fromPrivateKey=g,t.fromPublicKey=function(e,t,r){return _(e,t,r)},t.fromSeed=function(t,r){if(a(a.Buffer,t),t.length<16)throw new TypeError("Seed should be at least 128 bits");if(t.length>64)throw new TypeError("Seed should be at most 512 bits");r=r||h;var n=u.hmacSHA512(e.from("Bitcoin seed","utf8"),t);return g(n.slice(0,32),n.slice(32),r)}}).call(this,r(5).Buffer)},4041:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(83),i=r(761);t.hash160=function(e){var t=n("sha256").update(e).digest();try{return n("rmd160").update(t).digest()}catch(r){return n("ripemd160").update(t).digest()}},t.hmacSHA512=function(e,t){return i("sha512",e).update(t).digest()}},4042:function(e,t,r){"use strict";var n=r(4043),i=r(54).Buffer;e.exports=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=e(t);return n.encode(i.concat([t,r],t.length+4))},decode:function(e){var r=t(n.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=n.decodeUnsafe(e);if(r)return t(r)}}}},4043:function(e,t,r){var n=r(771);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},4044:function(e,t,r){(function(t){var n=r(761),i=t.alloc(1,1),u=t.alloc(1,0);e.exports=function(e,r,o,s,a){var c=t.alloc(32,0),f=t.alloc(32,1);c=n("sha256",c).update(f).update(u).update(r).update(e).update(a||"").digest(),f=n("sha256",c).update(f).digest(),c=n("sha256",c).update(f).update(i).update(r).update(e).update(a||"").digest(),f=n("sha256",c).update(f).digest();for(var p=f=n("sha256",c).update(f).digest();!s(p)||!o(p);)c=n("sha256",c).update(f).update(u).digest(),f=n("sha256",c).update(f).digest(),p=f=n("sha256",c).update(f).digest();return p}}).call(this,r(5).Buffer)},4045:function(e,t,r){(function(t){var n=r(3099),i=r(3226);function u(e){return t.isBuffer(e)}function o(e){return"string"===typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function s(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw i.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var a=s.bind(null,n.Array),c=s.bind(null,u),f=s.bind(null,o),p=s.bind(null,n.String);var h=Math.pow(2,53)-1;var l={ArrayN:a,Buffer:u,BufferN:c,Finite:function(e){return"number"===typeof e&&isFinite(e)},Hex:o,HexN:f,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"===typeof e&&e>=-h&&e<=h&&Math.floor(e)===e},Range:function(e,t,r){function i(n,i){return r(n,i)&&n>e&&n<t}return r=r||n.Number,i.toJSON=function(){return"".concat(r.toJSON()," between [").concat(e,", ").concat(t,"]")},i},StringN:p,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"===typeof e&&e>=0&&e<=h&&Math.floor(e)===e}};for(var d in l)l[d].toJSON=function(e){return e}.bind(null,d);e.exports=l}).call(this,r(5).Buffer)},4046:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2847),i=r(2823),u=r(2890),o=r(2831),s=i.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),data:o.maybe(o.arrayOf(o.Buffer))},e);var r={name:"embed",network:e.network||n.bitcoin};if(u.prop(r,"output",(function(){if(e.data)return i.compile([s.OP_RETURN].concat(e.data))})),u.prop(r,"data",(function(){if(e.output)return i.decompile(e.output).slice(1)})),t.validate&&e.output){var a=i.decompile(e.output);if(a[0]!==s.OP_RETURN)throw new TypeError("Output is invalid");if(!a.slice(1).every(o.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(e.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,e)}},4047:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e,t,r){t=t||4,r=void 0===r||r;var n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0===(127&e[n-1])&&(n<=1||0===(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){var i=e.readUInt32LE(0),u=e.readUInt8(4);return 128&u?-(4294967296*(-129&u)+i):4294967296*u+i}for(var o=0,s=0;s<n;++s)o|=e[s]<<8*s;return 128&e[n-1]?-(o&~(128<<8*(n-1))):o},t.encode=function(t){for(var r=Math.abs(t),n=function(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(r),i=e.allocUnsafe(n),u=t<0,o=0;o<n;++o)i.writeUInt8(255&r,o),r>>=8;return 128&i[n-1]?i.writeUInt8(u?128:0,n-1):u&&(i[n-1]|=128),i}}).call(this,r(5).Buffer)},4048:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2858),i=r(1225),u=r(2831),o=e.alloc(1,0);function s(t){for(var r=0;0===t[r];)++r;return r===t.length?o:128&(t=t.slice(r))[0]?e.concat([o,t],1+t.length):t}function a(t){0===t[0]&&(t=t.slice(1));var r=e.alloc(32,0),n=Math.max(0,32-t.length);return t.copy(r,n),r}t.decode=function(t){var r=t.readUInt8(t.length-1),n=-129&r;if(n<=0||n>=4)throw new Error("Invalid hashType "+r);var u=i.decode(t.slice(0,-1)),o=a(u.r),s=a(u.s);return{signature:e.concat([o,s],64),hashType:r}},t.encode=function(t,r){u({signature:n.BufferN(64),hashType:n.UInt8},{signature:t,hashType:r});var o=-129&r;if(o<=0||o>=4)throw new Error("Invalid hashType "+r);var a=e.allocUnsafe(1);a.writeUInt8(r,0);var c=s(t.slice(0,32)),f=s(t.slice(32,64));return e.concat([i.encode(c,f),a])}}).call(this,r(5).Buffer)},4049:function(e,t,r){var n=r(3005);function i(e){return e<n.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}e.exports={encodingLength:i,encode:function(e,t,r){var u=i(t);return 1===u?e.writeUInt8(t,r):2===u?(e.writeUInt8(n.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===u?(e.writeUInt8(n.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(n.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),u},decode:function(e,t){var r,i,u=e.readUInt8(t);if(u<n.OP_PUSHDATA1)r=u,i=1;else if(u===n.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),i=2}else if(u===n.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(u!==n.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),i=5}return{opcode:u,number:r,size:i}}}},4050:function(e,t,r){var n=r(3005),i={};for(var u in n){i[n[u]]=u}e.exports=i},4051:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2847),i=r(2823),u=r(2890),o=i.OPS,s=r(2831),a=r(2873),c=o.OP_RESERVED;function f(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}t.p2ms=function(e,t){if(!e.input&&!e.output&&(!e.pubkeys||void 0===e.m)&&!e.signatures)throw new TypeError("Not enough data");function r(e){return i.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===o.OP_0)}t=Object.assign({validate:!0},t||{}),s({network:s.maybe(s.Object),m:s.maybe(s.Number),n:s.maybe(s.Number),output:s.maybe(s.Buffer),pubkeys:s.maybe(s.arrayOf(a.isPoint)),signatures:s.maybe(s.arrayOf(r)),input:s.maybe(s.Buffer)},e);var p={network:e.network||n.bitcoin},h=[],l=!1;function d(e){l||(l=!0,h=i.decompile(e),p.m=h[0]-c,p.n=h[h.length-2]-c,p.pubkeys=h.slice(1,-2))}if(u.prop(p,"output",(function(){if(e.m&&p.n&&e.pubkeys)return i.compile([].concat(c+e.m,e.pubkeys,c+p.n,o.OP_CHECKMULTISIG))})),u.prop(p,"m",(function(){if(p.output)return d(p.output),p.m})),u.prop(p,"n",(function(){if(p.pubkeys)return p.pubkeys.length})),u.prop(p,"pubkeys",(function(){if(e.output)return d(e.output),p.pubkeys})),u.prop(p,"signatures",(function(){if(e.input)return i.decompile(e.input).slice(1)})),u.prop(p,"input",(function(){if(e.signatures)return i.compile([o.OP_0].concat(e.signatures))})),u.prop(p,"witness",(function(){if(p.input)return[]})),u.prop(p,"name",(function(){if(p.m&&p.n)return"p2ms(".concat(p.m," of ").concat(p.n,")")})),t.validate){if(e.output){if(d(e.output),!s.Number(h[0]))throw new TypeError("Output is invalid");if(!s.Number(h[h.length-2]))throw new TypeError("Output is invalid");if(h[h.length-1]!==o.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(p.m<=0||p.n>16||p.m>p.n||p.n!==h.length-3)throw new TypeError("Output is invalid");if(!p.pubkeys.every((function(e){return a.isPoint(e)})))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==p.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==p.n)throw new TypeError("n mismatch");if(e.pubkeys&&!f(e.pubkeys,p.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(p.n=e.pubkeys.length,p.n<p.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<p.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>p.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==o.OP_0)throw new TypeError("Input is invalid");if(0===p.signatures.length||!p.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!f(e.signatures,p.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(p,e)}},4052:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2847),i=r(2823),u=r(2890),o=r(2831),s=i.OPS,a=r(2873);t.p2pk=function(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),pubkey:o.maybe(a.isPoint),signature:o.maybe(i.isCanonicalScriptSignature),input:o.maybe(o.Buffer)},e);var r=u.value((function(){return i.decompile(e.input)})),c={name:"p2pk",network:e.network||n.bitcoin};if(u.prop(c,"output",(function(){if(e.pubkey)return i.compile([e.pubkey,s.OP_CHECKSIG])})),u.prop(c,"pubkey",(function(){if(e.output)return e.output.slice(1,-1)})),u.prop(c,"signature",(function(){if(e.input)return r()[0]})),u.prop(c,"input",(function(){if(e.signature)return i.compile([e.signature])})),u.prop(c,"witness",(function(){if(c.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==s.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!a.isPoint(c.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(c.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(c.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(c.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(c,e)}},4053:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2866),i=r(2847),u=r(2823),o=r(2890),s=r(2831),a=u.OPS,c=r(2873),f=r(2945);t.p2pkh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),s({network:s.maybe(s.Object),address:s.maybe(s.String),hash:s.maybe(s.BufferN(20)),output:s.maybe(s.BufferN(25)),pubkey:s.maybe(c.isPoint),signature:s.maybe(u.isCanonicalScriptSignature),input:s.maybe(s.Buffer)},t);var p=o.value((function(){var e=f.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}})),h=o.value((function(){return u.decompile(t.input)})),l=t.network||i.bitcoin,d={name:"p2pkh",network:l};if(o.prop(d,"address",(function(){if(d.hash){var t=e.allocUnsafe(21);return t.writeUInt8(l.pubKeyHash,0),d.hash.copy(t,1),f.encode(t)}})),o.prop(d,"hash",(function(){return t.output?t.output.slice(3,23):t.address?p().hash:t.pubkey||d.pubkey?n.hash160(t.pubkey||d.pubkey):void 0})),o.prop(d,"output",(function(){if(d.hash)return u.compile([a.OP_DUP,a.OP_HASH160,d.hash,a.OP_EQUALVERIFY,a.OP_CHECKSIG])})),o.prop(d,"pubkey",(function(){if(t.input)return h()[1]})),o.prop(d,"signature",(function(){if(t.input)return h()[0]})),o.prop(d,"input",(function(){if(t.pubkey&&t.signature)return u.compile([t.signature,t.pubkey])})),o.prop(d,"witness",(function(){if(d.input)return[]})),r.validate){var v=e.from([]);if(t.address){if(p().version!==l.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==p().hash.length)throw new TypeError("Invalid address");v=p().hash}if(t.hash){if(v.length>0&&!v.equals(t.hash))throw new TypeError("Hash mismatch");v=t.hash}if(t.output){if(25!==t.output.length||t.output[0]!==a.OP_DUP||t.output[1]!==a.OP_HASH160||20!==t.output[2]||t.output[23]!==a.OP_EQUALVERIFY||t.output[24]!==a.OP_CHECKSIG)throw new TypeError("Output is invalid");var y=t.output.slice(3,23);if(v.length>0&&!v.equals(y))throw new TypeError("Hash mismatch");v=y}if(t.pubkey){var w=n.hash160(t.pubkey);if(v.length>0&&!v.equals(w))throw new TypeError("Hash mismatch");v=w}if(t.input){var g=h();if(2!==g.length)throw new TypeError("Input is invalid");if(!u.isCanonicalScriptSignature(g[0]))throw new TypeError("Input has invalid signature");if(!c.isPoint(g[1]))throw new TypeError("Input has invalid pubkey");if(t.signature&&!t.signature.equals(g[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(g[1]))throw new TypeError("Pubkey mismatch");var m=n.hash160(g[1]);if(v.length>0&&!v.equals(m))throw new TypeError("Hash mismatch")}}return Object.assign(d,t)}}).call(this,r(5).Buffer)},4054:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2866),i=r(2847),u=r(2823),o=r(2890),s=r(2831),a=u.OPS,c=r(2945);t.p2sh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),s({network:s.maybe(s.Object),address:s.maybe(s.String),hash:s.maybe(s.BufferN(20)),output:s.maybe(s.BufferN(23)),redeem:s.maybe({network:s.maybe(s.Object),output:s.maybe(s.Buffer),input:s.maybe(s.Buffer),witness:s.maybe(s.arrayOf(s.Buffer))}),input:s.maybe(s.Buffer),witness:s.maybe(s.arrayOf(s.Buffer))},t);var f=t.network;f||(f=t.redeem&&t.redeem.network||i.bitcoin);var p={network:f},h=o.value((function(){var e=c.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}})),l=o.value((function(){return u.decompile(t.input)})),d=o.value((function(){var e=l();return{network:f,output:e[e.length-1],input:u.compile(e.slice(0,-1)),witness:t.witness||[]}}));if(o.prop(p,"address",(function(){if(p.hash){var t=e.allocUnsafe(21);return t.writeUInt8(p.network.scriptHash,0),p.hash.copy(t,1),c.encode(t)}})),o.prop(p,"hash",(function(){return t.output?t.output.slice(2,22):t.address?h().hash:p.redeem&&p.redeem.output?n.hash160(p.redeem.output):void 0})),o.prop(p,"output",(function(){if(p.hash)return u.compile([a.OP_HASH160,p.hash,a.OP_EQUAL])})),o.prop(p,"redeem",(function(){if(t.input)return d()})),o.prop(p,"input",(function(){if(t.redeem&&t.redeem.input&&t.redeem.output)return u.compile([].concat(u.decompile(t.redeem.input),t.redeem.output))})),o.prop(p,"witness",(function(){return p.redeem&&p.redeem.witness?p.redeem.witness:p.input?[]:void 0})),o.prop(p,"name",(function(){var e=["p2sh"];return void 0!==p.redeem&&e.push(p.redeem.name),e.join("-")})),r.validate){var v=e.from([]);if(t.address){if(h().version!==f.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==h().hash.length)throw new TypeError("Invalid address");v=h().hash}if(t.hash){if(v.length>0&&!v.equals(t.hash))throw new TypeError("Hash mismatch");v=t.hash}if(t.output){if(23!==t.output.length||t.output[0]!==a.OP_HASH160||20!==t.output[1]||t.output[22]!==a.OP_EQUAL)throw new TypeError("Output is invalid");var y=t.output.slice(2,22);if(v.length>0&&!v.equals(y))throw new TypeError("Hash mismatch");v=y}var w=function(e){if(e.output){var t=u.decompile(e.output);if(!t||t.length<1)throw new TypeError("Redeem.output too short");var r=n.hash160(e.output);if(v.length>0&&!v.equals(r))throw new TypeError("Hash mismatch");v=r}if(e.input){var i=e.input.length>0,o=e.witness&&e.witness.length>0;if(!i&&!o)throw new TypeError("Empty input");if(i&&o)throw new TypeError("Input and witness provided");if(i){var s=u.decompile(e.input);if(!u.isPushOnly(s))throw new TypeError("Non push-only scriptSig")}}};if(t.input){var g=l();if(!g||g.length<1)throw new TypeError("Input too short");if(!e.isBuffer(d().output))throw new TypeError("Input is invalid");w(d())}if(t.redeem){if(t.redeem.network&&t.redeem.network!==f)throw new TypeError("Network mismatch");if(t.input){var m=d();if(t.redeem.output&&!t.redeem.output.equals(m.output))throw new TypeError("Redeem.output mismatch");if(t.redeem.input&&!t.redeem.input.equals(m.input))throw new TypeError("Redeem.input mismatch")}w(t.redeem)}if(t.witness&&t.redeem&&t.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(t.redeem.witness,t.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(p,t)}}).call(this,r(5).Buffer)},4055:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2866),i=r(2847),u=r(2823),o=r(2890),s=r(2831),a=u.OPS,c=r(2873),f=r(577),p=e.alloc(0);t.p2wpkh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),s({address:s.maybe(s.String),hash:s.maybe(s.BufferN(20)),input:s.maybe(s.BufferN(0)),network:s.maybe(s.Object),output:s.maybe(s.BufferN(22)),pubkey:s.maybe(c.isPoint),signature:s.maybe(u.isCanonicalScriptSignature),witness:s.maybe(s.arrayOf(s.Buffer))},t);var h=o.value((function(){var r=f.decode(t.address),n=r.words.shift(),i=f.fromWords(r.words);return{version:n,prefix:r.prefix,data:e.from(i)}})),l=t.network||i.bitcoin,d={name:"p2wpkh",network:l};if(o.prop(d,"address",(function(){if(d.hash){var e=f.toWords(d.hash);return e.unshift(0),f.encode(l.bech32,e)}})),o.prop(d,"hash",(function(){return t.output?t.output.slice(2,22):t.address?h().data:t.pubkey||d.pubkey?n.hash160(t.pubkey||d.pubkey):void 0})),o.prop(d,"output",(function(){if(d.hash)return u.compile([a.OP_0,d.hash])})),o.prop(d,"pubkey",(function(){return t.pubkey?t.pubkey:t.witness?t.witness[1]:void 0})),o.prop(d,"signature",(function(){if(t.witness)return t.witness[0]})),o.prop(d,"input",(function(){if(d.witness)return p})),o.prop(d,"witness",(function(){if(t.pubkey&&t.signature)return[t.signature,t.pubkey]})),r.validate){var v=e.from([]);if(t.address){if(l&&l.bech32!==h().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==h().version)throw new TypeError("Invalid address version");if(20!==h().data.length)throw new TypeError("Invalid address data");v=h().data}if(t.hash){if(v.length>0&&!v.equals(t.hash))throw new TypeError("Hash mismatch");v=t.hash}if(t.output){if(22!==t.output.length||t.output[0]!==a.OP_0||20!==t.output[1])throw new TypeError("Output is invalid");if(v.length>0&&!v.equals(t.output.slice(2)))throw new TypeError("Hash mismatch");v=t.output.slice(2)}if(t.pubkey){var y=n.hash160(t.pubkey);if(v.length>0&&!v.equals(y))throw new TypeError("Hash mismatch");if(v=y,!c.isPoint(t.pubkey)||33!==t.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(t.witness){if(2!==t.witness.length)throw new TypeError("Witness is invalid");if(!u.isCanonicalScriptSignature(t.witness[0]))throw new TypeError("Witness has invalid signature");if(!c.isPoint(t.witness[1])||33!==t.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(t.signature&&!t.signature.equals(t.witness[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(t.witness[1]))throw new TypeError("Pubkey mismatch");var w=n.hash160(t.witness[1]);if(v.length>0&&!v.equals(w))throw new TypeError("Hash mismatch")}}return Object.assign(d,t)}}).call(this,r(5).Buffer)},4056:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2866),i=r(2847),u=r(2823),o=r(2890),s=r(2831),a=u.OPS,c=r(2873),f=r(577),p=e.alloc(0);function h(t){return!(!e.isBuffer(t)||65!==t.length||4!==t[0]||!c.isPoint(t))}t.p2wsh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),s({network:s.maybe(s.Object),address:s.maybe(s.String),hash:s.maybe(s.BufferN(32)),output:s.maybe(s.BufferN(34)),redeem:s.maybe({input:s.maybe(s.Buffer),network:s.maybe(s.Object),output:s.maybe(s.Buffer),witness:s.maybe(s.arrayOf(s.Buffer))}),input:s.maybe(s.BufferN(0)),witness:s.maybe(s.arrayOf(s.Buffer))},t);var c=o.value((function(){var r=f.decode(t.address),n=r.words.shift(),i=f.fromWords(r.words);return{version:n,prefix:r.prefix,data:e.from(i)}})),l=o.value((function(){return u.decompile(t.redeem.input)})),d=t.network;d||(d=t.redeem&&t.redeem.network||i.bitcoin);var v={network:d};if(o.prop(v,"address",(function(){if(v.hash){var e=f.toWords(v.hash);return e.unshift(0),f.encode(d.bech32,e)}})),o.prop(v,"hash",(function(){return t.output?t.output.slice(2):t.address?c().data:v.redeem&&v.redeem.output?n.sha256(v.redeem.output):void 0})),o.prop(v,"output",(function(){if(v.hash)return u.compile([a.OP_0,v.hash])})),o.prop(v,"redeem",(function(){if(t.witness)return{output:t.witness[t.witness.length-1],input:p,witness:t.witness.slice(0,-1)}})),o.prop(v,"input",(function(){if(v.witness)return p})),o.prop(v,"witness",(function(){if(t.redeem&&t.redeem.input&&t.redeem.input.length>0&&t.redeem.output&&t.redeem.output.length>0){var e=u.toStack(l());return v.redeem=Object.assign({witness:e},t.redeem),v.redeem.input=p,[].concat(e,t.redeem.output)}if(t.redeem&&t.redeem.output&&t.redeem.witness)return[].concat(t.redeem.witness,t.redeem.output)})),o.prop(v,"name",(function(){var e=["p2wsh"];return void 0!==v.redeem&&e.push(v.redeem.name),e.join("-")})),r.validate){var y=e.from([]);if(t.address){if(c().prefix!==d.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==c().version)throw new TypeError("Invalid address version");if(32!==c().data.length)throw new TypeError("Invalid address data");y=c().data}if(t.hash){if(y.length>0&&!y.equals(t.hash))throw new TypeError("Hash mismatch");y=t.hash}if(t.output){if(34!==t.output.length||t.output[0]!==a.OP_0||32!==t.output[1])throw new TypeError("Output is invalid");var w=t.output.slice(2);if(y.length>0&&!y.equals(w))throw new TypeError("Hash mismatch");y=w}if(t.redeem){if(t.redeem.network&&t.redeem.network!==d)throw new TypeError("Network mismatch");if(t.redeem.input&&t.redeem.input.length>0&&t.redeem.witness&&t.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(t.redeem.output){if(0===u.decompile(t.redeem.output).length)throw new TypeError("Redeem.output is invalid");var g=n.sha256(t.redeem.output);if(y.length>0&&!y.equals(g))throw new TypeError("Hash mismatch");y=g}if(t.redeem.input&&!u.isPushOnly(l()))throw new TypeError("Non push-only scriptSig");if(t.witness&&t.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(t.witness,t.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(t.redeem.input&&l().some(h)||t.redeem.output&&(u.decompile(t.redeem.output)||[]).some(h))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(t.witness&&t.witness.length>0){var m=t.witness[t.witness.length-1];if(t.redeem&&t.redeem.output&&!t.redeem.output.equals(m))throw new TypeError("Witness and redeem.output mismatch");if(t.witness.some(h)||(u.decompile(m)||[]).some(h))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(v,t)}}).call(this,r(5).Buffer)},4057:function(e,t,r){"use strict";(function(e){var n=r(11),i=r(26);Object.defineProperty(t,"__esModule",{value:!0});var u=r(3006),o=r(2866),s=r(3007),a=r(2858),c=r(4058),f=r(2831),p=r(3102),h=new TypeError("Cannot compute merkle root for zero transactions"),l=new TypeError("Cannot compute witness commit for non-segwit block"),d=function(){function t(){n(this,t),this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}return i(t,[{key:"getWitnessCommit",value:function(){if(!v(this.transactions))return null;var t=this.transactions[0].outs.filter((function(t){return t.script.slice(0,6).equals(e.from("6a24aa21a9ed","hex"))})).map((function(e){return e.script.slice(6,38)}));if(0===t.length)return null;var r=t[t.length-1];return r instanceof e&&32===r.length?r:null}},{key:"hasWitnessCommit",value:function(){return this.witnessCommit instanceof e&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}},{key:"hasWitness",value:function(){return(e=this.transactions)instanceof Array&&e.some((function(e){return"object"===typeof e&&e.ins instanceof Array&&e.ins.some((function(e){return"object"===typeof e&&e.witness instanceof Array&&e.witness.length>0}))}));var e}},{key:"weight",value:function(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}},{key:"byteLength",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e||!this.transactions?80:80+p.encodingLength(this.transactions.length)+this.transactions.reduce((function(e,r){return e+r.byteLength(t)}),0)}},{key:"getHash",value:function(){return o.hash256(this.toBuffer(!0))}},{key:"getId",value:function(){return u.reverseBuffer(this.getHash()).toString("hex")}},{key:"getUTCDate",value:function(){var e=new Date(0);return e.setUTCSeconds(this.timestamp),e}},{key:"toBuffer",value:function(t){var r=e.allocUnsafe(this.byteLength(t)),n=new u.BufferWriter(r);return n.writeInt32(this.version),n.writeSlice(this.prevHash),n.writeSlice(this.merkleRoot),n.writeUInt32(this.timestamp),n.writeUInt32(this.bits),n.writeUInt32(this.nonce),t||!this.transactions||(p.encode(this.transactions.length,r,n.offset),n.offset+=p.encode.bytes,this.transactions.forEach((function(e){var t=e.byteLength();e.toBuffer(r,n.offset),n.offset+=t}))),r}},{key:"toHex",value:function(e){return this.toBuffer(e).toString("hex")}},{key:"checkTxRoots",value:function(){var e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}},{key:"checkProofOfWork",value:function(){var e=u.reverseBuffer(this.getHash()),r=t.calculateTarget(this.bits);return e.compare(r)<=0}},{key:"__checkMerkleRoot",value:function(){if(!this.transactions)throw h;var e=t.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}},{key:"__checkWitnessCommit",value:function(){if(!this.transactions)throw h;if(!this.hasWitnessCommit())throw l;var e=t.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}],[{key:"fromBuffer",value:function(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");var r=new u.BufferReader(e),n=new t;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),80===e.length)return n;var i=function(){var e=s.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=e.byteLength(),e},o=r.readVarInt();n.transactions=[];for(var a=0;a<o;++a){var c=i();n.transactions.push(c)}var f=n.getWitnessCommit();return f&&(n.witnessCommit=f),n}},{key:"fromHex",value:function(r){return t.fromBuffer(e.from(r,"hex"))}},{key:"calculateTarget",value:function(t){var r=((4278190080&t)>>24)-3,n=8388607&t,i=e.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}},{key:"calculateMerkleRoot",value:function(t,r){if(f([{getHash:a.Function}],t),0===t.length)throw h;if(r&&!v(t))throw l;var n=t.map((function(e){return e.getHash(r)})),i=c(n,o.hash256);return r?o.hash256(e.concat([i,t[0].ins[0].witness[0]])):i}}]),t}();function v(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=d}).call(this,r(5).Buffer)},4058:function(e,t,r){(function(t){e.exports=function(e,r){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!==typeof r)throw TypeError("Expected digest Function");for(var n=e.length,i=e.concat();n>1;){for(var u=0,o=0;o<n;o+=2,++u){var s=i[o],a=o+1===n?s:i[o+1],c=t.concat([s,a]);i[u]=r(c)}n=u}return i[0]}}).call(this,r(5).Buffer)},4059:function(e,t,r){"use strict";(function(e){var n=r(67),i=r(53),u=r(255),o=r(11),s=r(26);Object.defineProperty(t,"__esModule",{value:!0});var a=r(4060),c=r(3008),f=r(3229),p=r(3100),h=r(3006),l=r(2866),d=r(3101),v=r(2847),y=r(3004),w=r(2823),g=r(3007),m={network:v.bitcoin,maximumFeeRate:5e3},_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Psbt(new b);o(this,t),this.data=r,this.opts=Object.assign({},m,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);var n=function(e,t,r,n){return Object.defineProperty(e,t,{enumerable:r,writable:n})};n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}return s(t,[{key:"inputCount",get:function(){return this.data.inputs.length}},{key:"version",get:function(){return this.__CACHE.__TX.version},set:function(e){this.setVersion(e)}},{key:"locktime",get:function(){return this.__CACHE.__TX.locktime},set:function(e){this.setLocktime(e)}},{key:"txInputs",get:function(){return this.__CACHE.__TX.ins.map((function(e){return{hash:h.cloneBuffer(e.hash),index:e.index,sequence:e.sequence}}))}},{key:"txOutputs",get:function(){var e=this;return this.__CACHE.__TX.outs.map((function(t){var r;try{r=p.fromOutputScript(t.script,e.opts.network)}catch(n){}return{script:h.cloneBuffer(t.script),value:t.value,address:r}}))}},{key:"combine",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.data).combine.apply(e,u(r.map((function(e){return e.data})))),this}},{key:"clone",value:function(){var e=t.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}},{key:"setMaximumFeeRate",value:function(e){H(e),this.opts.maximumFeeRate=e}},{key:"setVersion",value:function(e){H(e),x(this.data.inputs,"setVersion");var t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}},{key:"setLocktime",value:function(e){H(e),x(this.data.inputs,"setLocktime");var t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}},{key:"setInputSequence",value:function(e,t){H(t),x(this.data.inputs,"setInputSequence");var r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}},{key:"addInputs",value:function(e){var t=this;return e.forEach((function(e){return t.addInput(e)})),this}},{key:"addInput",value:function(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");x(this.data.inputs,"addInput"),e.witnessScript&&ie(e.witnessScript);var t=this.__CACHE;this.data.addInput(e);var r=t.__TX.ins[t.__TX.ins.length-1];K(t,r);var n=this.data.inputs.length-1,i=this.data.inputs[n];return i.nonWitnessUtxo&&Z(this.__CACHE,i,n),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}},{key:"addOutputs",value:function(e){var t=this;return e.forEach((function(e){return t.addOutput(e)})),this}},{key:"addOutput",value:function(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");x(this.data.inputs,"addOutput");var t=e,r=t.address;if("string"===typeof r){var n=this.opts.network,i=p.toOutputScript(r,n);e=Object.assign(e,{script:i})}var u=this.__CACHE;return this.data.addOutput(e),u.__FEE=void 0,u.__FEE_RATE=void 0,u.__EXTRACTED_TX=void 0,this}},{key:"extractTransaction",value:function(e){if(!this.data.inputs.every(T))throw new Error("Not finalized");var t=this.__CACHE;if(e||function(e,t,r){var n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),u=n*i;if(n>=r.maximumFeeRate)throw new Error("Warning: You are paying around ".concat((u/1e8).toFixed(8)," in ")+"fees, which is ".concat(n," satoshi per byte for a transaction ")+"with a VSize of ".concat(i," bytes (segwit counted as 0.25 byte per ")+"byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.")}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;var r=t.__TX.clone();return $(this.data.inputs,r,t,!0),r}},{key:"getFeeRate",value:function(){return F("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}},{key:"getFee",value:function(){return F("__FEE","fee",this.data.inputs,this.__CACHE)}},{key:"finalizeAllInputs",value:function(){var e=this;return f.checkForInput(this.data.inputs,0),se(this.data.inputs.length).forEach((function(t){return e.finalizeInput(t)})),this}},{key:"finalizeInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,r=f.checkForInput(this.data.inputs,e),n=J(e,r,this.__CACHE),i=n.script,u=n.isP2SH,o=n.isP2WSH,s=n.isSegwit;if(!i)throw new Error("No script found for input #".concat(e));L(r);var a=t(e,r,i,s,u,o),c=a.finalScriptSig,p=a.finalScriptWitness;if(c&&this.data.updateInput(e,{finalScriptSig:c}),p&&this.data.updateInput(e,{finalScriptWitness:p}),!c&&!p)throw new Error("Unknown error finalizing input #".concat(e));return this.data.clearFinalizedInput(e),this}},{key:"getInputType",value:function(t){var r=f.checkForInput(this.data.inputs,t),n=ne(te(t,r,this.__CACHE),t,"input",r.redeemScript||function(t){if(!t)return;var r=w.decompile(t);if(!r)return;var n=r[r.length-1];if(!e.isBuffer(n)||re(n)||(i=n,w.isCanonicalScriptSignature(i)))return;var i;if(!w.decompile(n))return;return n}(r.finalScriptSig),r.witnessScript||function(e){if(!e)return;var t=z(e),r=t[t.length-1];if(re(r))return;if(!w.decompile(r))return;return r}(r.finalScriptWitness));return("raw"===n.type?"":n.type+"-")+oe(n.meaningfulScript)}},{key:"inputHasPubkey",value:function(e,t){return function(e,t,r,n){var i=ne(te(r,t,n),r,"input",t.redeemScript,t.witnessScript).meaningfulScript;return ue(e,i)}(t,f.checkForInput(this.data.inputs,e),e,this.__CACHE)}},{key:"inputHasHDKey",value:function(e,t){var r=f.checkForInput(this.data.inputs,e),n=B(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}},{key:"outputHasPubkey",value:function(e,t){return function(e,t,r,n){var i=ne(n.__TX.outs[r].script,r,"output",t.redeemScript,t.witnessScript).meaningfulScript;return ue(e,i)}(t,f.checkForOutput(this.data.outputs,e),e,this.__CACHE)}},{key:"outputHasHDKey",value:function(e,t){var r=f.checkForOutput(this.data.outputs,e),n=B(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}},{key:"validateSignaturesOfAllInputs",value:function(){var e=this;return f.checkForInput(this.data.inputs,0),se(this.data.inputs.length).map((function(t){return e.validateSignaturesOfInput(t)})).reduce((function(e,t){return!0===t&&e}),!0)}},{key:"validateSignaturesOfInput",value:function(e,t){var r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");var u=t?n.filter((function(e){return e.pubkey.equals(t)})):n;if(u.length<1)throw new Error("No signatures for this pubkey");var o,s,a,c,f=[],p=i(u);try{for(p.s();!(c=p.n()).done;){var h=c.value,l=w.signature.decode(h.signature),v=a!==l.hashType?q(e,Object.assign({},r,{sighashType:l.hashType}),this.__CACHE,!0):{hash:o,script:s},y=v.hash,g=v.script;a=l.hashType,o=y,s=g,D(h.pubkey,g,"verify");var m=d.fromPublicKey(h.pubkey);f.push(m.verify(y,l.signature))}}catch(_){p.e(_)}finally{p.f()}return f.every((function(e){return!0===e}))}},{key:"signAllInputsHD",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[g.Transaction.SIGHASH_ALL];if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");var r,n=[],u=i(se(this.data.inputs.length));try{for(u.s();!(r=u.n()).done;){var o=r.value;try{this.signInputHD(o,e,t),n.push(!0)}catch(s){n.push(!1)}}}catch(s){u.e(s)}finally{u.f()}if(n.every((function(e){return!1===e})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsHDAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[g.Transaction.SIGHASH_ALL];return new Promise((function(n,u){if(!e||!e.publicKey||!e.fingerprint)return u(new Error("Need HDSigner to sign input"));var o,s=[],a=[],c=i(se(t.data.inputs.length));try{for(c.s();!(o=c.n()).done;){var f=o.value;a.push(t.signInputHDAsync(f,e,r).then((function(){s.push(!0)}),(function(){s.push(!1)})))}}catch(p){c.e(p)}finally{c.f()}return Promise.all(a).then((function(){if(s.every((function(e){return!1===e})))return u(new Error("No inputs were signed"));n()}))}))}},{key:"signInputHD",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[g.Transaction.SIGHASH_ALL];if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");var i=Y(e,this.data.inputs,t);return i.forEach((function(t){return r.signInput(e,t,n)})),this}},{key:"signInputHDAsync",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[g.Transaction.SIGHASH_ALL];return new Promise((function(i,u){if(!t||!t.publicKey||!t.fingerprint)return u(new Error("Need HDSigner to sign input"));var o=Y(e,r.data.inputs,t).map((function(t){return r.signInputAsync(e,t,n)}));return Promise.all(o).then((function(){i()})).catch(u)}))}},{key:"signAllInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[g.Transaction.SIGHASH_ALL];if(!e||!e.publicKey)throw new Error("Need Signer to sign input");var r,n=[],u=i(se(this.data.inputs.length));try{for(u.s();!(r=u.n()).done;){var o=r.value;try{this.signInput(o,e,t),n.push(!0)}catch(s){n.push(!1)}}}catch(s){u.e(s)}finally{u.f()}if(n.every((function(e){return!1===e})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[g.Transaction.SIGHASH_ALL];return new Promise((function(u,o){if(!e||!e.publicKey)return o(new Error("Need Signer to sign input"));var s,a=[],c=[],f=i(t.data.inputs.entries());try{for(f.s();!(s=f.n()).done;){var p=n(s.value,1)[0];c.push(t.signInputAsync(p,e,r).then((function(){a.push(!0)}),(function(){a.push(!1)})))}}catch(h){f.e(h)}finally{f.f()}return Promise.all(c).then((function(){if(a.every((function(e){return!1===e})))return o(new Error("No inputs were signed"));u()}))}))}},{key:"signInput",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[g.Transaction.SIGHASH_ALL];if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var n=X(this.data.inputs,e,t.publicKey,this.__CACHE,r),i=n.hash,u=n.sighashType,o=[{pubkey:t.publicKey,signature:w.signature.encode(t.sign(i),u)}];return this.data.updateInput(e,{partialSig:o}),this}},{key:"signInputAsync",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[g.Transaction.SIGHASH_ALL];return Promise.resolve().then((function(){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var i=X(r.data.inputs,e,t.publicKey,r.__CACHE,n),u=i.hash,o=i.sighashType;return Promise.resolve(t.sign(u)).then((function(n){var i=[{pubkey:t.publicKey,signature:w.signature.encode(n,o)}];r.data.updateInput(e,{partialSig:i})}))}))}},{key:"toBuffer",value:function(){return E(this.__CACHE),this.data.toBuffer()}},{key:"toHex",value:function(){return E(this.__CACHE),this.data.toHex()}},{key:"toBase64",value:function(){return E(this.__CACHE),this.data.toBase64()}},{key:"updateGlobal",value:function(e){return this.data.updateGlobal(e),this}},{key:"updateInput",value:function(e,t){return t.witnessScript&&ie(t.witnessScript),this.data.updateInput(e,t),t.nonWitnessUtxo&&Z(this.__CACHE,this.data.inputs[e],e),this}},{key:"updateOutput",value:function(e,t){return this.data.updateOutput(e,t),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return this.data.addUnknownKeyValToGlobal(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){return this.data.addUnknownKeyValToInput(e,t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}},{key:"clearFinalizedInput",value:function(e){return this.data.clearFinalizedInput(e),this}}],[{key:"fromBase64",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.from(t,"base64");return this.fromBuffer(n,r)}},{key:"fromHex",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.from(t,"hex");return this.fromBuffer(n,r)}},{key:"fromBuffer",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Psbt.fromBuffer(e,S),i=new t(r,n);return R(i.__CACHE.__TX,i.__CACHE),i}}]),t}();t.Psbt=_;var S=function(e){return new b(e)},b=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.from([2,0,0,0,0,0,0,0,0,0]);o(this,t),this.tx=g.Transaction.fromBuffer(r),M(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}return s(t,[{key:"getInputOutputCounts",value:function(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}},{key:"addInput",value:function(t){if(void 0===t.hash||void 0===t.index||!e.isBuffer(t.hash)&&"string"!==typeof t.hash||"number"!==typeof t.index)throw new Error("Error adding input.");var r="string"===typeof t.hash?h.reverseBuffer(e.from(t.hash,"hex")):t.hash;this.tx.addInput(r,t.index,t.sequence)}},{key:"addOutput",value:function(t){if(void 0===t.script||void 0===t.value||!e.isBuffer(t.script)||"number"!==typeof t.value)throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}},{key:"toBuffer",value:function(){return this.tx.toBuffer()}}]),t}();function E(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function k(e,t,r){if(!t)return!1;var n;if((n=r?r.map((function(e){var r=d.fromPublicKey(e,{compressed:!0}).publicKey;return t.find((function(e){return e.pubkey.equals(r)}))})).filter((function(e){return!!e})):t).length>e)throw new Error("Too many signatures");return n.length===e}function T(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function O(e){return function(t){try{return e({output:t}),!0}catch(r){return!1}}}var P=O(y.p2ms),I=O(y.p2pk),N=O(y.p2pkh),A=O(y.p2wpkh),C=O(y.p2wsh),U=O(y.p2sh);function B(e){return function(t){return!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}}function H(e){if("number"!==typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function x(t,r){t.forEach((function(t){var n=!1,i=[];if(0===(t.partialSig||[]).length){if(!t.finalScriptSig&&!t.finalScriptWitness)return;i=function(t){var r=t.finalScriptSig&&w.decompile(t.finalScriptSig)||[],n=t.finalScriptWitness&&w.decompile(t.finalScriptWitness)||[];return r.concat(n).filter((function(t){return e.isBuffer(t)&&w.isCanonicalScriptSignature(t)})).map((function(e){return{signature:e}}))}(t)}else i=t.partialSig;if(i.forEach((function(e){var t=w.signature.decode(e.signature).hashType,i=[];switch(t&g.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&t){case g.Transaction.SIGHASH_ALL:break;case g.Transaction.SIGHASH_SINGLE:case g.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(r)&&(n=!0)})),n)throw new Error("Can not modify transaction, signatures exist.")}))}function L(e){if(e.sighashType&&e.partialSig){var t=e.partialSig,r=e.sighashType;t.forEach((function(e){var t=w.signature.decode(e.signature).hashType;if(r!==t)throw new Error("Signature sighash does not match input sighash type")}))}}function D(e,t,r){if(!ue(e,t))throw new Error("Can not ".concat(r," for this input with the key ").concat(e.toString("hex")))}function M(e){if(!e.ins.every((function(e){return e.script&&0===e.script.length&&e.witness&&0===e.witness.length})))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function R(e,t){e.ins.forEach((function(e){K(t,e)}))}function K(t,r){var n=h.reverseBuffer(e.from(r.hash)).toString("hex")+":"+r.index;if(t.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");t.__TX_IN_CACHE[n]=1}function W(e,t){return function(r,n,i,u){var o=e({redeem:{output:i}}).output;if(!n.equals(o))throw new Error("".concat(t," for ").concat(u," #").concat(r," doesn't match the scriptPubKey in the prevout"))}}var j=W(y.p2sh,"Redeem script"),V=W(y.p2wsh,"Witness script");function F(e,t,r,n){if(!r.every(T))throw new Error("PSBT must be finalized to calculate ".concat(t));if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;var i,u=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,u=!1):i=n.__TX.clone(),$(r,i,n,u),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function G(e,t,r,n,i,u){var o=oe(r);if(!function(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return k(1,e.partialSig);case"multisig":var n=y.p2ms({output:t});return k(n.m,e.partialSig,n.pubkeys);default:return!1}}(t,r,o))throw new Error("Can not finalize input #".concat(e));return function(e,t,r,n,i,u){var o,s,a=function(e,t,r){var n;switch(t){case"multisig":var i=function(e,t){return y.p2ms({output:e}).pubkeys.map((function(e){return(t.filter((function(t){return t.pubkey.equals(e)}))[0]||{}).signature})).filter((function(e){return!!e}))}(e,r);n=y.p2ms({output:e,signatures:i});break;case"pubkey":n=y.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=y.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=y.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),c=u?y.p2wsh({redeem:a}):null,f=i?y.p2sh({redeem:c||a}):null;n?(s=Q(c?c.witness:a.witness),f&&(o=f.input)):o=f?f.input:a.input;return{finalScriptSig:o,finalScriptWitness:s}}(r,o,t.partialSig,n,i,u)}function X(e,t,r,n,i){var u=q(t,f.checkForInput(e,t),n,!1,i),o=u.hash,s=u.sighashType;return D(r,u.script,"sign"),{hash:o,sighashType:s}}function q(e,t,r,n,i){var u,o,s=r.__TX,a=t.sighashType||g.Transaction.SIGHASH_ALL;if(i&&i.indexOf(a)<0){var c=function(e){var t=e&g.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case g.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case g.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case g.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(a);throw new Error("Sighash type is not allowed. Retry the sign method passing the "+"sighashTypes array of whitelisted types. Sighash type: ".concat(c))}if(t.nonWitnessUtxo){var f=ee(r,t,e),p=s.ins[e].hash,h=f.getHash();if(!p.equals(h))throw new Error("Non-witness UTXO hash for input #".concat(e," doesn't match the hash specified in the prevout"));var l=s.ins[e].index;o=f.outs[l]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");o=t.witnessUtxo}var d=ne(o.script,e,"input",t.redeemScript,t.witnessScript),v=d.meaningfulScript,w=d.type;if(["p2sh-p2wsh","p2wsh"].indexOf(w)>=0)u=s.hashForWitnessV0(e,v,o.value,a);else if(A(v)){var m=y.p2pkh({hash:v.slice(2)}).output;u=s.hashForWitnessV0(e,m,o.value,a)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Input #".concat(e," has witnessUtxo but non-segwit script: ")+"".concat(v.toString("hex")));n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),u=s.hashForSignature(e,v,a)}return{script:v,sighashType:a,hash:u}}function J(e,t,r){var n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){var u=ee(r,t,e),o=n.ins[e].index;i.script=u.outs[o].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||A(i.script))&&(i.isSegwit=!0),i}function Y(e,t,r){var n=f.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");var i=n.bip32Derivation.map((function(e){return e.masterFingerprint.equals(r.fingerprint)?e:void 0})).filter((function(e){return!!e}));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((function(e){var t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function z(e){var t=0;function r(){var r=c.decode(e,t);return t+=c.decode.bytes,r}function n(){return n=r(),t+=n,e.slice(t-n,t);var n}return function(){for(var e=r(),t=[],i=0;i<e;i++)t.push(n());return t}()}function Q(t){var r,n=e.allocUnsafe(0);function i(t){var r=n.length,i=c.encodingLength(t);n=e.concat([n,e.allocUnsafe(i)]),c.encode(t,n,r)}function u(t){i(t.length),function(t){n=e.concat([n,e.from(t)])}(t)}return i((r=t).length),r.forEach(u),n}function Z(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;var n=g.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;var i=e,u=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get:function(){var e=i.__NON_WITNESS_UTXO_BUF_CACHE[u],t=i.__NON_WITNESS_UTXO_TX_CACHE[u];if(void 0!==e)return e;var r=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[u]=r,r},set:function(e){i.__NON_WITNESS_UTXO_BUF_CACHE[u]=e}})}function $(e,t,r,n){var i=0;e.forEach((function(e,u){if(n&&e.finalScriptSig&&(t.ins[u].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[u].witness=z(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){var o=ee(r,e,u),s=t.ins[u].index,a=o.outs[s];i+=a.value}}));var u=t.outs.reduce((function(e,t){return e+t.value}),0),o=i-u;if(o<0)throw new Error("Outputs are spending more than Inputs");var s=t.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(o/s)}function ee(e,t,r){var n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||Z(e,t,r),n[r]}function te(e,t,r){if(void 0!==t.witnessUtxo)return t.witnessUtxo.script;if(void 0!==t.nonWitnessUtxo)return ee(r,t,e).outs[r.__TX.ins[e].index].script;throw new Error("Can't find pubkey in input without Utxo data")}function re(e){return 33===e.length&&w.isCanonicalPubKey(e)}function ne(e,t,r,n,i){var u,o=U(e),s=o&&n&&C(n),a=C(e);if(o&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");return s?(u=i,j(t,e,n,r),V(t,n,i,r),ie(u)):a?(u=i,V(t,e,i,r),ie(u)):o?(u=n,j(t,e,n,r)):u=e,{meaningfulScript:u,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function ie(e){if(A(e)||U(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function ue(e,t){var r=l.hash160(e),n=w.decompile(t);if(null===n)throw new Error("Unknown script error");return n.some((function(t){return"number"!==typeof t&&(t.equals(e)||t.equals(r))}))}function oe(e){return A(e)?"witnesspubkeyhash":N(e)?"pubkeyhash":P(e)?"multisig":I(e)?"pubkey":"nonstandard"}function se(e){return u(Array(e).keys())}}).call(this,r(5).Buffer)},4060:function(e,t,r){"use strict";(function(e){var n=r(11),i=r(26);Object.defineProperty(t,"__esModule",{value:!0});var u=r(4061),o=r(3228),s=r(2848),a=r(3229),c=function(){function t(e){n(this,t),this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}return i(t,[{key:"toBase64",value:function(){return this.toBuffer().toString("base64")}},{key:"toHex",value:function(){return this.toBuffer().toString("hex")}},{key:"toBuffer",value:function(){return o.psbtToBuffer(this)}},{key:"updateGlobal",value:function(e){return a.updateGlobal(e,this.globalMap),this}},{key:"updateInput",value:function(e,t){var r=a.checkForInput(this.inputs,e);return a.updateInput(t,r),this}},{key:"updateOutput",value:function(e,t){var r=a.checkForOutput(this.outputs,e);return a.updateOutput(t,r),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return a.checkHasKey(e,this.globalMap.unknownKeyVals,a.getEnumLength(s.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){var r=a.checkForInput(this.inputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){var r=a.checkForOutput(this.outputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addInput",value:function(e){var t=this;this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(e){return t.addUnknownKeyValToInput(n,e)})),a.addInputAttributes(this.inputs,e),this}},{key:"addOutput",value:function(e){var t=this;this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(e){return t.addUnknownKeyValToInput(n,e)})),a.addOutputAttributes(this.outputs,e),this}},{key:"clearFinalizedInput",value:function(e){var t=a.checkForInput(this.inputs,e);a.inputCheckUncleanFinalized(e,t);for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(i)||delete t[i]}return this}},{key:"combine",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=u.combine([this].concat(t));return Object.assign(this,n),this}},{key:"getTransaction",value:function(){return this.globalMap.unsignedTx.toBuffer()}}],[{key:"fromBase64",value:function(t,r){var n=e.from(t,"base64");return this.fromBuffer(n,r)}},{key:"fromHex",value:function(t,r){var n=e.from(t,"hex");return this.fromBuffer(n,r)}},{key:"fromBuffer",value:function(e,t){var r=o.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}}]),t}();t.Psbt=c}).call(this,r(5).Buffer)},4061:function(e,t,r){"use strict";var n=r(53);Object.defineProperty(t,"__esModule",{value:!0});var i=r(3228);function u(e,t,r){return function(n){if(!e.has(n)){var i=r.filter((function(e){return e.key.toString("hex")===n}))[0];t.push(i),e.add(n)}}}function o(e){return e.globalMap.unsignedTx}function s(e){var t=new Set;return e.forEach((function(e){var r=e.key.toString("hex");if(t.has(r))throw new Error("Combine: KeyValue Map keys should be unique");t.add(r)})),t}t.combine=function(e){var t=e[0],r=i.psbtToKeyVals(t),a=e.slice(1);if(0===a.length)throw new Error("Combine: Nothing to combine");var c=o(t);if(void 0===c)throw new Error("Combine: Self missing transaction");var f,p=s(r.globalKeyVals),h=r.inputKeyVals.map(s),l=r.outputKeyVals.map(s),d=n(a);try{var v=function(){var e=f.value,t=o(e);if(void 0===t||!t.toBuffer().equals(c.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");var n=i.psbtToKeyVals(e);s(n.globalKeyVals).forEach(u(p,r.globalKeyVals,n.globalKeyVals)),n.inputKeyVals.map(s).forEach((function(e,t){return e.forEach(u(h[t],r.inputKeyVals[t],n.inputKeyVals[t]))})),n.outputKeyVals.map(s).forEach((function(e,t){return e.forEach(u(l[t],r.outputKeyVals[t],n.outputKeyVals[t]))}))};for(d.s();!(f=d.n()).done;)v()}catch(y){d.e(y)}finally{d.f()}return i.psbtFromKeyVals(c,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}},4062:function(e,t,r){"use strict";(function(e){var n=r(53);Object.defineProperty(t,"__esModule",{value:!0});var i=r(3103),u=r(3104),o=r(3008),s=r(2848);function a(t,r,n){if(!r.equals(e.from([n])))throw new Error("Format Error: Invalid ".concat(t," key: ").concat(r.toString("hex")))}function c(e,t){var r,o=t.globalMapKeyVals,c=t.inputKeyVals,f=t.outputKeyVals,p={unsignedTx:e},h=0,l=n(o);try{for(l.s();!(r=l.n()).done;){var d=r.value;switch(d.key[0]){case s.GlobalTypes.UNSIGNED_TX:if(a("global",d.key,s.GlobalTypes.UNSIGNED_TX),h>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");h++;break;case s.GlobalTypes.GLOBAL_XPUB:void 0===p.globalXpub&&(p.globalXpub=[]),p.globalXpub.push(i.globals.globalXpub.decode(d));break;default:p.unknownKeyVals||(p.unknownKeyVals=[]),p.unknownKeyVals.push(d)}}}catch(B){l.e(B)}finally{l.f()}var v,y=c.length,w=f.length,g=[],m=[],_=n(u.range(y));try{for(_.s();!(v=_.n()).done;){var S,b=v.value,E={},k=n(c[b]);try{for(k.s();!(S=k.n()).done;){var T=S.value;switch(i.inputs.checkPubkey(T),T.key[0]){case s.InputTypes.NON_WITNESS_UTXO:if(a("input",T.key,s.InputTypes.NON_WITNESS_UTXO),void 0!==E.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");E.nonWitnessUtxo=i.inputs.nonWitnessUtxo.decode(T);break;case s.InputTypes.WITNESS_UTXO:if(a("input",T.key,s.InputTypes.WITNESS_UTXO),void 0!==E.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");E.witnessUtxo=i.inputs.witnessUtxo.decode(T);break;case s.InputTypes.PARTIAL_SIG:void 0===E.partialSig&&(E.partialSig=[]),E.partialSig.push(i.inputs.partialSig.decode(T));break;case s.InputTypes.SIGHASH_TYPE:if(a("input",T.key,s.InputTypes.SIGHASH_TYPE),void 0!==E.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");E.sighashType=i.inputs.sighashType.decode(T);break;case s.InputTypes.REDEEM_SCRIPT:if(a("input",T.key,s.InputTypes.REDEEM_SCRIPT),void 0!==E.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");E.redeemScript=i.inputs.redeemScript.decode(T);break;case s.InputTypes.WITNESS_SCRIPT:if(a("input",T.key,s.InputTypes.WITNESS_SCRIPT),void 0!==E.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");E.witnessScript=i.inputs.witnessScript.decode(T);break;case s.InputTypes.BIP32_DERIVATION:void 0===E.bip32Derivation&&(E.bip32Derivation=[]),E.bip32Derivation.push(i.inputs.bip32Derivation.decode(T));break;case s.InputTypes.FINAL_SCRIPTSIG:a("input",T.key,s.InputTypes.FINAL_SCRIPTSIG),E.finalScriptSig=i.inputs.finalScriptSig.decode(T);break;case s.InputTypes.FINAL_SCRIPTWITNESS:a("input",T.key,s.InputTypes.FINAL_SCRIPTWITNESS),E.finalScriptWitness=i.inputs.finalScriptWitness.decode(T);break;case s.InputTypes.POR_COMMITMENT:a("input",T.key,s.InputTypes.POR_COMMITMENT),E.porCommitment=i.inputs.porCommitment.decode(T);break;default:E.unknownKeyVals||(E.unknownKeyVals=[]),E.unknownKeyVals.push(T)}}}catch(B){k.e(B)}finally{k.f()}g.push(E)}}catch(B){_.e(B)}finally{_.f()}var O,P=n(u.range(w));try{for(P.s();!(O=P.n()).done;){var I,N=O.value,A={},C=n(f[N]);try{for(C.s();!(I=C.n()).done;){var U=I.value;switch(i.outputs.checkPubkey(U),U.key[0]){case s.OutputTypes.REDEEM_SCRIPT:if(a("output",U.key,s.OutputTypes.REDEEM_SCRIPT),void 0!==A.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");A.redeemScript=i.outputs.redeemScript.decode(U);break;case s.OutputTypes.WITNESS_SCRIPT:if(a("output",U.key,s.OutputTypes.WITNESS_SCRIPT),void 0!==A.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");A.witnessScript=i.outputs.witnessScript.decode(U);break;case s.OutputTypes.BIP32_DERIVATION:void 0===A.bip32Derivation&&(A.bip32Derivation=[]),A.bip32Derivation.push(i.outputs.bip32Derivation.decode(U));break;default:A.unknownKeyVals||(A.unknownKeyVals=[]),A.unknownKeyVals.push(U)}}}catch(B){C.e(B)}finally{C.f()}m.push(A)}}catch(B){P.e(B)}finally{P.f()}return{globalMap:p,inputs:g,outputs:m}}t.psbtFromBuffer=function(e,t){var r=0;function i(){var t=o.decode(e,r);r+=o.encodingLength(t);var n=e.slice(r,r+t);return r+=t,n}function a(){return{key:i(),value:i()}}function f(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");var t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){var t=e.readUInt32BE(r);return r+=4,t}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){var t=e.readUInt8(r);return r+=1,t}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");for(var p=[],h={};!f();){var l=a(),d=l.key.toString("hex");if(h[d])throw new Error("Format Error: Keys must be unique for global keymap: key "+d);h[d]=1,p.push(l)}var v=p.filter((function(e){return e.key[0]===s.GlobalTypes.UNSIGNED_TX}));if(1!==v.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");var y,w=t(v[0].value),g=w.getInputOutputCounts(),m=g.inputCount,_=g.outputCount,S=[],b=[],E=n(u.range(m));try{for(E.s();!(y=E.n()).done;){for(var k=y.value,T={},O=[];!f();){var P=a(),I=P.key.toString("hex");if(T[I])throw new Error("Format Error: Keys must be unique for each input: input index "+k+" key "+I);T[I]=1,O.push(P)}S.push(O)}}catch(L){E.e(L)}finally{E.f()}var N,A=n(u.range(_));try{for(A.s();!(N=A.n()).done;){for(var C=N.value,U={},B=[];!f();){var H=a(),x=H.key.toString("hex");if(U[x])throw new Error("Format Error: Keys must be unique for each output: output index "+C+" key "+x);U[x]=1,B.push(H)}b.push(B)}}catch(L){A.e(L)}finally{A.f()}return c(w,{globalMapKeyVals:p,inputKeyVals:S,outputKeyVals:b})},t.checkKeyBuffer=a,t.psbtFromKeyVals=c}).call(this,r(5).Buffer)},4063:function(e,t,r){"use strict";(function(e){var n=r(53),i=r(255);Object.defineProperty(t,"__esModule",{value:!0});var u=r(2848);t.decode=function(e){if(e.key[0]!==u.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");var t,r,o=e.key.slice(1),s={masterFingerprint:e.value.slice(0,4),extendedPubkey:o,path:"m"},a=n((r=e.value.length/4-1,i(Array(r).keys())));try{for(a.s();!(t=a.n()).done;){var c=t.value,f=e.value.readUInt32LE(4*c+4),p=!!(2147483648&f),h=2147483647&f;s.path+="/"+h.toString(10)+(p?"'":"")}}catch(l){a.e(l)}finally{a.f()}return s},t.encode=function(t){var r=e.from([u.GlobalTypes.GLOBAL_XPUB]),n=e.concat([r,t.extendedPubkey]),i=t.path.split("/"),o=e.allocUnsafe(4*i.length);t.masterFingerprint.copy(o,0);var s=4;return i.slice(1).forEach((function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),o.writeUInt32LE(r,s),s+=4})),{key:n,value:o}},t.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",t.check=function(t){var r=t.extendedPubkey,n=t.masterFingerprint,i=t.path;return e.isBuffer(r)&&78===r.length&&[2,3].indexOf(r[45])>-1&&e.isBuffer(n)&&4===n.length&&"string"===typeof i&&!!i.match(/^m(\/\d+'?)+$/)},t.canAddToArray=function(e,t,r){var n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.extendedPubkey.equals(t.extendedPubkey)})).length)}}).call(this,r(5).Buffer)},4064:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848);t.encode=function(t){return{key:e.from([n.GlobalTypes.UNSIGNED_TX]),value:t.toBuffer()}}}).call(this,r(5).Buffer)},4065:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848);t.decode=function(e){if(e.key[0]!==n.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(t){return{key:e.from([n.InputTypes.FINAL_SCRIPTSIG]),value:t}},t.expected="Buffer",t.check=function(t){return e.isBuffer(t)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}}).call(this,r(5).Buffer)},4066:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848);t.decode=function(e){if(e.key[0]!==n.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(t){return{key:e.from([n.InputTypes.FINAL_SCRIPTWITNESS]),value:t}},t.expected="Buffer",t.check=function(t){return e.isBuffer(t)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}}).call(this,r(5).Buffer)},4067:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848);t.decode=function(e){if(e.key[0]!==n.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(t){return{key:e.from([n.InputTypes.NON_WITNESS_UTXO]),value:t}},t.expected="Buffer",t.check=function(t){return e.isBuffer(t)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}}).call(this,r(5).Buffer)},4068:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848);t.decode=function(e){if(e.key[0]!==n.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},t.encode=function(t){var r=e.from([n.InputTypes.PARTIAL_SIG]);return{key:e.concat([r,t.pubkey]),value:t.signature}},t.expected="{ pubkey: Buffer; signature: Buffer; }",t.check=function(t){return e.isBuffer(t.pubkey)&&e.isBuffer(t.signature)&&[33,65].includes(t.pubkey.length)&&[2,3,4].includes(t.pubkey[0])&&function(t){if(!e.isBuffer(t)||t.length<9)return!1;if(48!==t[0])return!1;if(t.length!==t[1]+3)return!1;if(2!==t[2])return!1;var r=t[3];if(r>33||r<1)return!1;if(2!==t[3+r+1])return!1;var n=t[3+r+2];return!(n>33||n<1)&&t.length===3+r+2+n+2}(t.signature)},t.canAddToArray=function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)})).length)}}).call(this,r(5).Buffer)},4069:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848);t.decode=function(e){if(e.key[0]!==n.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},t.encode=function(t){return{key:e.from([n.InputTypes.POR_COMMITMENT]),value:e.from(t,"utf8")}},t.expected="string",t.check=function(e){return"string"===typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}}).call(this,r(5).Buffer)},4070:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848);t.decode=function(e){if(e.key[0]!==n.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},t.encode=function(t){var r=e.from([n.InputTypes.SIGHASH_TYPE]),i=e.allocUnsafe(4);return i.writeUInt32LE(t,0),{key:r,value:i}},t.expected="number",t.check=function(e){return"number"===typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}}).call(this,r(5).Buffer)},4071:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2848),i=r(3104),u=r(3008);t.decode=function(e){if(e.key[0]!==n.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));var t=i.readUInt64LE(e.value,0),r=8,o=u.decode(e.value,r);r+=u.encodingLength(o);var s=e.value.slice(r);if(s.length!==o)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:s,value:t}},t.encode=function(t){var r=t.script,o=t.value,s=u.encodingLength(r.length),a=e.allocUnsafe(8+s+r.length);return i.writeUInt64LE(a,o,0),u.encode(r.length,a,8),r.copy(a,8+s),{key:e.from([n.InputTypes.WITNESS_UTXO]),value:a}},t.expected="{ script: Buffer; value: number; }",t.check=function(t){return e.isBuffer(t.script)&&"number"===typeof t.value},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}}).call(this,r(5).Buffer)},4072:function(e,t,r){"use strict";(function(e){var n=r(53),i=r(255);Object.defineProperty(t,"__esModule",{value:!0});t.makeConverter=function(t){return{decode:function(e){if(e.key[0]!==t)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");var r,u,o=e.key.slice(1),s={masterFingerprint:e.value.slice(0,4),pubkey:o,path:"m"},a=n((u=e.value.length/4-1,i(Array(u).keys())));try{for(a.s();!(r=a.n()).done;){var c=r.value,f=e.value.readUInt32LE(4*c+4),p=!!(2147483648&f),h=2147483647&f;s.path+="/"+h.toString(10)+(p?"'":"")}}catch(l){a.e(l)}finally{a.f()}return s},encode:function(r){var n=e.from([t]),i=e.concat([n,r.pubkey]),u=r.path.split("/"),o=e.allocUnsafe(4*u.length);r.masterFingerprint.copy(o,0);var s=4;return u.slice(1).forEach((function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),o.writeUInt32LE(r,s),s+=4})),{key:i,value:o}},check:function(t){return e.isBuffer(t.pubkey)&&e.isBuffer(t.masterFingerprint)&&"string"===typeof t.path&&[33,65].includes(t.pubkey.length)&&[2,3,4].includes(t.pubkey[0])&&4===t.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)})).length)}}}}).call(this,r(5).Buffer)},4073:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeChecker=function(e){return function(t){var r;if(e.includes(t.key[0])&&(33!==(r=t.key.slice(1)).length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}}},4074:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(t){return{decode:function(e){if(e.key[0]!==t)throw new Error("Decode Error: could not decode redeemScript with key 0x"+e.key.toString("hex"));return e.value},encode:function(r){return{key:e.from([t]),value:r}},check:function(t){return e.isBuffer(t)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}}).call(this,r(5).Buffer)},4075:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(t){return{decode:function(e){if(e.key[0]!==t)throw new Error("Decode Error: could not decode witnessScript with key 0x"+e.key.toString("hex"));return e.value},encode:function(r){return{key:e.from([t]),value:r}},check:function(t){return e.isBuffer(t)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}}).call(this,r(5).Buffer)},4076:function(e,t,r){"use strict";(function(e){var n=r(67);Object.defineProperty(t,"__esModule",{value:!0});var i=r(3103),u=r(3104);t.psbtToBuffer=function(t){var r=a({globalMap:t.globalMap,inputs:t.inputs,outputs:t.outputs}),n=r.globalKeyVals,i=r.inputKeyVals,o=r.outputKeyVals,s=u.keyValsToBuffer(n),c=function(t){return 0===t.length?[e.from([0])]:t.map(u.keyValsToBuffer)},f=c(i),p=c(o),h=e.allocUnsafe(5);return h.writeUIntBE(482972169471,0,5),e.concat([h,s].concat(f,p))};var o=function(e,t){return e.key.compare(t.key)};function s(e,t){var r=new Set,i=Object.entries(e).reduce((function(e,i){var u=n(i,2),o=u[0],s=u[1];if("unknownKeyVals"===o)return e;var a=t[o];if(void 0===a)return e;var c=(Array.isArray(s)?s:[s]).map(a.encode);return c.map((function(e){return e.key.toString("hex")})).forEach((function(e){if(r.has(e))throw new Error("Serialize Error: Duplicate key: "+e);r.add(e)})),e.concat(c)}),[]),u=e.unknownKeyVals?e.unknownKeyVals.filter((function(e){return!r.has(e.key.toString("hex"))})):[];return i.concat(u).sort(o)}function a(e){var t=e.globalMap,r=e.inputs,n=e.outputs;return{globalKeyVals:s(t,i.globals),inputKeyVals:r.map((function(e){return s(e,i.inputs)})),outputKeyVals:n.map((function(e){return s(e,i.outputs)}))}}t.psbtToKeyVals=a}).call(this,r(5).Buffer)},4077:function(e,t,r){"use strict";(function(e){var n=r(67),i=r(53),u=r(11),o=r(26);Object.defineProperty(t,"__esModule",{value:!0});var s=r(3100),a=r(3006),c=r(4078),f=r(2866),p=r(3101),h=r(2847),l=r(3004),d=r(2823),v=r(2823),y=r(3007),w=r(2858),g=r(2831),m=c.types,_=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function S(e,t,r){try{g(e,t)}catch(n){throw new Error(r)}}var b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.bitcoin,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;u(this,t),this.network=e,this.maximumFeeRate=r,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new y.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}return o(t,[{key:"setLowR",value:function(e){return g(g.maybe(g.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}},{key:"setLockTime",value:function(e){if(g(w.UInt32,e),this.__INPUTS.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return void 0!==e}))})))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}},{key:"setVersion",value:function(e){g(w.UInt32,e),this.__TX.version=e}},{key:"addInput",value:function(t,r,n,i){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var u,o;if("string"===typeof(o=t)||o instanceof String)t=a.reverseBuffer(e.from(t,"hex"));else if(function(e){return e instanceof y.Transaction}(t)){var s=t.outs[r];i=s.script,u=s.value,t=t.getHash(!1)}return this.__addInputUnsafe(t,r,{sequence:n,prevOutScript:i,value:u})}},{key:"addOutput",value:function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"===typeof e&&(e=s.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}},{key:"build",value:function(){return this.__build(!1)}},{key:"buildIncomplete",value:function(){return this.__build(!0)}},{key:"sign",value:function(e,t,r,u,o,s){!function(e){var t,r=e.input,u=e.ourPubKey,o=e.keyPair,s=e.signatureHash,a=e.hashType,c=e.useLowR,f=!1,p=i(r.pubkeys.entries());try{for(p.s();!(t=p.n()).done;){var h=n(t.value,2),l=h[0],v=h[1];if(u.equals(v)){if(r.signatures[l])throw new Error("Signature already exists");if(33!==u.length&&r.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var y=o.sign(s,c);r.signatures[l]=d.signature.encode(y,a),f=!0}}}catch(w){p.e(w)}finally{p.f()}if(!f)throw new Error("Key pair cannot sign for this input")}(function(e,t,r,n,i,u,o,s,a,c,f){var p;if("number"===typeof i)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),p=i;else{if("object"!==typeof i)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(e,t){if(!_.has(t.prevOutScriptType))throw new TypeError('Unknown prevOutScriptType "'.concat(t.prevOutScriptType,'"'));S(g.Number,t.vin,"sign must include vin parameter as Number (input index)"),S(w.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),S(g.maybe(g.Number),t.hashType,"sign hashType parameter must be a number");var r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pkh: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(g.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pk: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(g.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2wpkh: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(w.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2ms: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(g.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2sh-p2wpkh: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),S(w.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),S(g.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));S(g.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(w.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));S(g.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),S(g.Buffer,t.redeemScript,"".concat(n," requires witnessScript")),S(w.Satoshi,t.witnessValue,"".concat(n," requires witnessScript"))}}(t,i),p=i.vin,u=i.keyPair,o=i.redeemScript,s=i.hashType,a=i.witnessValue,c=i.witnessScript}if(void 0===u)throw new Error("sign requires keypair");if(u.network&&u.network!==e)throw new TypeError("Inconsistent network");if(!t[p])throw new Error("No input at index: "+p);if(s=s||y.Transaction.SIGHASH_ALL,r(s))throw new Error("Transaction needs outputs");var h=t[p];if(void 0!==h.redeemScript&&o&&!h.redeemScript.equals(o))throw new Error("Inconsistent redeemScript");var v,b=u.publicKey||u.getPublicKey&&u.getPublicKey();if(!O(h)){if(void 0!==a){if(void 0!==h.value&&h.value!==a)throw new Error("Input did not match witnessValue");g(w.Satoshi,a),h.value=a}if(!O(h)){var E=function(e,t,r,n){if(r&&n){var i=l.p2wsh({redeem:{output:n}}),u=l.p2wsh({output:r}),o=l.p2sh({redeem:{output:r}}),s=l.p2sh({redeem:i});if(!i.hash.equals(u.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!o.hash.equals(s.hash))throw new Error("Redeem script inconsistent with prevOutScript");var a=k(i.redeem.output,t);if(!a.pubkeys)throw new Error(a.type+" not supported as witnessScript ("+d.toASM(n)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(a.signatures=e.signatures);var c=n;if(a.type===m.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:m.P2WSH,witnessScript:n,witnessScriptType:a.type,prevOutType:m.P2SH,prevOutScript:o.output,hasWitness:!0,signScript:c,signType:a.type,pubkeys:a.pubkeys,signatures:a.signatures,maxSignatures:a.maxSignatures}}if(r){var f=l.p2sh({redeem:{output:r}});if(e.prevOutScript){var p;try{p=l.p2sh({output:e.prevOutScript})}catch(T){throw new Error("PrevOutScript must be P2SH")}if(!f.hash.equals(p.hash))throw new Error("Redeem script inconsistent with prevOutScript")}var h=k(f.redeem.output,t);if(!h.pubkeys)throw new Error(h.type+" not supported as redeemScript ("+d.toASM(r)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(h.signatures=e.signatures);var v=r;return h.type===m.P2WPKH&&(v=l.p2pkh({pubkey:h.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:h.type,prevOutType:m.P2SH,prevOutScript:f.output,hasWitness:h.type===m.P2WPKH,signScript:v,signType:h.type,pubkeys:h.pubkeys,signatures:h.signatures,maxSignatures:h.maxSignatures}}if(n){var y=l.p2wsh({redeem:{output:n}});if(e.prevOutScript){var w=l.p2wsh({output:e.prevOutScript});if(!y.hash.equals(w.hash))throw new Error("Witness script inconsistent with prevOutScript")}var g=k(y.redeem.output,t);if(!g.pubkeys)throw new Error(g.type+" not supported as witnessScript ("+d.toASM(n)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(g.signatures=e.signatures);var _=n;if(g.type===m.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:g.type,prevOutType:m.P2WSH,prevOutScript:y.output,hasWitness:!0,signScript:_,signType:g.type,pubkeys:g.pubkeys,signatures:g.signatures,maxSignatures:g.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===m.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===m.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");var S=k(e.prevOutScript,t);if(!S.pubkeys)throw new Error(S.type+" not supported ("+d.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(S.signatures=e.signatures);var b=e.prevOutScript;return S.type===m.P2WPKH&&(b=l.p2pkh({pubkey:S.pubkeys[0]}).output),{prevOutType:S.type,prevOutScript:e.prevOutScript,hasWitness:S.type===m.P2WPKH,signScript:b,signType:S.type,pubkeys:S.pubkeys,signatures:S.signatures,maxSignatures:S.maxSignatures}}var E=l.p2pkh({pubkey:t}).output;return{prevOutType:m.P2PKH,prevOutScript:E,hasWitness:!1,signScript:E,signType:m.P2PKH,pubkeys:[t],signatures:[void 0]}}(h,b,o,c);Object.assign(h,E)}if(!O(h))throw Error(h.prevOutType+" not supported")}v=h.hasWitness?n.hashForWitnessV0(p,h.signScript,h.value,s):n.hashForSignature(p,h.signScript,s);return{input:h,ourPubKey:b,keyPair:u,signatureHash:v,hashType:s,useLowR:!!f}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,t,r,u,o,s,this.__USE_LOW_R))}},{key:"__addInputUnsafe",value:function(e,t,r){if(y.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");var n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);var i={};if(void 0!==r.script&&(i=E(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){var u;if(!i.pubkeys&&!i.signatures){var o=k(r.prevOutScript);o.pubkeys&&(i.pubkeys=o.pubkeys,i.signatures=o.signatures),u=o.type}i.prevOutScript=r.prevOutScript,i.prevOutType=u||c.output(r.prevOutScript)}var s=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[s]=i,this.__PREV_TX_SET[n]=!0,s}},{key:"__build",value:function(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}var t=this.__TX.clone();if(this.__INPUTS.forEach((function(r,n){if(!r.prevOutType&&!e)throw new Error("Transaction is not complete");var i=T(r.prevOutType,r,e);if(i)t.setInputScript(n,i.input),t.setWitness(n,i.witness);else{if(!e&&r.prevOutType===m.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}},{key:"__canModifyInputs",value:function(){return this.__INPUTS.every((function(e){return!e.signatures||e.signatures.every((function(e){return!e||0!==(P(e)&y.Transaction.SIGHASH_ANYONECANPAY)}))}))}},{key:"__needsOutputs",value:function(e){return e===y.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return!!e&&!(P(e)&y.Transaction.SIGHASH_NONE)}))}))}},{key:"__canModifyOutputs",value:function(){var e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every((function(r){return void 0===r.signatures||r.signatures.every((function(r){if(!r)return!0;var n=31&P(r);return n===y.Transaction.SIGHASH_NONE||n===y.Transaction.SIGHASH_SINGLE&&e<=t}))}))}},{key:"__overMaximumFees",value:function(e){return(this.__INPUTS.reduce((function(e,t){return e+(t.value>>>0)}),0)-this.__TX.outs.reduce((function(e,t){return e+t.value}),0))/e>this.maximumFeeRate}}],[{key:"fromTransaction",value:function(e,r){var n=new t(r);return n.setVersion(e.version),n.setLockTime(e.locktime),e.outs.forEach((function(e){n.addOutput(e.script,e.value)})),e.ins.forEach((function(e){n.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),n.__INPUTS.forEach((function(t,r){!function(e,t,r){if(e.redeemScriptType!==m.P2MS||!e.redeemScript)return;if(e.pubkeys.length===e.signatures.length)return;var n=e.signatures.concat();e.signatures=e.pubkeys.map((function(i){var u,o=p.fromPublicKey(i);return n.some((function(i,s){if(!i)return!1;var a=d.signature.decode(i),c=t.hashForSignature(r,e.redeemScript,a.hashType);return!!o.verify(c,a.signature)&&(n[s]=void 0,u=i,!0)})),u}))}(t,e,r)})),n}}]),t}();function E(e,t,r,n){if(0===e.length&&0===t.length)return{};if(!r){var i=c.input(e,!0),u=c.witness(t,!0);i===m.NONSTANDARD&&(i=void 0),u===m.NONSTANDARD&&(u=void 0),r=i||u}switch(r){case m.P2WPKH:var o=l.p2wpkh({witness:t}),s=o.output,a=o.pubkey,f=o.signature;return{prevOutScript:s,prevOutType:m.P2WPKH,pubkeys:[a],signatures:[f]};case m.P2PKH:var p=l.p2pkh({input:e}),h=p.output,v=p.pubkey,y=p.signature;return{prevOutScript:h,prevOutType:m.P2PKH,pubkeys:[v],signatures:[y]};case m.P2PK:var w=l.p2pk({input:e}).signature;return{prevOutType:m.P2PK,pubkeys:[void 0],signatures:[w]};case m.P2MS:var g=l.p2ms({input:e,output:n},{allowIncomplete:!0}),_=g.m,S=g.pubkeys,b=g.signatures;return{prevOutType:m.P2MS,pubkeys:S,signatures:b,maxSignatures:_}}if(r===m.P2SH){var k=l.p2sh({input:e,witness:t}),T=k.output,O=k.redeem,P=c.output(O.output),I=E(O.input,O.witness,P,O.output);return I.prevOutType?{prevOutScript:T,prevOutType:m.P2SH,redeemScript:O.output,redeemScriptType:I.prevOutType,witnessScript:I.witnessScript,witnessScriptType:I.witnessScriptType,pubkeys:I.pubkeys,signatures:I.signatures}:{}}if(r===m.P2WSH){var N,A=l.p2wsh({input:e,witness:t}),C=A.output,U=A.redeem,B=c.output(U.output);return(N=B===m.P2WPKH?E(U.input,U.witness,B):E(d.compile(U.witness),[],B,U.output)).prevOutType?{prevOutScript:C,prevOutType:m.P2WSH,witnessScript:U.output,witnessScriptType:N.prevOutType,pubkeys:N.pubkeys,signatures:N.signatures}:{}}return{prevOutType:m.NONSTANDARD,prevOutScript:e}}function k(e,t){g(w.Buffer,e);var r=c.output(e);switch(r){case m.P2PKH:if(!t)return{type:r};var n=l.p2pkh({output:e}).hash,i=f.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case m.P2WPKH:if(!t)return{type:r};var u=l.p2wpkh({output:e}).hash,o=f.hash160(t);return u.equals(o)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case m.P2PK:return{type:r,pubkeys:[l.p2pk({output:e}).pubkey],signatures:[void 0]};case m.P2MS:var s=l.p2ms({output:e});return{type:r,pubkeys:s.pubkeys,signatures:s.pubkeys.map((function(){})),maxSignatures:s.m}}return{type:r}}function T(e,t,r){var n=t.pubkeys||[],i=t.signatures||[];switch(e){case m.P2PKH:if(0===n.length)break;if(0===i.length)break;return l.p2pkh({pubkey:n[0],signature:i[0]});case m.P2WPKH:if(0===n.length)break;if(0===i.length)break;return l.p2wpkh({pubkey:n[0],signature:i[0]});case m.P2PK:if(0===n.length)break;if(0===i.length)break;return l.p2pk({signature:i[0]});case m.P2MS:var u=t.maxSignatures;i=r?i.map((function(e){return e||v.OPS.OP_0})):i.filter((function(e){return e}));var o=!r||u===i.length;return l.p2ms({m:u,pubkeys:n,signatures:i},{allowIncomplete:r,validate:o});case m.P2SH:var s=T(t.redeemScriptType,t,r);if(!s)return;return l.p2sh({redeem:{output:s.output||t.redeemScript,input:s.input,witness:s.witness}});case m.P2WSH:var a=T(t.witnessScriptType,t,r);if(!a)return;return l.p2wsh({redeem:{output:t.witnessScript,input:a.input,witness:a.witness}})}}function O(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function P(e){return e.readUInt8(e.length-1)}t.TransactionBuilder=b}).call(this,r(5).Buffer)},4078:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(3105),u=r(4081),o=r(3106),s=r(3107),a=r(4086),c=r(4089),f=r(4091),p=r(4093),h={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.types=h,t.output=function(e){if(f.output.check(e))return h.P2WPKH;if(p.output.check(e))return h.P2WSH;if(s.output.check(e))return h.P2PKH;if(a.output.check(e))return h.P2SH;var t=n.decompile(e);if(!t)throw new TypeError("Invalid script");return i.output.check(t)?h.P2MS:o.output.check(t)?h.P2PK:c.output.check(t)?h.WITNESS_COMMITMENT:u.output.check(t)?h.NULLDATA:h.NONSTANDARD},t.input=function(e,t){var r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return s.input.check(r)?h.P2PKH:a.input.check(r,t)?h.P2SH:i.input.check(r,t)?h.P2MS:o.input.check(r)?h.P2PK:h.NONSTANDARD},t.witness=function(e,t){var r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return f.input.check(r)?h.P2WPKH:p.input.check(r,t)?h.P2WSH:h.NONSTANDARD}},4079:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2823);function u(e){return e===i.OPS.OP_0||n.isCanonicalScriptSignature(e)}function o(e,t){var r=n.decompile(e);return!(r.length<2)&&(r[0]===i.OPS.OP_0&&(t?r.slice(1).every(u):r.slice(1).every(n.isCanonicalScriptSignature)))}t.check=o,o.toJSON=function(){return"multisig input"}},4080:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2823),u=r(2858),o=i.OPS.OP_RESERVED;function s(e,t){var r=n.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==i.OPS.OP_CHECKMULTISIG)return!1;if(!u.Number(r[0]))return!1;if(!u.Number(r[r.length-2]))return!1;var s=r[0]-o,a=r[r.length-2]-o;return!(s<=0)&&(!(a>16)&&(!(s>a)&&(a===r.length-3&&(!!t||r.slice(1,-2).every(n.isCanonicalPubKey)))))}t.check=s,s.toJSON=function(){return"multi-sig output"}},4081:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=n.OPS;function u(e){var t=n.compile(e);return t.length>1&&t[0]===i.OP_RETURN}t.check=u,u.toJSON=function(){return"null data output"};var o={check:u};t.output=o},4082:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823);function i(e){var t=n.decompile(e);return 1===t.length&&n.isCanonicalScriptSignature(t[0])}t.check=i,i.toJSON=function(){return"pubKey input"}},4083:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2823);function u(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalPubKey(t[0])&&t[1]===i.OPS.OP_CHECKSIG}t.check=u,u.toJSON=function(){return"pubKey output"}},4084:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823);function i(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalScriptSignature(t[0])&&n.isCanonicalPubKey(t[1])}t.check=i,i.toJSON=function(){return"pubKeyHash input"}},4085:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2823);function u(e){var t=n.compile(e);return 25===t.length&&t[0]===i.OPS.OP_DUP&&t[1]===i.OPS.OP_HASH160&&20===t[2]&&t[23]===i.OPS.OP_EQUALVERIFY&&t[24]===i.OPS.OP_CHECKSIG}t.check=u,u.toJSON=function(){return"pubKeyHash output"}},4086:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4087);t.input=n;var i=r(4088);t.output=i},4087:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(3105),u=r(3106),o=r(3107),s=r(3230),a=r(3231);function c(t,r){var c=n.decompile(t);if(c.length<1)return!1;var f=c[c.length-1];if(!e.isBuffer(f))return!1;var p=n.decompile(n.compile(c.slice(0,-1))),h=n.decompile(f);return!!h&&(!!n.isPushOnly(p)&&(1===c.length?a.check(h)||s.check(h):!(!o.input.check(p)||!o.output.check(h))||(!(!i.input.check(p,r)||!i.output.check(h))||!(!u.input.check(p)||!u.output.check(h)))))}t.check=c,c.toJSON=function(){return"scriptHash input"}}).call(this,r(5).Buffer)},4088:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2823);function u(e){var t=n.compile(e);return 23===t.length&&t[0]===i.OPS.OP_HASH160&&20===t[1]&&t[22]===i.OPS.OP_EQUAL}t.check=u,u.toJSON=function(){return"scriptHash output"}},4089:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4090);t.output=n},4090:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2823),u=r(2858),o=r(2831),s=e.from("aa21a9ed","hex");function a(e){var t=n.compile(e);return t.length>37&&t[0]===i.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(s)}t.check=a,a.toJSON=function(){return"Witness commitment output"},t.encode=function(t){o(u.Hash256bit,t);var r=e.allocUnsafe(36);return s.copy(r,0),t.copy(r,4),n.compile([i.OPS.OP_RETURN,r])},t.decode=function(e){return o(a,e),n.decompile(e)[1].slice(4,36)}}).call(this,r(5).Buffer)},4091:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4092);t.input=n;var i=r(3230);t.output=i},4092:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823);function i(e){var t,r=n.decompile(e);return 2===r.length&&n.isCanonicalScriptSignature(r[0])&&(t=r[1],n.isCanonicalPubKey(t)&&33===t.length)}t.check=i,i.toJSON=function(){return"witnessPubKeyHash input"}},4093:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4094);t.input=n;var i=r(3231);t.output=i},4094:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2823),i=r(2831),u=r(3105),o=r(3106),s=r(3107);function a(t,r){if(i(i.Array,t),t.length<1)return!1;var a=t[t.length-1];if(!e.isBuffer(a))return!1;var c=n.decompile(a);if(!c||0===c.length)return!1;var f=n.compile(t.slice(0,-1));return!(!s.input.check(f)||!s.output.check(c))||(!(!u.input.check(f,r)||!u.output.check(c))||!(!o.input.check(f)||!o.output.check(c)))}t.check=a,a.toJSON=function(){return"witnessScriptHash input"}}).call(this,r(5).Buffer)},4098:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function p(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?l(e):t}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=r(0),g=(r(21),r(4099)),m=r(3233);function _(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n<2048?(t+=String.fromCharCode(192|n>>6),t+=String.fromCharCode(128|63&n)):n<55296||n>=57344?(t+=String.fromCharCode(224|n>>12),t+=String.fromCharCode(128|n>>6&63),t+=String.fromCharCode(128|63&n)):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t+=String.fromCharCode(240|n>>18),t+=String.fromCharCode(128|n>>12&63),t+=String.fromCharCode(128|n>>6&63),t+=String.fromCharCode(128|63&n))}return t}var S={size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000",includeMargin:!1};function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[];return e.forEach((function(e,n){var i=null;e.forEach((function(u,o){if(!u&&null!==i)return r.push("M".concat(i+t," ").concat(n+t,"h").concat(o-i,"v1H").concat(i+t,"z")),void(i=null);if(o!==e.length-1)u&&null===i&&(i=o);else{if(!u)return;null===i?r.push("M".concat(o+t,",").concat(n+t," h1v1H").concat(o+t,"z")):r.push("M".concat(i+t,",").concat(n+t," h").concat(o+1-i,"v1H").concat(i+t,"z"))}}))})),r.join("")}function E(e,t){return e.slice().map((function(e,r){return r<t.y||r>=t.y+t.h?e:e.map((function(e,r){return(r<t.x||r>=t.x+t.w)&&e}))}))}function k(e,t){var r=e.imageSettings,n=e.size,i=e.includeMargin;if(null==r)return null;var u=i?4:0,o=t.length+2*u,s=Math.floor(.1*n),a=o/n,c=(r.width||s)*a,f=(r.height||s)*a,p=null==r.x?t.length/2-c/2:r.x*a,h=null==r.y?t.length/2-f/2:r.y*a,l=null;if(r.excavate){var d=Math.floor(p),v=Math.floor(h);l={x:d,y:v,w:Math.ceil(c+p-d),h:Math.ceil(f+h-v)}}return{x:p,y:h,h:f,w:c,excavation:l}}var T=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}(),O=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return y(l(r=p(this,(e=h(t)).call.apply(e,[this].concat(i)))),"_canvas",void 0),y(l(r),"_image",void 0),y(l(r),"state",{imgLoaded:!1}),y(l(r),"handleImageLoad",(function(){r.setState({imgLoaded:!0})})),r}return d(t,e),f(t,[{key:"componentDidMount",value:function(){this._image&&this._image.complete&&this.handleImageLoad(),this.update()}},{key:"componentWillReceiveProps",value:function(e){var t,r;(null===(t=this.props.imageSettings)||void 0===t?void 0:t.src)!==(null===(r=e.imageSettings)||void 0===r?void 0:r.src)&&this.setState({imgLoaded:!1})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var e=this.props,t=e.value,r=e.size,n=e.level,i=e.bgColor,u=e.fgColor,o=e.includeMargin,s=e.imageSettings,a=new g(-1,m[n]);if(a.addData(_(t)),a.make(),null!=this._canvas){var c=this._canvas,f=c.getContext("2d");if(!f)return;var p=a.modules;if(null===p)return;var h=o?4:0,l=p.length+2*h,d=k(this.props,p);null!=s&&null!=d&&null!=d.excavation&&(p=E(p,d.excavation));var v=window.devicePixelRatio||1;c.height=c.width=r*v;var y=r/l*v;f.scale(y,y),f.fillStyle=i,f.fillRect(0,0,l,l),f.fillStyle=u,T?f.fill(new Path2D(b(p,h))):p.forEach((function(e,t){e.forEach((function(e,r){e&&f.fillRect(r+h,t+h,1,1)}))})),this.state.imgLoaded&&this._image&&null!=d&&f.drawImage(this._image,d.x+h,d.y+h,d.w,d.h)}}},{key:"render",value:function(){var e=this,t=this.props,r=(t.value,t.size),n=(t.level,t.bgColor,t.fgColor,t.style),u=(t.includeMargin,t.imageSettings),a=s(t,["value","size","level","bgColor","fgColor","style","includeMargin","imageSettings"]),c=o({height:r,width:r},n),f=null,p=u&&u.src;return null!=u&&null!=p&&(f=w.createElement("img",{src:p,style:{display:"none"},onLoad:this.handleImageLoad,ref:function(t){return e._image=t}})),w.createElement(w.Fragment,null,w.createElement("canvas",i({style:c,height:r,width:r,ref:function(t){return e._canvas=t}},a)),f)}}]),t}(w.PureComponent);y(O,"defaultProps",S);var P=function(e){function t(){return a(this,t),p(this,h(t).apply(this,arguments))}return d(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.value,r=e.size,n=e.level,u=e.bgColor,o=e.fgColor,a=e.includeMargin,c=e.imageSettings,f=s(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),p=new g(-1,m[n]);p.addData(_(t)),p.make();var h=p.modules;if(null===h)return null;var l=a?4:0,d=h.length+2*l,v=k(this.props,h),y=null;null!=c&&null!=v&&(null!=v.excavation&&(h=E(h,v.excavation)),y=w.createElement("image",{xlinkHref:c.src,height:v.h,width:v.w,x:v.x+l,y:v.y+l,preserveAspectRatio:"none"}));var S=b(h,l);return w.createElement("svg",i({shapeRendering:"crispEdges",height:r,width:r,viewBox:"0 0 ".concat(d," ").concat(d)},f),w.createElement("path",{fill:u,d:"M0,0 h".concat(d,"v").concat(d,"H0z")}),w.createElement("path",{fill:o,d:S}),y)}}]),t}(w.PureComponent);y(P,"defaultProps",S);var I=function(e){var t=e.renderAs,r=s(e,["renderAs"]),n="svg"===t?P:O;return w.createElement(n,r)};I.defaultProps=o({renderAs:"canvas"},S),e.exports=I},4099:function(e,t,r){var n=r(4100),i=r(4101),u=r(4102),o=r(4103),s=r(3234);function a(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=a.prototype;c.addData=function(e){var t=new n(e);this.dataList.push(t),this.dataCache=null},c.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=i.getRSBlocks(e,this.errorCorrectLevel),r=new u,n=0,s=0;s<t.length;s++)n+=t[s].dataCount;for(s=0;s<this.dataList.length;s++){var a=this.dataList[s];r.put(a.mode,4),r.put(a.getLength(),o.getLengthInBits(a.mode,e)),a.write(r)}if(r.getLengthInBits()<=8*n)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},c.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[e+r][t+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},c.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=o.getLostPoint(this);(0==r||e>n)&&(e=n,t=r)}return t},c.createMovieClip=function(e,t,r){var n=e.createEmptyMovieClip(t,r);this.make();for(var i=0;i<this.modules.length;i++)for(var u=1*i,o=0;o<this.modules[i].length;o++){var s=1*o;this.modules[i][o]&&(n.beginFill(0,100),n.moveTo(s,u),n.lineTo(s+1,u),n.lineTo(s+1,u+1),n.lineTo(s,u+1),n.endFill())}return n},c.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},c.setupPositionAdjustPattern=function(){for(var e=o.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],i=e[r];if(null==this.modules[n][i])for(var u=-2;u<=2;u++)for(var s=-2;s<=2;s++)this.modules[n+u][i+s]=-2==u||2==u||-2==s||2==s||0==u&&0==s}},c.setupTypeNumber=function(e){for(var t=o.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(r=0;r<18;r++){n=!e&&1==(t>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},c.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=o.getBCHTypeInfo(r),i=0;i<15;i++){var u=!e&&1==(n>>i&1);i<6?this.modules[i][8]=u:i<8?this.modules[i+1][8]=u:this.modules[this.moduleCount-15+i][8]=u}for(i=0;i<15;i++){u=!e&&1==(n>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=u:i<9?this.modules[8][15-i-1+1]=u:this.modules[8][15-i-1]=u}this.modules[this.moduleCount-8][8]=!e},c.mapData=function(e,t){for(var r=-1,n=this.moduleCount-1,i=7,u=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[n][s-a]){var c=!1;u<e.length&&(c=1==(e[u]>>>i&1)),o.getMask(t,n,s-a)&&(c=!c),this.modules[n][s-a]=c,-1==--i&&(u++,i=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}},a.PAD0=236,a.PAD1=17,a.createData=function(e,t,r){for(var n=i.getRSBlocks(e,t),s=new u,c=0;c<r.length;c++){var f=r[c];s.put(f.mode,4),s.put(f.getLength(),o.getLengthInBits(f.mode,e)),f.write(s)}var p=0;for(c=0;c<n.length;c++)p+=n[c].dataCount;if(s.getLengthInBits()>8*p)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*p+")");for(s.getLengthInBits()+4<=8*p&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*p)&&(s.put(a.PAD0,8),!(s.getLengthInBits()>=8*p));)s.put(a.PAD1,8);return a.createBytes(s,n)},a.createBytes=function(e,t){for(var r=0,n=0,i=0,u=new Array(t.length),a=new Array(t.length),c=0;c<t.length;c++){var f=t[c].dataCount,p=t[c].totalCount-f;n=Math.max(n,f),i=Math.max(i,p),u[c]=new Array(f);for(var h=0;h<u[c].length;h++)u[c][h]=255&e.buffer[h+r];r+=f;var l=o.getErrorCorrectPolynomial(p),d=new s(u[c],l.getLength()-1).mod(l);a[c]=new Array(l.getLength()-1);for(h=0;h<a[c].length;h++){var v=h+d.getLength()-a[c].length;a[c][h]=v>=0?d.get(v):0}}var y=0;for(h=0;h<t.length;h++)y+=t[h].totalCount;var w=new Array(y),g=0;for(h=0;h<n;h++)for(c=0;c<t.length;c++)h<u[c].length&&(w[g++]=u[c][h]);for(h=0;h<i;h++)for(c=0;c<t.length;c++)h<a[c].length&&(w[g++]=a[c][h]);return w},e.exports=a},4100:function(e,t,r){var n=r(3232);function i(e){this.mode=n.MODE_8BIT_BYTE,this.data=e}i.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=i},4101:function(e,t,r){var n=r(3233);function i(e,t){this.totalCount=e,this.dataCount=t}i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(e,t){var r=i.getRsBlockTable(e,t);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,u=new Array,o=0;o<n;o++)for(var s=r[3*o+0],a=r[3*o+1],c=r[3*o+2],f=0;f<s;f++)u.push(new i(a,c));return u},i.getRsBlockTable=function(e,t){switch(t){case n.L:return i.RS_BLOCK_TABLE[4*(e-1)+0];case n.M:return i.RS_BLOCK_TABLE[4*(e-1)+1];case n.Q:return i.RS_BLOCK_TABLE[4*(e-1)+2];case n.H:return i.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=i},4102:function(e,t){function r(){this.buffer=new Array,this.length=0}r.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=r},4103:function(e,t,r){var n=r(3232),i=r(3234),u=r(3235),o=0,s=1,a=2,c=3,f=4,p=5,h=6,l=7,d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;d.getBCHDigit(t)-d.getBCHDigit(d.G15)>=0;)t^=d.G15<<d.getBCHDigit(t)-d.getBCHDigit(d.G15);return(e<<10|t)^d.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;d.getBCHDigit(t)-d.getBCHDigit(d.G18)>=0;)t^=d.G18<<d.getBCHDigit(t)-d.getBCHDigit(d.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return d.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case o:return(t+r)%2==0;case s:return t%2==0;case a:return r%3==0;case c:return(t+r)%3==0;case f:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case p:return t*r%2+t*r%3==0;case h:return(t*r%2+t*r%3)%2==0;case l:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new i([1],0),r=0;r<e;r++)t=t.multiply(new i([1,u.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var i=0;i<t;i++){for(var u=0,o=e.isDark(n,i),s=-1;s<=1;s++)if(!(n+s<0||t<=n+s))for(var a=-1;a<=1;a++)i+a<0||t<=i+a||0==s&&0==a||o==e.isDark(n+s,i+a)&&u++;u>5&&(r+=3+u-5)}for(n=0;n<t-1;n++)for(i=0;i<t-1;i++){var c=0;e.isDark(n,i)&&c++,e.isDark(n+1,i)&&c++,e.isDark(n,i+1)&&c++,e.isDark(n+1,i+1)&&c++,0!=c&&4!=c||(r+=3)}for(n=0;n<t;n++)for(i=0;i<t-6;i++)e.isDark(n,i)&&!e.isDark(n,i+1)&&e.isDark(n,i+2)&&e.isDark(n,i+3)&&e.isDark(n,i+4)&&!e.isDark(n,i+5)&&e.isDark(n,i+6)&&(r+=40);for(i=0;i<t;i++)for(n=0;n<t-6;n++)e.isDark(n,i)&&!e.isDark(n+1,i)&&e.isDark(n+2,i)&&e.isDark(n+3,i)&&e.isDark(n+4,i)&&!e.isDark(n+5,i)&&e.isDark(n+6,i)&&(r+=40);var f=0;for(i=0;i<t;i++)for(n=0;n<t;n++)e.isDark(n,i)&&f++;return r+=10*(Math.abs(100*f/t/t-50)/5)}};e.exports=d}}]);
//# sourceMappingURL=15.51043ea7.chunk.js.map