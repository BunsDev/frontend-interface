(this["webpackJsonpfrontend-interface"]=this["webpackJsonpfrontend-interface"]||[]).push([[48],{4119:function(e,t,n){"use strict";n.r(t);var a,c,r,o,s,i,l=n(56),d=n(3),h=n.n(d),b=n(22),u=n(15),j=n(2),m=n(28),f=n(23),g=n(0),p=n(49),x=n(97),O=n(2770),v=n(2851),y=n(1192),w=n(2789),R=n(159),k=n(2774),C=n(24),N=n(2902),z=n.n(N),P=n(3415),S=n.n(P),D=(n(3416),n(749)),B=n(468),I=n(55),M=n(786),W=n(748),X=n(111),A=n(60),H=n(1),J=C.default.div(a||(a=Object(f.a)(["\n\tpadding: 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-bottom: 40px;\n\tmargin-top: 10px;\n\tborder: none;\n\tbackground-color: transparent;\n"]))),L=C.default.h2(c||(c=Object(f.a)(["\n\tfont-size: 1.25rem;\n\tfont-weight: 700;\n\tcolor: ",";\n\tmargin: 0;\n"])),(function(e){return e.theme.text1})),Y=Object(C.default)(O.a.Row)(r||(r=Object(f.a)([""]))),E=Object(C.default)(O.a.Group)(o||(o=Object(f.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 30px;\n"]))),F=Object(C.default)(O.a.Label)(s||(s=Object(f.a)(["\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tmargin-bottom: 15px;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n"]))),q=Object(C.default)(O.a.Control)(i||(i=Object(f.a)(["\n\tborder-radius: 12px;\n\tbackground-color: ",";\n\tmin-height: 56px;\n\tpadding: 18px 20px;\n\tcolor: ",";\n\tresize: none;\n\tborder: none;\n\tfont-weight: 400;\n\tfont-size: 0.875rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n\n\t::placeholder {\n\t\tcolor: ",";\n\t}\n\n\t&:focus,\n\t&:active {\n\t\toutline: none;\n\t\tbackground-color: ",";\n\t}\n"])),(function(e){return e.theme.bg1}),(function(e){return e.theme.text1}),(function(e){return e.theme.text4}),(function(e){return e.theme.bg1}));t.default=function(e){var t=Object(I.a)(),n=t.account,a=t.library,c=new M.a,r=Object(x.g)(),o=Object(x.i)().space,s=Object(X.f)(),i=Object(p.d)(),d=Object(p.e)((function(e){return e.governance})).spaces,f=Object(k.a)().t,C=Object(g.useState)(!1),N=Object(m.a)(C,2),P=N[0],G=N[1],Q=Object(g.useState)({name:"",body:"",choices:["",""],snapshot:[],dateRange:{from:null,to:null},metadata:{}}),T=Object(m.a)(Q,2),K=T[0],U=T[1],V=function(e,t){U((function(n){return Object(j.a)(Object(j.a)({},n),{},Object(u.a)({},e,t))}))},Z=function(){var e={start:z()("".concat(K.dateRange.from.year,"-").concat(K.dateRange.from.month,"-").concat(K.dateRange.from.day)).format("X"),end:z()("".concat(K.dateRange.to.year,"-").concat(K.dateRange.to.month,"-").concat(K.dateRange.to.day)).format("X")};return!P&&n&&K.name&&K.body&&e.start&&e.end&&e.end>e.start&&K.snapshot&&K.choices.length>=2&&!K.choices.some((function(e){return""===e}))},$=function(){var e=Object(b.a)(h.a.mark((function e(t){var i,l,b,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n){e.next=4;break}return s(),e.abrupt("return",!1);case 4:if(!Z()){e.next=28;break}return G(!0),i={name:K.name,body:K.body,snapshot:K.snapshot,choices:K.choices,start:z()("".concat(K.dateRange.from.year,"-").concat(K.dateRange.from.month,"-").concat(K.dateRange.from.day)).format("X"),end:z()("".concat(K.dateRange.to.year,"-").concat(K.dateRange.to.month,"-").concat(K.dateRange.to.day)).format("X"),metadata:Object(j.a)(Object(j.a)({},K.metadata),{},{strategies:d[o].strategies})},l={token:d[o].token,type:"proposal",space:o,payload:i},b={address:n,msg:JSON.stringify(Object(j.a)({version:"0.1.3",timestamp:(Date.now()/1e3).toFixed()},l))},e.prev=9,Object(R.c)("Sending ...",{icon:"\ud83d\udca1"}),e.next=13,a.getSigner(n).signMessage(b.msg);case 13:return b.sig=e.sent,e.next=16,c.sendMessage(b);case 16:u=e.sent,G(!1),R.c.success("Your Proposal is in!"),u.hasOwnProperty("ipfsHash")&&r.push("".concat(A.g,"/").concat(o)),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),R.c.error("Something went wrong!"),G(!1);case 26:e.next=29;break;case 28:R.c.error("Please fill all Fields and your proposal choices should be more than 1");case 29:case"end":return e.stop()}}),e,null,[[9,22]])})));return function(t){return e.apply(this,arguments)}}();Object(g.useEffect)((function(){0===Object.keys(d).length?i(Object(B.b)()):d.hasOwnProperty(o)||r.push(A.g)}),[d,o,i,r]),Object(g.useEffect)((function(){V("snapshot",a.blockNumber)}),[a.blockNumber]);return Object(H.jsx)(W.a,{title:f("governance.title"),networkSensitive:!0,children:Object(H.jsx)(v.a,{children:Object(H.jsx)(y.a,{xs:12,children:Object(H.jsxs)(D.b,{children:[Object(H.jsx)(J,{children:Object(H.jsx)(L,{className:"card-title",children:f("governance.createProposal")})}),Object(H.jsx)("div",{children:Object(H.jsx)(O.a,{children:Object(H.jsxs)(Y,{children:[Object(H.jsxs)(E,{as:y.a,xs:12,children:[Object(H.jsx)(F,{children:f("governance.question")}),Object(H.jsx)(q,{as:"input",placeholder:"Question",value:K.name,onChange:function(e){return V("name",e.target.value)}})]}),Object(H.jsxs)(E,{as:y.a,xs:12,children:[Object(H.jsx)(F,{children:f("governance.whatIsYourProposal")}),Object(H.jsx)(q,{as:"textarea",rows:"8",style:{resize:"vertical"},placeholder:f("governance.whatIsYourProposal"),value:K.body,onChange:function(e){return V("body",e.target.value)}})]}),Object(H.jsx)(y.a,{xs:12,children:Object(H.jsxs)(v.a,{children:[Object(H.jsxs)(E,{as:y.a,xs:12,md:12,lg:4,children:[Object(H.jsx)(F,{children:"Snapshot"}),Object(H.jsx)(q,{placeholder:"Snapshot",value:K.snapshot,onChange:function(e){return V("snapshot",e.target.value)}})]}),Object(H.jsx)(y.a,{xs:12,md:6,lg:8,children:Object(H.jsxs)(v.a,{children:[Object(H.jsxs)(E,{as:y.a,xs:12,md:6,children:[Object(H.jsx)(F,{children:f("startDate")}),Object(H.jsx)(S.a,{wrapperClassName:"d-flex",value:K.dateRange,onChange:function(e){return V("dateRange",e)},colorPrimary:"#0891B2",colorPrimaryLight:"rgba(6, 115, 141, 0.2)",renderInput:function(e){var t=e.ref;return Object(H.jsx)(q,{ref:t,placeholder:"Select a Date",value:K.dateRange.from?"".concat(K.dateRange.from.year,"/").concat(K.dateRange.from.month,"/").concat(K.dateRange.from.day):""})},shouldHighlightWeekends:!0})]}),Object(H.jsxs)(E,{as:y.a,xs:12,md:6,children:[Object(H.jsx)(F,{children:f("endDate")}),Object(H.jsx)(S.a,{wrapperClassName:"d-flex",value:K.dateRange,onChange:function(e){return V("dateRange",e)},colorPrimary:"#0891B2",colorPrimaryLight:"rgba(6, 115, 141, 0.2)",renderInput:function(e){var t=e.ref;return Object(H.jsx)(q,{ref:t,placeholder:"Select a Date",value:K.dateRange.to?"".concat(K.dateRange.to.year,"/").concat(K.dateRange.to.month,"/").concat(K.dateRange.to.day):""})},shouldHighlightWeekends:!0})]})]})})]})}),Object(H.jsxs)(E,{as:y.a,xs:12,className:"d-flex flex-column",children:[Object(H.jsx)(F,{children:f("choices")}),K.choices.map((function(e,t){return Object(H.jsx)(q,{value:K.choices[t],onChange:function(e){var n=Object(l.a)(K.choices);n[t]=e.target.value,V("choices",n)},placeholder:"".concat(f("choice")," ").concat(t+1),className:"mb-3"},"choice-".concat(t+1))})),Object(H.jsxs)("button",{className:"btn btn-link align-self-center align-self-md-end p-0 d-flex align-items-center justify-content-center",onClick:function(e){e.preventDefault();var t=K.choices.concat("");V("choices",t)},children:[Object(H.jsxs)("svg",{width:"15px",height:"15px",viewBox:"0 0 16 16",className:"bi bi-plus-circle",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[Object(H.jsx)("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(H.jsx)("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})]}),Object(H.jsx)("span",{className:"pl-2",children:f("addChoice")})]})]}),Object(H.jsx)(E,{as:y.a,className:"d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-center mb-0",children:Object(H.jsx)("button",{className:"btn btn-primary py-3",onClick:$,style:{minWidth:250,marginBottom:60,marginTop:30},children:n?P?Object(H.jsx)("div",{className:"d-flex align-items-center justify-content-center w-100",children:Object(H.jsx)(w.a,{animation:"border",variant:"light",size:"sm",id:"create-proposal"})}):f("publish"):"Connect Wallet"})})]})})})]})})})})}}}]);
//# sourceMappingURL=48.71168fa7.chunk.js.map